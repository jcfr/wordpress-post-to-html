<meta charset="utf-8">
<div class="entry-content">
 <p>
  One thing that can be a little confusing when you first start using
  <a href="http://cmake.org/" rel="noopener" target="_blank">
   CMake
  </a>
  to build your project is the default build type â€“ specified in the CMAKE_BUILD_TYPE variable. CMake has several default build types, but if nothing is specified when configuring your project it defaults to an empty string and no optimization flags are used. A few years ago I wrote some CMake code to set a default if one was not specified, and also populate a list of available options so that it would show up in cmake-gui as a drop down list.
 </p>
 <!-- Crayon Syntax Highlighter v_2.7.2_beta -->
 <div class="crayon-syntax crayon-theme-coy crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c41c4f4997cb548877672" style=" margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 25px !important;">
  <div class="crayon-plain-wrap">
   <textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 16px !important; line-height: 25px !important;" wrap="soft">
# Set a default build type if none was specified
set(default_build_type "Release")
if(EXISTS "${CMAKE_SOURCE_DIR}/.git")
  set(default_build_type "Debug")
endif()

if(NOT CMAKE_BUILD_TYPE AND NOT CMAKE_CONFIGURATION_TYPES)
  message(STATUS "Setting build type to '${default_build_type}' as none was specified.")
  set(CMAKE_BUILD_TYPE "${default_build_type}" CACHE
      STRING "Choose the type of build." FORCE)
  # Set the possible values of build type for cmake-gui
  set_property(CACHE CMAKE_BUILD_TYPE PROPERTY STRINGS
    "Debug" "Release" "MinSizeRel" "RelWithDebInfo")
endif()</textarea>
  </div>
  <div class="crayon-main">
   <table class="crayon-table">
    <tr class="crayon-row">
     <td class="crayon-nums " data-settings="show">
      <div class="crayon-nums-content" style="font-size: 16px !important; line-height: 25px !important;">
       <div class="crayon-num" data-line="crayon-5c41c4f4997cb548877672-1">
        1
       </div>
       <div class="crayon-num" data-line="crayon-5c41c4f4997cb548877672-2">
        2
       </div>
       <div class="crayon-num" data-line="crayon-5c41c4f4997cb548877672-3">
        3
       </div>
       <div class="crayon-num" data-line="crayon-5c41c4f4997cb548877672-4">
        4
       </div>
       <div class="crayon-num" data-line="crayon-5c41c4f4997cb548877672-5">
        5
       </div>
       <div class="crayon-num" data-line="crayon-5c41c4f4997cb548877672-6">
        6
       </div>
       <div class="crayon-num" data-line="crayon-5c41c4f4997cb548877672-7">
        7
       </div>
       <div class="crayon-num" data-line="crayon-5c41c4f4997cb548877672-8">
        8
       </div>
       <div class="crayon-num" data-line="crayon-5c41c4f4997cb548877672-9">
        9
       </div>
       <div class="crayon-num" data-line="crayon-5c41c4f4997cb548877672-10">
        10
       </div>
       <div class="crayon-num" data-line="crayon-5c41c4f4997cb548877672-11">
        11
       </div>
       <div class="crayon-num" data-line="crayon-5c41c4f4997cb548877672-12">
        12
       </div>
       <div class="crayon-num" data-line="crayon-5c41c4f4997cb548877672-13">
        13
       </div>
       <div class="crayon-num" data-line="crayon-5c41c4f4997cb548877672-14">
        14
       </div>
      </div>
     </td>
     <td class="crayon-code">
      <div class="crayon-pre" style="font-size: 16px !important; line-height: 25px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <div class="crayon-line" id="crayon-5c41c4f4997cb548877672-1">
        <span class="crayon-p">
         # Set a default build type if none was specified
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41c4f4997cb548877672-2">
        <span class="crayon-e">
         set
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         default_build
        </span>
        <span class="crayon-sy">
         _
        </span>
        type
        <span class="crayon-h">
        </span>
        <span class="crayon-s">
         "Release"
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41c4f4997cb548877672-3">
        <span class="crayon-st">
         if
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-i">
         EXISTS
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-s">
         "${CMAKE_SOURCE_DIR}/.git"
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41c4f4997cb548877672-4">
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         set
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         default_build
        </span>
        <span class="crayon-sy">
         _
        </span>
        type
        <span class="crayon-h">
        </span>
        <span class="crayon-s">
         "Debug"
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41c4f4997cb548877672-5">
        <span class="crayon-st">
         endif
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41c4f4997cb548877672-6">
       </div>
       <div class="crayon-line" id="crayon-5c41c4f4997cb548877672-7">
        <span class="crayon-st">
         if
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-st">
         NOT
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         CMAKE_BUILD_TYPE
        </span>
        <span class="crayon-st">
         AND
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-st">
         NOT
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         CMAKE_CONFIGURATION_TYPES
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41c4f4997cb548877672-8">
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         message
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-i">
         STATUS
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-s">
         "Setting build type to '${default_build_type}' as none was specified."
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41c4f4997cb548877672-9">
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         set
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         CMAKE_BUILD
        </span>
        <span class="crayon-sy">
         _
        </span>
        TYPE
        <span class="crayon-h">
        </span>
        <span class="crayon-s">
         "${default_build_type}"
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         CACHE
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41c4f4997cb548877672-10">
        <span class="crayon-e">
        </span>
        <span class="crayon-t">
         STRING
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-s">
         "Choose the type of build."
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         FORCE
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41c4f4997cb548877672-11">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # Set the possible values of build type for cmake-gui
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41c4f4997cb548877672-12">
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         set_property
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-e">
         CACHE
        </span>
        <span class="crayon-e">
         CMAKE_BUILD_TYPE
        </span>
        <span class="crayon-m">
         PROPERTY
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-i">
         STRINGS
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41c4f4997cb548877672-13">
        <span class="crayon-h">
        </span>
        <span class="crayon-s">
         "Debug"
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-s">
         "Release"
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-s">
         "MinSizeRel"
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-s">
         "RelWithDebInfo"
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41c4f4997cb548877672-14">
        <span class="crayon-st">
         endif
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
      </div>
     </td>
    </tr>
   </table>
  </div>
 </div>
 <!-- [Format Time: 0.0005 seconds] -->
 <p>
  The code snippet above shows a slightly modified version, that I put in a file called
  <a href="https://github.com/openchemistry/tomviz/blob/master/cmake/BuildType.cmake" rel="noopener" target="_blank">
   BuildType.cmake
  </a>
  , and use it to ensure the build type defaults to something reasonable for generators that use it. If you add the directory containing this file to the CMAKE_MODULE_PATH in your project you can then include it somewhere near the top of your CMakeLists.txt. It will now default to using a debug build if the source directory is a git clone, or a release build if not. It is also quite easy to customize its behavior according to the preferences of your project.
 </p>
 <p>
  If a build type is supplied on the command line that will be respected, and for multi configuration generators (such as Visual Studio) this doesnâ€™t apply (indicated by the presence of the CMAKE_CONFIGURATION_TYPES variable). I have found it useful to develop a few files like this that can easily be dropped into a CMake-based project to provide default settings.
 </p>
</div>
