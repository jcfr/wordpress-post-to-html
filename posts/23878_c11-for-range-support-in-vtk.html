<meta charset="utf-8">
<div class="entry-content">
 <p>
  Almost two years ago, the VTK development team made C++11 a hard dependency. The goal was to make VTK development less error-prone (e.g. adopting the
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e22442873936" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-v">
     override
    </span>
   </span>
  </span>
  keyword) and more convenient (e.g.
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e2a669174890" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-v">
     auto
    </span>
   </span>
  </span>
  typing). As the codebase settles into the new world opened up by C++11, leveraging modern features in the project’s core will help VTK meet new developers’ expectations and ease integration with more recent projects, such as VTK-m.
 </p>
 <h2>
  C++11 for-range syntax
 </h2>
 <p>
  One of the most popular features introduced by C++11 is the for-range loop syntax. This language feature adds a new syntax for writing
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e2c279551481" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-st">
     for
    </span>
   </span>
  </span>
  loops that is safer and less cumbersome than what was available in C++03. Previously, there were two common approaches to processing all elements in a standard container: by index or by iterator:
 </p>
 <p>
 </p>
 <!-- Crayon Syntax Highlighter v_2.7.2_beta -->
 <div class="crayon-syntax crayon-theme-coy crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c41e89337e2f989490085" style=" margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 25px !important;">
  <div class="crayon-plain-wrap">
   <textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 16px !important; line-height: 25px !important;" wrap="soft">
std::vector&lt;float&gt; myVector = ...;
float sum = 0;

// Index:
for (size_t i = 0; i &lt; myVector.size(); ++i)
{
  sum += myVector[i];
}

// Iterator:
for (typename std::vector&lt;float&gt;::const_iterator it = myVector.begin();
     it != myVector.end(); ++it)
{
  sum += *it;
}</textarea>
  </div>
  <div class="crayon-main">
   <table class="crayon-table">
    <tr class="crayon-row">
     <td class="crayon-nums " data-settings="show">
      <div class="crayon-nums-content" style="font-size: 16px !important; line-height: 25px !important;">
       <div class="crayon-num" data-line="crayon-5c41e89337e2f989490085-1">
        1
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e2f989490085-2">
        2
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e2f989490085-3">
        3
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e2f989490085-4">
        4
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e2f989490085-5">
        5
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e2f989490085-6">
        6
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e2f989490085-7">
        7
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e2f989490085-8">
        8
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e2f989490085-9">
        9
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e2f989490085-10">
        10
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e2f989490085-11">
        11
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e2f989490085-12">
        12
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e2f989490085-13">
        13
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e2f989490085-14">
        14
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e2f989490085-15">
        15
       </div>
      </div>
     </td>
     <td class="crayon-code">
      <div class="crayon-pre" style="font-size: 16px !important; line-height: 25px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <div class="crayon-line" id="crayon-5c41e89337e2f989490085-1">
        <span class="crayon-v">
         std
        </span>
        <span class="crayon-o">
         ::
        </span>
        <span class="crayon-v">
         vector
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-t">
         float
        </span>
        <span class="crayon-o">
         &gt;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         myVector
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e2f989490085-2">
        <span class="crayon-t">
         float
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         sum
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e2f989490085-3">
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e2f989490085-4">
        <span class="crayon-c">
         // Index:
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e2f989490085-5">
        <span class="crayon-st">
         for
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         size
        </span>
        <span class="crayon-sy">
         _
        </span>
        t
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         i
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         i
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         myVector
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         size
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         ++
        </span>
        <span class="crayon-v">
         i
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e2f989490085-6">
        <span class="crayon-sy">
         {
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e2f989490085-7">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         sum
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         +=
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         myVector
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-v">
         i
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e2f989490085-8">
        <span class="crayon-sy">
         }
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e2f989490085-9">
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e2f989490085-10">
        <span class="crayon-c">
         // Iterator:
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e2f989490085-11">
        <span class="crayon-st">
         for
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-r">
         typename
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         std
        </span>
        <span class="crayon-o">
         ::
        </span>
        <span class="crayon-v">
         vector
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-t">
         float
        </span>
        <span class="crayon-o">
         &gt;
        </span>
        <span class="crayon-o">
         ::
        </span>
        <span class="crayon-e">
         const_iterator
        </span>
        <span class="crayon-v">
         it
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         myVector
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         begin
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e2f989490085-12">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         it
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         !=
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         myVector
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-st">
         end
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         ++
        </span>
        <span class="crayon-v">
         it
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e2f989490085-13">
        <span class="crayon-sy">
         {
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e2f989490085-14">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         sum
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         +=
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         *
        </span>
        <span class="crayon-v">
         it
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e2f989490085-15">
        <span class="crayon-sy">
         }
        </span>
       </div>
      </div>
     </td>
    </tr>
   </table>
  </div>
 </div>
 <!-- [Format Time: 0.0005 seconds] -->
 <p>
 </p>
 <p>
  There are drawbacks to both. Index based iteration can introduce errors in more complex usecases, as the index operator (
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e31204139146" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-sy">
     [
    </span>
    <span class="crayon-sy">
     ]
    </span>
   </span>
  </span>
  ) is not bounds-checked and a common error is to write past the end of an array, silently corrupting memory and possibly creating exploitable code paths. Iterator-based traversal is less likely to have this problem, as the begin and end of the range are more clearly marked, but it is cumbersome enough to write that many developers avoid using it. The introduction of
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e33650337089" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-v">
     auto
    </span>
   </span>
  </span>
  and
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e35473908208" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-v">
     decltype
    </span>
   </span>
  </span>
  helped simplify this, but it was still a lot of boilerplate typing and error-prone manual checking for the data’s end point.
 </p>
 <p>
  The for-range syntax addresses these issues by introducing a syntax that is both succinct and safe, hiding the details of the loop inside of a
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e37431738692" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-o">
     :
    </span>
   </span>
  </span>
  , where they’re guaranteed to be correctly used:
 </p>
 <p>
 </p>
 <!-- Crayon Syntax Highlighter v_2.7.2_beta -->
 <div class="crayon-syntax crayon-theme-coy crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c41e89337e39727127530" style=" margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 25px !important;">
  <div class="crayon-plain-wrap">
   <textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 16px !important; line-height: 25px !important;" wrap="soft">
// for-range iteration:
for (float value : myVector)
{
   sum += value;
}</textarea>
  </div>
  <div class="crayon-main">
   <table class="crayon-table">
    <tr class="crayon-row">
     <td class="crayon-nums " data-settings="show">
      <div class="crayon-nums-content" style="font-size: 16px !important; line-height: 25px !important;">
       <div class="crayon-num" data-line="crayon-5c41e89337e39727127530-1">
        1
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e39727127530-2">
        2
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e39727127530-3">
        3
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e39727127530-4">
        4
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e39727127530-5">
        5
       </div>
      </div>
     </td>
     <td class="crayon-code">
      <div class="crayon-pre" style="font-size: 16px !important; line-height: 25px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <div class="crayon-line" id="crayon-5c41e89337e39727127530-1">
        <span class="crayon-c">
         // for-range iteration:
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e39727127530-2">
        <span class="crayon-st">
         for
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-t">
         float
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-t">
         value
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         :
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         myVector
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e39727127530-3">
        <span class="crayon-sy">
         {
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e39727127530-4">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         sum
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         +=
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-t">
         value
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e39727127530-5">
        <span class="crayon-sy">
         }
        </span>
       </div>
      </div>
     </td>
    </tr>
   </table>
  </div>
 </div>
 <!-- [Format Time: 0.0001 seconds] -->
 <p>
 </p>
 <p>
  This is equivalent to both of the earlier examples, but it easier to type, faster to read, and less error-prone. That about covers how things work in the standard library, but what about VTK?
 </p>
 <h2>
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e3b665066034" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-v">
     vtkDataArray
    </span>
   </span>
  </span>
  APIs
 </h2>
 <p>
  In VTK, data is stored in
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e3c975371163" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-v">
     vtkDataArray
    </span>
   </span>
  </span>
  s, and these have additional complications:
 </p>
 <h3>
  Tuple + Component Abstraction
 </h3>
 <div class="wp-caption alignright" id="attachment_23896" style="width: 177px">
  <img alt="" class="wp-image-23896 size-medium" height="300" sizes="(max-width: 167px) 100vw, 167px" src="http://blog.kitware.com/wp-content/uploads/2018/11/tuples-167x300.png" srcset="https://blog.kitware.com/wp-content/uploads/2018/11/tuples-167x300.png 167w, https://blog.kitware.com/wp-content/uploads/2018/11/tuples-220x396.png 220w, https://blog.kitware.com/wp-content/uploads/2018/11/tuples-250x450.png 250w, https://blog.kitware.com/wp-content/uploads/2018/11/tuples-90x162.png 90w, https://blog.kitware.com/wp-content/uploads/2018/11/tuples.png 310w" width="167"/>
  <p class="wp-caption-text">
   The tuple/component abstraction. Taken from
   <a href="https://www.kitware.com/products/books/VTKUsersGuide.pdf">
    The VTK User’s Guide
   </a>
   .
  </p>
 </div>
 <p>
  Unlike the
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e3f116103952" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-v">
     std
    </span>
    <span class="crayon-o">
     ::
    </span>
    <span class="crayon-v">
     vector
    </span>
   </span>
  </span>
  above, a
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e40588591979" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-v">
     vtkDataArray
    </span>
   </span>
  </span>
  is not a flat list of values, but rather an abstracted list of “tuples” made up of “components”. This complicates access patterns and leads to multiple APIs for interacting with the data. Values can be requested or modified using their tuple/component coordinates, or fetched into a local buffer one tuple at a time.
 </p>
 <h3>
  Typeless Base Class with Templated Implementations
 </h3>
 <p>
  Another key difference between the VTK and STL containers is that we know what sort of data the
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e42172880550" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-v">
     std
    </span>
    <span class="crayon-o">
     ::
    </span>
    <span class="crayon-v">
     vector
    </span>
    <span class="crayon-o">
     &lt;
    </span>
    <span class="crayon-t">
     float
    </span>
    <span class="crayon-o">
     &gt;
    </span>
   </span>
  </span>
  holds: it contains
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e44344563410" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-t">
     float
    </span>
   </span>
  </span>
  s. We know this because
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e46913006388" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-v">
     std
    </span>
    <span class="crayon-o">
     ::
    </span>
    <span class="crayon-v">
     vector
    </span>
   </span>
  </span>
  is directly templated with its value type.
 </p>
 <p>
  VTK’s containers are more complicated. The
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e48198400693" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-v">
     vtkDataArray
    </span>
   </span>
  </span>
  class is not templated; it may hold any type of data:
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e4a090283284" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-t">
     float
    </span>
   </span>
  </span>
  ,
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e4b877356633" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-t">
     int
    </span>
   </span>
  </span>
  ,
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e4d703769453" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-t">
     char
    </span>
   </span>
  </span>
  , etc, but the
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e4f846643375" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-v">
     vtkDataArray
    </span>
   </span>
  </span>
  API deals only in
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e51662812604" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-t">
     double
    </span>
   </span>
  </span>
  s, using virtual method calls and typecasts to fetch and convert the array’s data to a common type. This not only adds a significant performance hit to every array access, but also introduces errors in the case of 64-bit integers, which cannot be fully represented by the
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e53741444457" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-t">
     double
    </span>
   </span>
  </span>
  data type.
 </p>
 <p>
  To avoid the virtual call and typecast issues, the type-explicit subclasses of
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e54514269661" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-v">
     vtkDataArray
    </span>
   </span>
  </span>
  may be used directly. These offer APIs that are better optimized and compiler-transparent, enabling performance improvements through inlining and auto-vectorization when appropriate.
 </p>
 <h3>
  Multiple Storage Backends
 </h3>
 <p>
  Until recently, these type-explicit subclasses were the familiar types
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e56402530463" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-v">
     vtkFloatArray
    </span>
   </span>
  </span>
  ,
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e58409174190" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-v">
     vtkUnsignedCharArray
    </span>
   </span>
  </span>
  , etc, which inherit from the
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e5a985299054" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-v">
     vtkAOSDataArrayTemplate
    </span>
   </span>
  </span>
  class template. They all had the same array-of-structs (AOS) memory layout to represent tuples, and it was possible to obtain a raw pointer to their memory buffer to write optimized code. This worked well for a long time, but as VTK has increasingly been used in zero-copy in-situ contexts, the need to conform to other memory layouts efficiently became more and more important.
 </p>
 <p>
  Today, VTK natively offers supports for struct-of-arrays (SOA) layouts, and custom layouts can be added efficiently using the
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e5c892744337" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-v">
     vtkGenericDataArray
    </span>
   </span>
  </span>
  interface. These extensions mean that raw pointer access is no longer a viable route for optimizing a
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e5e351963117" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-v">
     vtkDataArray
    </span>
   </span>
  </span>
  of unknown origin, such as a filter input, since we can no longer expect them to have an AOS memory layout, or even exist in-memory at all.
 </p>
 <h2>
  Iterating through
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e60898740866" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-v">
     vtkDataArray
    </span>
   </span>
  </span>
  s
 </h2>
 <p>
  There are more than a few ways to process the elements in these data structures. Let’s take a look at how the use of these containers evolved, from the slower and less general methods, to the faster techniques that are generic across container types. We’ll look at the example of computing the magnitude of vec3’s and storing them in a separate single component array.
 </p>
 <h3>
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e62945934370" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-v">
     vtkDataArray
    </span>
   </span>
  </span>
  API
 </h3>
 <p>
  This approach calls methods on a
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e64859072430" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-v">
     vtkDataArray
    </span>
   </span>
  </span>
  object, which bounce to a virtual override and typecast the underlying data to
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e65659821675" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-t">
     double
    </span>
   </span>
  </span>
  .
 </p>
 <p>
 </p>
 <!-- Crayon Syntax Highlighter v_2.7.2_beta -->
 <div class="crayon-syntax crayon-theme-coy crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c41e89337e67169226565" style=" margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 25px !important;">
  <div class="crayon-plain-wrap">
   <textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 16px !important; line-height: 25px !important;" wrap="soft">
void mag3(vtkDataArray *vectors, vtkDataArray *magnitudes)
{
  const vtkIdType numTuples = vectors-&gt;GetNumberOfTuples();
  std::array&lt;double, 3&gt; tuple;
  for (vtkIdType t = 0; t &lt; numTuples; ++t)
  {
    vectors-&gt;GetTuple(t, tuple.data());
    double mag = 0.;
    for (double comp : tuple) 
    {
      mag += comp * comp;
    }
  mag = std::sqrt(mag);
  magnitudes-&gt;SetTuple(t, &amp;mag);
  }
}</textarea>
  </div>
  <div class="crayon-main">
   <table class="crayon-table">
    <tr class="crayon-row">
     <td class="crayon-nums " data-settings="show">
      <div class="crayon-nums-content" style="font-size: 16px !important; line-height: 25px !important;">
       <div class="crayon-num" data-line="crayon-5c41e89337e67169226565-1">
        1
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e67169226565-2">
        2
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e67169226565-3">
        3
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e67169226565-4">
        4
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e67169226565-5">
        5
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e67169226565-6">
        6
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e67169226565-7">
        7
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e67169226565-8">
        8
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e67169226565-9">
        9
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e67169226565-10">
        10
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e67169226565-11">
        11
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e67169226565-12">
        12
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e67169226565-13">
        13
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e67169226565-14">
        14
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e67169226565-15">
        15
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e67169226565-16">
        16
       </div>
      </div>
     </td>
     <td class="crayon-code">
      <div class="crayon-pre" style="font-size: 16px !important; line-height: 25px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <div class="crayon-line" id="crayon-5c41e89337e67169226565-1">
        <span class="crayon-t">
         void
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         mag3
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         vtkDataArray
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         *
        </span>
        <span class="crayon-v">
         vectors
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtkDataArray
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         *
        </span>
        <span class="crayon-v">
         magnitudes
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e67169226565-2">
        <span class="crayon-sy">
         {
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e67169226565-3">
        <span class="crayon-h">
        </span>
        <span class="crayon-m">
         const
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         vtkIdType
        </span>
        <span class="crayon-v">
         numTuples
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vectors
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-e">
         GetNumberOfTuples
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e67169226565-4">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         std
        </span>
        <span class="crayon-o">
         ::
        </span>
        <span class="crayon-t">
         array
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-t">
         double
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         3
        </span>
        <span class="crayon-o">
         &gt;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         tuple
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e67169226565-5">
        <span class="crayon-h">
        </span>
        <span class="crayon-st">
         for
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-i">
         vtkIdType
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         t
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         t
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         numTuples
        </span>
        <span class="crayon-sy">
         ;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         ++
        </span>
        <span class="crayon-v">
         t
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e67169226565-6">
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         {
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e67169226565-7">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vectors
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-e">
         GetTuple
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         t
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         tuple
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         data
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e67169226565-8">
        <span class="crayon-h">
        </span>
        <span class="crayon-t">
         double
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         mag
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         0.
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e67169226565-9">
        <span class="crayon-h">
        </span>
        <span class="crayon-st">
         for
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-t">
         double
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         comp
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         :
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         tuple
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-h">
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e67169226565-10">
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         {
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e67169226565-11">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         mag
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         +=
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         comp
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         *
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         comp
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e67169226565-12">
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         }
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e67169226565-13">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         mag
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         std
        </span>
        <span class="crayon-o">
         ::
        </span>
        <span class="crayon-e">
         sqrt
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         mag
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e67169226565-14">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         magnitudes
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-e">
         SetTuple
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         t
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         &amp;mag
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e67169226565-15">
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         }
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e67169226565-16">
        <span class="crayon-sy">
         }
        </span>
       </div>
      </div>
     </td>
    </tr>
   </table>
  </div>
 </div>
 <!-- [Format Time: 0.0007 seconds] -->
 <p>
 </p>
 <p>
  Pros:
 </p>
 <ul>
  <li>
   Works for all
   <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e69768583796" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
    <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
     <span class="crayon-v">
      vtkDataArray
     </span>
    </span>
   </span>
   objects.
  </li>
  <li>
   Simple to write, easy to read.
  </li>
 </ul>
 <p>
  Cons:
 </p>
 <ul>
  <li>
   Slow.
  </li>
  <li>
   Optimized versions would require additional implementation.
  </li>
 </ul>
 <h3>
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e6b738962571" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-v">
     GetVoidPointer
    </span>
   </span>
  </span>
  and
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e6d636593140" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-v">
     vtkTemplateMacro
    </span>
   </span>
  </span>
 </h3>
 <p>
  For a long time, this was the preferred way to write fast-path code in VTK. Before SOA and other variations of
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e6f925888245" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-v">
     vtkDataArray
    </span>
   </span>
  </span>
  , AOS memory layout could be assumed, and the raw memory buffer could be accessed via
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e70563088426" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-v">
     GetVoidPointer
    </span>
   </span>
  </span>
  . The returned pointer could be cast to the appropriate type using
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e72080489294" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-v">
     vtkTemplateMacro
    </span>
   </span>
  </span>
  and operated on directly. As shown below, things would get a bit messy when more than one array was needed, since the template macro only handled one type at a time.
 </p>
 <p>
 </p>
 <!-- Crayon Syntax Highlighter v_2.7.2_beta -->
 <div class="crayon-syntax crayon-theme-coy crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c41e89337e74610680626" style=" margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 25px !important;">
  <div class="crayon-plain-wrap">
   <textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 16px !important; line-height: 25px !important;" wrap="soft">
template &lt;typename VecType, typename MagType&gt;
void mag3Helper(VecType *vecs, MagType *mags, vtkIdType numTuples)
{
  for (vtkIdType t = 0; t &lt; numTuples; ++t)
  {
    MagType mag = 0;
    for (size_t i = 0; i &lt; 3; ++i)
    {
      mag += static_cast&lt;MagType&gt;((*vecs) * (*vecs));
      ++vecs;
    }
    *mags = std::sqrt(mag);
    ++mags;
  }
}

template &lt;typename VecType&gt;
void mag3Trampoline(VecType *vecs, vtkDataArray *mags, vtkIdType numTuples)
{
  // Resolve mags data type:
  switch (mags-&gt;GetDataType())
  {
    vtkTemplateMacro(
      mag3Helper(vecs,
                 static_cast&lt;VTK_TT*&gt;(mags-&gt;GetVoidPointer(0)),
                 numTuples));
    default:
      // error...
  }
}

void mag3(vtkDataArray *vecs, vtkDataArray *mags)
{
  const vtkIdType numTuples = vecs-&gt;GetNumberOfTuples();
  // Resolve vecs data type:
  switch (vecs-&gt;GetDataType())
  {
    vtkTemplateMacro(
      mag3Trampoline(static_cast&lt;VTK_TT*&gt;(vecs-&gt;GetVoidPointer(0)),
                     mags,
                     numTuples));
    default:
      // error...
  }
}</textarea>
  </div>
  <div class="crayon-main">
   <table class="crayon-table">
    <tr class="crayon-row">
     <td class="crayon-nums " data-settings="show">
      <div class="crayon-nums-content" style="font-size: 16px !important; line-height: 25px !important;">
       <div class="crayon-num" data-line="crayon-5c41e89337e74610680626-1">
        1
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e74610680626-2">
        2
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e74610680626-3">
        3
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e74610680626-4">
        4
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e74610680626-5">
        5
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e74610680626-6">
        6
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e74610680626-7">
        7
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e74610680626-8">
        8
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e74610680626-9">
        9
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e74610680626-10">
        10
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e74610680626-11">
        11
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e74610680626-12">
        12
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e74610680626-13">
        13
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e74610680626-14">
        14
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e74610680626-15">
        15
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e74610680626-16">
        16
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e74610680626-17">
        17
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e74610680626-18">
        18
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e74610680626-19">
        19
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e74610680626-20">
        20
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e74610680626-21">
        21
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e74610680626-22">
        22
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e74610680626-23">
        23
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e74610680626-24">
        24
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e74610680626-25">
        25
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e74610680626-26">
        26
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e74610680626-27">
        27
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e74610680626-28">
        28
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e74610680626-29">
        29
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e74610680626-30">
        30
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e74610680626-31">
        31
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e74610680626-32">
        32
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e74610680626-33">
        33
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e74610680626-34">
        34
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e74610680626-35">
        35
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e74610680626-36">
        36
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e74610680626-37">
        37
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e74610680626-38">
        38
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e74610680626-39">
        39
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e74610680626-40">
        40
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e74610680626-41">
        41
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e74610680626-42">
        42
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e74610680626-43">
        43
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e74610680626-44">
        44
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e74610680626-45">
        45
       </div>
      </div>
     </td>
     <td class="crayon-code">
      <div class="crayon-pre" style="font-size: 16px !important; line-height: 25px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <div class="crayon-line" id="crayon-5c41e89337e74610680626-1">
        <span class="crayon-t">
         template
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-r">
         typename
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         VecType
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         typename
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         MagType
        </span>
        <span class="crayon-o">
         &gt;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e74610680626-2">
        <span class="crayon-t">
         void
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         mag3Helper
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         VecType
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         *
        </span>
        <span class="crayon-v">
         vecs
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         MagType
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         *
        </span>
        <span class="crayon-v">
         mags
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         vtkIdType
        </span>
        <span class="crayon-v">
         numTuples
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e74610680626-3">
        <span class="crayon-sy">
         {
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e74610680626-4">
        <span class="crayon-h">
        </span>
        <span class="crayon-st">
         for
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-i">
         vtkIdType
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         t
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         t
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         numTuples
        </span>
        <span class="crayon-sy">
         ;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         ++
        </span>
        <span class="crayon-v">
         t
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e74610680626-5">
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         {
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e74610680626-6">
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         MagType
        </span>
        <span class="crayon-v">
         mag
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e74610680626-7">
        <span class="crayon-h">
        </span>
        <span class="crayon-st">
         for
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         size
        </span>
        <span class="crayon-sy">
         _
        </span>
        t
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         i
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         i
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         3
        </span>
        <span class="crayon-sy">
         ;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         ++
        </span>
        <span class="crayon-v">
         i
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e74610680626-8">
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         {
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e74610680626-9">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         mag
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         +=
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         static_cast
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-v">
         MagType
        </span>
        <span class="crayon-o">
         &gt;
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-o">
         *
        </span>
        <span class="crayon-v">
         vecs
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         *
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-o">
         *
        </span>
        <span class="crayon-v">
         vecs
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e74610680626-10">
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         ++
        </span>
        <span class="crayon-v">
         vecs
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e74610680626-11">
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         }
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e74610680626-12">
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         *
        </span>
        <span class="crayon-v">
         mags
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         std
        </span>
        <span class="crayon-o">
         ::
        </span>
        <span class="crayon-e">
         sqrt
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         mag
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e74610680626-13">
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         ++
        </span>
        <span class="crayon-v">
         mags
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e74610680626-14">
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         }
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e74610680626-15">
        <span class="crayon-sy">
         }
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e74610680626-16">
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e74610680626-17">
        <span class="crayon-t">
         template
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-r">
         typename
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         VecType
        </span>
        <span class="crayon-o">
         &gt;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e74610680626-18">
        <span class="crayon-t">
         void
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         mag3Trampoline
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         VecType
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         *
        </span>
        <span class="crayon-v">
         vecs
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtkDataArray
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         *
        </span>
        <span class="crayon-v">
         mags
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         vtkIdType
        </span>
        <span class="crayon-v">
         numTuples
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e74610680626-19">
        <span class="crayon-sy">
         {
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e74610680626-20">
        <span class="crayon-h">
        </span>
        <span class="crayon-c">
         // Resolve mags data type:
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e74610680626-21">
        <span class="crayon-h">
        </span>
        <span class="crayon-st">
         switch
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         mags
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-e">
         GetDataType
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e74610680626-22">
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         {
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e74610680626-23">
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         vtkTemplateMacro
        </span>
        <span class="crayon-sy">
         (
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e74610680626-24">
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         mag3Helper
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         vecs
        </span>
        <span class="crayon-sy">
         ,
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e74610680626-25">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         static_cast
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-v">
         VTK_TT
        </span>
        <span class="crayon-o">
         *
        </span>
        <span class="crayon-o">
         &gt;
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         mags
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-e">
         GetVoidPointer
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ,
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e74610680626-26">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         numTuples
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e74610680626-27">
        <span class="crayon-h">
        </span>
        <span class="crayon-st">
         default
        </span>
        <span class="crayon-o">
         :
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e74610680626-28">
        <span class="crayon-h">
        </span>
        <span class="crayon-c">
         // error...
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e74610680626-29">
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         }
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e74610680626-30">
        <span class="crayon-sy">
         }
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e74610680626-31">
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e74610680626-32">
        <span class="crayon-t">
         void
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         mag3
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         vtkDataArray
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         *
        </span>
        <span class="crayon-v">
         vecs
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtkDataArray
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         *
        </span>
        <span class="crayon-v">
         mags
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e74610680626-33">
        <span class="crayon-sy">
         {
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e74610680626-34">
        <span class="crayon-h">
        </span>
        <span class="crayon-m">
         const
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         vtkIdType
        </span>
        <span class="crayon-v">
         numTuples
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vecs
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-e">
         GetNumberOfTuples
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e74610680626-35">
        <span class="crayon-h">
        </span>
        <span class="crayon-c">
         // Resolve vecs data type:
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e74610680626-36">
        <span class="crayon-h">
        </span>
        <span class="crayon-st">
         switch
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         vecs
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-e">
         GetDataType
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e74610680626-37">
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         {
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e74610680626-38">
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         vtkTemplateMacro
        </span>
        <span class="crayon-sy">
         (
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e74610680626-39">
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         mag3Trampoline
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-r">
         static_cast
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-v">
         VTK_TT
        </span>
        <span class="crayon-o">
         *
        </span>
        <span class="crayon-o">
         &gt;
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         vecs
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-e">
         GetVoidPointer
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ,
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e74610680626-40">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         mags
        </span>
        <span class="crayon-sy">
         ,
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e74610680626-41">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         numTuples
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e74610680626-42">
        <span class="crayon-h">
        </span>
        <span class="crayon-st">
         default
        </span>
        <span class="crayon-o">
         :
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e74610680626-43">
        <span class="crayon-h">
        </span>
        <span class="crayon-c">
         // error...
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e74610680626-44">
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         }
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e74610680626-45">
        <span class="crayon-sy">
         }
        </span>
       </div>
      </div>
     </td>
    </tr>
   </table>
  </div>
 </div>
 <!-- [Format Time: 0.0013 seconds] -->
 <p>
 </p>
 <p>
  Pros:
 </p>
 <ul>
  <li>
   Produces highly optimized code.
  </li>
  <li>
   Works with most AOS layout arrays (
   <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e77995089403" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
    <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
     <span class="crayon-v">
      vtkBitArray
     </span>
    </span>
   </span>
   is an odd duck…).
  </li>
 </ul>
 <p>
  Cons:
 </p>
 <ul>
  <li>
   Either breaks or triggers a full in-memory copy when array is not AOS.
  </li>
  <li>
   Cumbersome and difficult to use.
  </li>
  <li>
   Hard to read.
  </li>
  <li>
   Error prone raw pointer handling.
  </li>
  <li>
   Quickly gets complicated when handling multiple arrays.
  </li>
  <li>
   Requires separate implementations to handle arrays not supported by
   <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e79451637069" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
    <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
     <span class="crayon-v">
      vtkTemplateMacro
     </span>
    </span>
   </span>
   .
  </li>
  <li>
   Produces significant code bloat as separate workers for all supported data types must be compiled. This is greatly exacerbated by working with multiple arrays, and the number of generated workers is [numDataTypes] ^ [numArrays].
  </li>
 </ul>
 <h3>
  Type-Explicit-Subclass APIs
 </h3>
 <p>
  This approach uses methods on type-explicit
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e7b157670926" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-v">
     vtkDataArray
    </span>
   </span>
  </span>
  subclasses. Here, we fallback to the
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e7c177277482" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-v">
     vtkGenericDataArray
    </span>
   </span>
  </span>
  interface to achieve an implementation that works for both AOS, SOA, and other layouts.
 </p>
 <p>
 </p>
 <!-- Crayon Syntax Highlighter v_2.7.2_beta -->
 <div class="crayon-syntax crayon-theme-coy crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c41e89337e7e659976465" style=" margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 25px !important;">
  <div class="crayon-plain-wrap">
   <textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 16px !important; line-height: 25px !important;" wrap="soft">
template &lt;typename D1, typename T1, typename D2, typename T2&gt;
void mag3(vtkGenericDataArrayTemplate&lt;D1, T1&gt; *vectors,
          vtkGenericDataArrayTemplate&lt;D2, T2&gt; *magnitudes)
{
  using VecType = T1;
  using MagType = T2;

  const vtkIdType numTuples = vectors-&gt;GetNumberOfTuples();

  for (vtkIdType t = 0; t &lt; numTuples; ++t)
  {
    MagType mag = 0;
    for (int c = 0; c &lt; 3; ++c) 
    {
      VecType comp = vectors-&gt;GetTypedComponent(t, c);
      mag += static_cast&lt;MagType&gt;(comp * comp);
    }
    mag = std::sqrt(mag);
    magnitudes-&gt;SetTypedComponent(t, 0, mag);
  }
}</textarea>
  </div>
  <div class="crayon-main">
   <table class="crayon-table">
    <tr class="crayon-row">
     <td class="crayon-nums " data-settings="show">
      <div class="crayon-nums-content" style="font-size: 16px !important; line-height: 25px !important;">
       <div class="crayon-num" data-line="crayon-5c41e89337e7e659976465-1">
        1
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e7e659976465-2">
        2
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e7e659976465-3">
        3
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e7e659976465-4">
        4
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e7e659976465-5">
        5
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e7e659976465-6">
        6
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e7e659976465-7">
        7
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e7e659976465-8">
        8
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e7e659976465-9">
        9
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e7e659976465-10">
        10
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e7e659976465-11">
        11
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e7e659976465-12">
        12
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e7e659976465-13">
        13
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e7e659976465-14">
        14
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e7e659976465-15">
        15
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e7e659976465-16">
        16
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e7e659976465-17">
        17
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e7e659976465-18">
        18
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e7e659976465-19">
        19
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e7e659976465-20">
        20
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e7e659976465-21">
        21
       </div>
      </div>
     </td>
     <td class="crayon-code">
      <div class="crayon-pre" style="font-size: 16px !important; line-height: 25px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <div class="crayon-line" id="crayon-5c41e89337e7e659976465-1">
        <span class="crayon-t">
         template
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-r">
         typename
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         D1
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         typename
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         T1
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         typename
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         D2
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         typename
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         T2
        </span>
        <span class="crayon-o">
         &gt;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e7e659976465-2">
        <span class="crayon-t">
         void
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         mag3
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         vtkGenericDataArrayTemplate
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-v">
         D1
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         T1
        </span>
        <span class="crayon-o">
         &gt;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         *
        </span>
        <span class="crayon-v">
         vectors
        </span>
        <span class="crayon-sy">
         ,
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e7e659976465-3">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtkGenericDataArrayTemplate
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-v">
         D2
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         T2
        </span>
        <span class="crayon-o">
         &gt;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         *
        </span>
        <span class="crayon-v">
         magnitudes
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e7e659976465-4">
        <span class="crayon-sy">
         {
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e7e659976465-5">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         using
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         VecType
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         T1
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e7e659976465-6">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         using
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         MagType
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         T2
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e7e659976465-7">
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e7e659976465-8">
        <span class="crayon-h">
        </span>
        <span class="crayon-m">
         const
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         vtkIdType
        </span>
        <span class="crayon-v">
         numTuples
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vectors
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-e">
         GetNumberOfTuples
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e7e659976465-9">
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e7e659976465-10">
        <span class="crayon-h">
        </span>
        <span class="crayon-st">
         for
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-i">
         vtkIdType
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         t
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         t
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         numTuples
        </span>
        <span class="crayon-sy">
         ;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         ++
        </span>
        <span class="crayon-v">
         t
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e7e659976465-11">
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         {
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e7e659976465-12">
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         MagType
        </span>
        <span class="crayon-v">
         mag
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e7e659976465-13">
        <span class="crayon-h">
        </span>
        <span class="crayon-st">
         for
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-t">
         int
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         c
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         c
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         3
        </span>
        <span class="crayon-sy">
         ;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         ++
        </span>
        <span class="crayon-v">
         c
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-h">
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e7e659976465-14">
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         {
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e7e659976465-15">
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         VecType
        </span>
        <span class="crayon-v">
         comp
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vectors
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-e">
         GetTypedComponent
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         t
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         c
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e7e659976465-16">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         mag
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         +=
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         static_cast
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-v">
         MagType
        </span>
        <span class="crayon-o">
         &gt;
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         comp
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         *
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         comp
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e7e659976465-17">
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         }
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e7e659976465-18">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         mag
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         std
        </span>
        <span class="crayon-o">
         ::
        </span>
        <span class="crayon-e">
         sqrt
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         mag
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e7e659976465-19">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         magnitudes
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-e">
         SetTypedComponent
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         t
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         mag
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e7e659976465-20">
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         }
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e7e659976465-21">
        <span class="crayon-sy">
         }
        </span>
       </div>
      </div>
     </td>
    </tr>
   </table>
  </div>
 </div>
 <!-- [Format Time: 0.0009 seconds] -->
 <p>
 </p>
 <p>
  Pros:
 </p>
 <ul>
  <li>
   Much faster. Memory accesses become inlined.
  </li>
  <li>
   No unnecessary typecasts.
  </li>
  <li>
   No virtual function calls.
  </li>
  <li>
   Works for most
   <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e80291939994" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
    <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
     <span class="crayon-v">
      vtkDataArray
     </span>
    </span>
   </span>
   subclasses (again ignoring
   <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e82475977181" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
    <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
     <span class="crayon-v">
      vtkBitArray
     </span>
    </span>
   </span>
   )
  </li>
  <li>
   Still readable.
  </li>
 </ul>
 <p>
  Cons:
 </p>
 <ul>
  <li>
   Won’t work with vtkDataArray pointers, separate implementation needed.
  </li>
  <li>
   Won’t autovectorize, AOS stride is unknown to the optimizer.
  </li>
  <li>
   Readable, but verbose.
  </li>
 </ul>
 <h3>
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e84718000431" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-v">
     vtkDataArrayAccessor
    </span>
   </span>
  </span>
 </h3>
 <p>
  The next advancement in
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e86911386485" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-v">
     vtkDataArray
    </span>
   </span>
  </span>
  usage came in the form of the
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e88968951967" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-v">
     vtkDataArrayAccessor
    </span>
   </span>
  </span>
  helper class. This utility switches between the slow-but-reliable
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e8a619473036" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-v">
     vtkDataArray
    </span>
   </span>
  </span>
  API and the faster type-explicit array APIs. Combined with the
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e8b170274054" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-v">
     VTK_ASSUME
    </span>
   </span>
  </span>
  macro to provide hints about array strides to the compiler, this could achieve performance equivalent to raw pointer access for type-explicit arrays, while using the same implementation for a fallback path when the array type is unknown.
 </p>
 <p>
  Combined with the
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e8d684931663" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-v">
     vtkArrayDispatch
    </span>
   </span>
  </span>
  utilities, the code bloat problem is reduced by introducing forms of restricted dispatch — meaning that a fast-path could be compiled for commonly expected array types while falling back to the slower generic implementation otherwise. More information on these tools is available in
  <a href="http://blog.kitware.com/new-data-array-layouts-in-vtk-7-1/">
   this blog post
  </a>
  .
 </p>
 <p>
 </p>
 <!-- Crayon Syntax Highlighter v_2.7.2_beta -->
 <div class="crayon-syntax crayon-theme-coy crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c41e89337e8f732564367" style=" margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 25px !important;">
  <div class="crayon-plain-wrap">
   <textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 16px !important; line-height: 25px !important;" wrap="soft">
struct Mag3Worker
{
  template &lt;typename VecArray, typename MagArray&gt;
  void operator()(VecArray *vecs, MagArray *mags)
  {
    // The Accessor types:
    using VecAccess = vtkDataArrayAccessor&lt;VecArray&gt;;
    using MagAccess = vtkDataArrayAccessor&lt;MagArray&gt;;

    // The "APITypes"
    // (explicit-type when possible, double for plain vtkDataArrays)
    using VecType = typename VecAccess::APIType;
    using MagType = typename MagAccess::APIType;

    // Tell the compiler the tuple sizes to enable optimizations:
    VTK_ASSUME(vecs-&gt;GetNumberOfComponents() == 3);
    VTK_ASSUME(mags-&gt;GetNumberOfComponents() == 1);

    const vtkIdType numTuples = vecs-&gt;GetNumberOfTuples();

    VecAccess vecAccess{vecs};
    MagAccess magAccess{mags};

    for (vtkIdType t = 0; t &lt; numTuples; ++t)
    {
      MagType mag = 0;
      for (int c = 0; c &lt; 3; ++c)
      {
        VecType comp = vecAccess.Get(t, c);
        mag += static_cast&lt;MagType&gt;(comp * comp);
      }
      mag = std::sqrt(mag);
      magAccess.Set(t, 0, mag);
    }
  }
};

void mag3(vtkDataArray *vecs, vtkDataArray *mags)
{
  Mag3Worker worker;

  // Create a dispatcher. We want to generate fast-paths for when
  // vecs and mags both use doubles or floats, but fallback to a
  // slow path for any other situation.
  using Dispatcher = 
    vtkArrayDispatch::Dispatch2ByValueType&lt;vtkArrayDispatch::Reals,
                                           vtkArrayDispatch::Reals&gt;;

  // Generate optimized workers when mags/vecs are both float|double
  if (!Dispatcher::Execute(vecs, mags, worker))
  {
    // Otherwise fallback to using the vtkDataArray API.
    worker(vecs, mags);
  }
}</textarea>
  </div>
  <div class="crayon-main">
   <table class="crayon-table">
    <tr class="crayon-row">
     <td class="crayon-nums " data-settings="show">
      <div class="crayon-nums-content" style="font-size: 16px !important; line-height: 25px !important;">
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-1">
        1
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-2">
        2
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-3">
        3
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-4">
        4
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-5">
        5
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-6">
        6
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-7">
        7
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-8">
        8
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-9">
        9
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-10">
        10
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-11">
        11
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-12">
        12
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-13">
        13
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-14">
        14
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-15">
        15
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-16">
        16
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-17">
        17
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-18">
        18
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-19">
        19
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-20">
        20
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-21">
        21
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-22">
        22
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-23">
        23
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-24">
        24
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-25">
        25
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-26">
        26
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-27">
        27
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-28">
        28
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-29">
        29
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-30">
        30
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-31">
        31
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-32">
        32
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-33">
        33
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-34">
        34
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-35">
        35
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-36">
        36
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-37">
        37
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-38">
        38
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-39">
        39
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-40">
        40
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-41">
        41
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-42">
        42
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-43">
        43
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-44">
        44
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-45">
        45
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-46">
        46
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-47">
        47
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-48">
        48
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-49">
        49
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-50">
        50
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-51">
        51
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-52">
        52
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-53">
        53
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-54">
        54
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337e8f732564367-55">
        55
       </div>
      </div>
     </td>
     <td class="crayon-code">
      <div class="crayon-pre" style="font-size: 16px !important; line-height: 25px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-1">
        <span class="crayon-t">
         struct
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         Mag3Worker
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-2">
        <span class="crayon-sy">
         {
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-3">
        <span class="crayon-h">
        </span>
        <span class="crayon-t">
         template
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-r">
         typename
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         VecArray
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         typename
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         MagArray
        </span>
        <span class="crayon-o">
         &gt;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-4">
        <span class="crayon-h">
        </span>
        <span class="crayon-t">
         void
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-t">
         operator
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         VecArray
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         *
        </span>
        <span class="crayon-v">
         vecs
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         MagArray
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         *
        </span>
        <span class="crayon-v">
         mags
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-5">
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         {
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-6">
        <span class="crayon-h">
        </span>
        <span class="crayon-c">
         // The Accessor types:
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-7">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         using
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         VecAccess
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtkDataArrayAccessor
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-v">
         VecArray
        </span>
        <span class="crayon-o">
         &gt;
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-8">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         using
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         MagAccess
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtkDataArrayAccessor
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-v">
         MagArray
        </span>
        <span class="crayon-o">
         &gt;
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-9">
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-10">
        <span class="crayon-h">
        </span>
        <span class="crayon-c">
         // The "APITypes"
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-11">
        <span class="crayon-h">
        </span>
        <span class="crayon-c">
         // (explicit-type when possible, double for plain vtkDataArrays)
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-12">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         using
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         VecType
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         typename
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         VecAccess
        </span>
        <span class="crayon-o">
         ::
        </span>
        <span class="crayon-v">
         APIType
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-13">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         using
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         MagType
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         typename
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         MagAccess
        </span>
        <span class="crayon-o">
         ::
        </span>
        <span class="crayon-v">
         APIType
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-14">
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-15">
        <span class="crayon-h">
        </span>
        <span class="crayon-c">
         // Tell the compiler the tuple sizes to enable optimizations:
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-16">
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         VTK_ASSUME
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         vecs
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-e">
         GetNumberOfComponents
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         ==
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         3
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-17">
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         VTK_ASSUME
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         mags
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-e">
         GetNumberOfComponents
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         ==
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         1
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-18">
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-19">
        <span class="crayon-h">
        </span>
        <span class="crayon-m">
         const
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         vtkIdType
        </span>
        <span class="crayon-v">
         numTuples
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vecs
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-e">
         GetNumberOfTuples
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-20">
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-21">
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         VecAccess
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         vecAccess
        </span>
        <span class="crayon-sy">
         {
        </span>
        <span class="crayon-v">
         vecs
        </span>
        <span class="crayon-sy">
         }
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-22">
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         MagAccess
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         magAccess
        </span>
        <span class="crayon-sy">
         {
        </span>
        <span class="crayon-v">
         mags
        </span>
        <span class="crayon-sy">
         }
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-23">
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-24">
        <span class="crayon-h">
        </span>
        <span class="crayon-st">
         for
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-i">
         vtkIdType
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         t
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         t
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         numTuples
        </span>
        <span class="crayon-sy">
         ;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         ++
        </span>
        <span class="crayon-v">
         t
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-25">
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         {
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-26">
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         MagType
        </span>
        <span class="crayon-v">
         mag
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-27">
        <span class="crayon-h">
        </span>
        <span class="crayon-st">
         for
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-t">
         int
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         c
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         c
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         3
        </span>
        <span class="crayon-sy">
         ;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         ++
        </span>
        <span class="crayon-v">
         c
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-28">
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         {
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-29">
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         VecType
        </span>
        <span class="crayon-v">
         comp
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vecAccess
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Get
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         t
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         c
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-30">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         mag
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         +=
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         static_cast
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-v">
         MagType
        </span>
        <span class="crayon-o">
         &gt;
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         comp
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         *
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         comp
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-31">
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         }
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-32">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         mag
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         std
        </span>
        <span class="crayon-o">
         ::
        </span>
        <span class="crayon-e">
         sqrt
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         mag
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-33">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         magAccess
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Set
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         t
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         mag
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-34">
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         }
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-35">
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         }
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-36">
        <span class="crayon-sy">
         }
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-37">
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-38">
        <span class="crayon-t">
         void
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         mag3
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         vtkDataArray
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         *
        </span>
        <span class="crayon-v">
         vecs
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtkDataArray
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         *
        </span>
        <span class="crayon-v">
         mags
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-39">
        <span class="crayon-sy">
         {
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-40">
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         Mag3Worker
        </span>
        <span class="crayon-v">
         worker
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-41">
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-42">
        <span class="crayon-h">
        </span>
        <span class="crayon-c">
         // Create a dispatcher. We want to generate fast-paths for when
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-43">
        <span class="crayon-h">
        </span>
        <span class="crayon-c">
         // vecs and mags both use doubles or floats, but fallback to a
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-44">
        <span class="crayon-h">
        </span>
        <span class="crayon-c">
         // slow path for any other situation.
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-45">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         using
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         Dispatcher
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-46">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtkArrayDispatch
        </span>
        <span class="crayon-o">
         ::
        </span>
        <span class="crayon-v">
         Dispatch2ByValueType
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-v">
         vtkArrayDispatch
        </span>
        <span class="crayon-o">
         ::
        </span>
        <span class="crayon-v">
         Reals
        </span>
        <span class="crayon-sy">
         ,
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-47">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtkArrayDispatch
        </span>
        <span class="crayon-o">
         ::
        </span>
        <span class="crayon-v">
         Reals
        </span>
        <span class="crayon-o">
         &gt;
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-48">
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-49">
        <span class="crayon-h">
        </span>
        <span class="crayon-c">
         // Generate optimized workers when mags/vecs are both float|double
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-50">
        <span class="crayon-h">
        </span>
        <span class="crayon-st">
         if
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-o">
         !
        </span>
        <span class="crayon-v">
         Dispatcher
        </span>
        <span class="crayon-o">
         ::
        </span>
        <span class="crayon-e">
         Execute
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         vecs
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         mags
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         worker
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-51">
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         {
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-52">
        <span class="crayon-h">
        </span>
        <span class="crayon-c">
         // Otherwise fallback to using the vtkDataArray API.
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-53">
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         worker
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         vecs
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         mags
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-54">
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         }
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337e8f732564367-55">
        <span class="crayon-sy">
         }
        </span>
       </div>
      </div>
     </td>
    </tr>
   </table>
  </div>
 </div>
 <!-- [Format Time: 0.0016 seconds] -->
 <p>
 </p>
 <p>
  Pros:
 </p>
 <ul>
  <li>
   Handles all types of
   <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e92261906983" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
    <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
     <span class="crayon-v">
      vtkDataArray
     </span>
    </span>
   </span>
   , including
   <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e94926127205" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
    <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
     <span class="crayon-v">
      vtkBitArray
     </span>
    </span>
   </span>
   , with a single implementation.
  </li>
  <li>
   Reduces code bloat by only generating unique fast paths for a restricted combination of arrays, falling back to a generic implementation otherwise.
  </li>
  <li>
   As efficient as raw-pointer access in the fast paths.
  </li>
 </ul>
 <p>
  Cons:
 </p>
 <ul>
  <li>
   Very, very verbose. This code is readable, but there is a lot of it and it uses several advanced/unintuitive concepts.
  </li>
  <li>
   Lots of things to remember to get good performance…accessors, assumes, dispatch, etc.
  </li>
 </ul>
 <p>
  Overall, this approach is great from a performance / code-size viewpoint, but not so much from a writeability / maintainability one.
 </p>
 <h3>
  C++11 for-range loops with
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e96378371945" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-v">
     vtk
    </span>
    <span class="crayon-o">
     ::
    </span>
    <span class="crayon-v">
     DataArrayTupleRange
    </span>
   </span>
  </span>
 </h3>
 <p>
  The worker code above can be cleaned up using the new
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e97509146443" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-v">
     vtk
    </span>
    <span class="crayon-o">
     ::
    </span>
    <span class="crayon-v">
     DataArrayTupleRange
    </span>
   </span>
  </span>
  and
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e99155454032" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-v">
     vtk
    </span>
    <span class="crayon-o">
     ::
    </span>
    <span class="crayon-v">
     DataArrayValueRange
    </span>
   </span>
  </span>
  helpers. These produce a proxy object that represents a range of tuples or flat AOS-indexed values, respectively. They make the worker code simpler by:
 </p>
 <ol>
  <li>
   Optimizing for tuple sizes known at compile time via a simple template parameter (no need for mystical
   <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e9b917113908" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
    <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
     <span class="crayon-v">
      VTK_ASSUME
     </span>
    </span>
   </span>
   incantations).
  </li>
  <li>
   Transparently switching between optimized direct access or generic
   <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e9d018521983" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
    <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
     <span class="crayon-v">
      vtkDataArray
     </span>
    </span>
   </span>
   access without the need to deal directly with
   <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337e9f457223053" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
    <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
     <span class="crayon-v">
      vtkDataArrayAccessor
     </span>
    </span>
   </span>
   s.
  </li>
  <li>
   Implicitly iterating over the array range. By default the entire array is traversed, but the start/end points can be customized and are encapsulated in the range object.
  </li>
  <li>
   Enabling the use of STL algorithms to assist in computation.
  </li>
 </ol>
 <p>
  The dispatch code is still needed and would be identical to before, but the worker is simplified to:
 </p>
 <p>
 </p>
 <!-- Crayon Syntax Highlighter v_2.7.2_beta -->
 <div class="crayon-syntax crayon-theme-coy crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c41e89337ea1795582715" style=" margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 25px !important;">
  <div class="crayon-plain-wrap">
   <textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 16px !important; line-height: 25px !important;" wrap="soft">
struct Mag3Worker
{
  template &lt;typename VecArray, typename MagArray&gt;
  void operator()(VecArray *vecs, MagArray *mags)
  {
    // Create range objects:
    const auto vecRange = vtk::DataArrayTupleRange&lt;3&gt;(vecs);
    auto magRange = vtk::DataArrayValueRange&lt;1&gt;(mags);
    
    using VecType = typename decltype(vecRange)::ComponentType;
    using MagType = typename decltype(magRange)::ComponentType;

    auto magIter = magRange.begin();
    for (const auto&amp; vecTuple : vecRange)
    {
      MagType mag = 0;
      for (const VecType comp : vecTuple)
      {
        mag += static_cast&lt;MagType&gt;(comp * comp);
      }
      *magIter++ = std::sqrt(mag);
    }
  }
};</textarea>
  </div>
  <div class="crayon-main">
   <table class="crayon-table">
    <tr class="crayon-row">
     <td class="crayon-nums " data-settings="show">
      <div class="crayon-nums-content" style="font-size: 16px !important; line-height: 25px !important;">
       <div class="crayon-num" data-line="crayon-5c41e89337ea1795582715-1">
        1
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ea1795582715-2">
        2
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ea1795582715-3">
        3
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ea1795582715-4">
        4
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ea1795582715-5">
        5
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ea1795582715-6">
        6
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ea1795582715-7">
        7
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ea1795582715-8">
        8
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ea1795582715-9">
        9
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ea1795582715-10">
        10
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ea1795582715-11">
        11
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ea1795582715-12">
        12
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ea1795582715-13">
        13
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ea1795582715-14">
        14
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ea1795582715-15">
        15
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ea1795582715-16">
        16
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ea1795582715-17">
        17
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ea1795582715-18">
        18
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ea1795582715-19">
        19
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ea1795582715-20">
        20
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ea1795582715-21">
        21
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ea1795582715-22">
        22
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ea1795582715-23">
        23
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ea1795582715-24">
        24
       </div>
      </div>
     </td>
     <td class="crayon-code">
      <div class="crayon-pre" style="font-size: 16px !important; line-height: 25px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <div class="crayon-line" id="crayon-5c41e89337ea1795582715-1">
        <span class="crayon-t">
         struct
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         Mag3Worker
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ea1795582715-2">
        <span class="crayon-sy">
         {
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ea1795582715-3">
        <span class="crayon-h">
        </span>
        <span class="crayon-t">
         template
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-r">
         typename
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         VecArray
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         typename
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         MagArray
        </span>
        <span class="crayon-o">
         &gt;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ea1795582715-4">
        <span class="crayon-h">
        </span>
        <span class="crayon-t">
         void
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-t">
         operator
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         VecArray
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         *
        </span>
        <span class="crayon-v">
         vecs
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         MagArray
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         *
        </span>
        <span class="crayon-v">
         mags
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ea1795582715-5">
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         {
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ea1795582715-6">
        <span class="crayon-h">
        </span>
        <span class="crayon-c">
         // Create range objects:
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ea1795582715-7">
        <span class="crayon-h">
        </span>
        <span class="crayon-m">
         const
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         auto
        </span>
        <span class="crayon-v">
         vecRange
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-o">
         ::
        </span>
        <span class="crayon-v">
         DataArrayTupleRange
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-cn">
         3
        </span>
        <span class="crayon-o">
         &gt;
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         vecs
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ea1795582715-8">
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         auto
        </span>
        <span class="crayon-v">
         magRange
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-o">
         ::
        </span>
        <span class="crayon-v">
         DataArrayValueRange
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-cn">
         1
        </span>
        <span class="crayon-o">
         &gt;
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         mags
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ea1795582715-9">
        <span class="crayon-h">
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ea1795582715-10">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         using
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         VecType
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         typename
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-t">
         decltype
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         vecRange
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-o">
         ::
        </span>
        <span class="crayon-v">
         ComponentType
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ea1795582715-11">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         using
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         MagType
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         typename
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-t">
         decltype
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         magRange
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-o">
         ::
        </span>
        <span class="crayon-v">
         ComponentType
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ea1795582715-12">
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ea1795582715-13">
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         auto
        </span>
        <span class="crayon-v">
         magIter
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         magRange
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         begin
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ea1795582715-14">
        <span class="crayon-h">
        </span>
        <span class="crayon-st">
         for
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-m">
         const
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         auto
        </span>
        <span class="crayon-o">
         &amp;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vecTuple
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         :
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vecRange
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ea1795582715-15">
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         {
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ea1795582715-16">
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         MagType
        </span>
        <span class="crayon-v">
         mag
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ea1795582715-17">
        <span class="crayon-h">
        </span>
        <span class="crayon-st">
         for
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-m">
         const
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         VecType
        </span>
        <span class="crayon-v">
         comp
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         :
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vecTuple
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ea1795582715-18">
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         {
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ea1795582715-19">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         mag
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         +=
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         static_cast
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-v">
         MagType
        </span>
        <span class="crayon-o">
         &gt;
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         comp
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         *
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         comp
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ea1795582715-20">
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         }
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ea1795582715-21">
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         *
        </span>
        <span class="crayon-v">
         magIter
        </span>
        <span class="crayon-o">
         ++
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         std
        </span>
        <span class="crayon-o">
         ::
        </span>
        <span class="crayon-e">
         sqrt
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         mag
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ea1795582715-22">
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         }
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ea1795582715-23">
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         }
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ea1795582715-24">
        <span class="crayon-sy">
         }
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
      </div>
     </td>
    </tr>
   </table>
  </div>
 </div>
 <!-- [Format Time: 0.0009 seconds] -->
 <p>
 </p>
 <p>
  Some observations:
 </p>
 <ul>
  <li>
   This code works whether the input arrays are type-explicit or not, and will produce highly optimizable instructions when possible.
  </li>
  <li>
   The component sizes are optionally passed as a template parameter during the creation of the ranges. This is not necessary if the component size is unknown, but using this feature when possible will produce better optimized code.
   <ul>
    <li>
     <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337ea3538514902" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
      <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <span class="crayon-v">
        vtk
       </span>
       <span class="crayon-o">
        ::
       </span>
       <span class="crayon-v">
        DataArrayTupleRange
       </span>
       <span class="crayon-o">
        &lt;
       </span>
       <span class="crayon-cn">
        3
       </span>
       <span class="crayon-o">
        &gt;
       </span>
       <span class="crayon-sy">
        (
       </span>
       <span class="crayon-t">
        array
       </span>
       <span class="crayon-sy">
        )
       </span>
      </span>
     </span>
     is faster than
     <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337ea5370645528" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
      <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <span class="crayon-v">
        vtk
       </span>
       <span class="crayon-o">
        ::
       </span>
       <span class="crayon-e">
        DataArrayTupleRange
       </span>
       <span class="crayon-sy">
        (
       </span>
       <span class="crayon-t">
        array
       </span>
       <span class="crayon-sy">
        )
       </span>
      </span>
     </span>
     , but both have identical usage.
    </li>
   </ul>
  </li>
  <li>
   A tuple range (
   <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337ea7554062149" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
    <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
     <span class="crayon-v">
      vtk
     </span>
     <span class="crayon-o">
      ::
     </span>
     <span class="crayon-v">
      DataArrayTupleRange
     </span>
    </span>
   </span>
   ) is used for the vectors, since we want to process these tuple-by-tuple. A value range (
   <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337ead485467516" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
    <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
     <span class="crayon-v">
      vtk
     </span>
     <span class="crayon-o">
      ::
     </span>
     <span class="crayon-v">
      DataArrayValueRange
     </span>
    </span>
   </span>
   ) is used for the magnitudes to simplify the code.
   <ul>
    <li>
     For a single-component array, the tuple abstraction is burdensome and the value iterators are more intuitive.
    </li>
    <li>
     Even when using a ValueRange, it is worthwhile to specify a compile-time component size when possible, since it doesn’t have to equal 1.
    </li>
   </ul>
  </li>
  <li>
   The range construction methods can also create restricted ranges by passing start / end points as function arguments:
   <ul>
    <li>
     <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337eaf215318742" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
      <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <span class="crayon-v">
        vtk
       </span>
       <span class="crayon-o">
        ::
       </span>
       <span class="crayon-e">
        DataArrayTupleRange
       </span>
       <span class="crayon-sy">
        (
       </span>
       <span class="crayon-t">
        array
       </span>
       <span class="crayon-sy">
        ,
       </span>
       <span class="crayon-h">
       </span>
       <span class="crayon-v">
        startTuple
       </span>
       <span class="crayon-sy">
        ,
       </span>
       <span class="crayon-h">
       </span>
       <span class="crayon-v">
        endTuple
       </span>
       <span class="crayon-sy">
        )
       </span>
      </span>
     </span>
     and
     <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337eb1555129532" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
      <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <span class="crayon-v">
        vtk
       </span>
       <span class="crayon-o">
        ::
       </span>
       <span class="crayon-e">
        DataArrayValueRange
       </span>
       <span class="crayon-sy">
        (
       </span>
       <span class="crayon-t">
        array
       </span>
       <span class="crayon-sy">
        ,
       </span>
       <span class="crayon-h">
       </span>
       <span class="crayon-v">
        startValue
       </span>
       <span class="crayon-sy">
        ,
       </span>
       <span class="crayon-h">
       </span>
       <span class="crayon-v">
        endValue
       </span>
       <span class="crayon-sy">
        )
       </span>
      </span>
     </span>
     will iterate over the indicated portions of the full array’s data.
    </li>
   </ul>
  </li>
  <li>
   The range objects define several typedefs that are useful in generic programming contexts:
   <ul>
    <li>
     <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337eb3292046488" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
      <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <span class="crayon-v">
        Range
       </span>
       <span class="crayon-o">
        ::
       </span>
       <span class="crayon-v">
        ArrayType
       </span>
      </span>
     </span>
     – The array type with which the range has been instantiated.
    </li>
    <li>
     <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337eb5865098170" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
      <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <span class="crayon-v">
        Range
       </span>
       <span class="crayon-o">
        ::
       </span>
       <span class="crayon-v">
        ComponentType
       </span>
      </span>
     </span>
     – The API type of the array (
     <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337eb7327392129" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
      <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <span class="crayon-t">
        double
       </span>
      </span>
     </span>
     for
     <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337eb8359311041" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
      <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <span class="crayon-v">
        vtkDataArray
       </span>
      </span>
     </span>
     or the actual data type otherwise).
    </li>
   </ul>
  </li>
  <li>
   The various iterators and iterables define the STL-standard types as necessary:
   <ul>
    <li>
     <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337eba833477654" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
      <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <span class="crayon-v">
        value_type
       </span>
      </span>
     </span>
     ,
     <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337ebc837513468" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
      <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <span class="crayon-v">
        size_type
       </span>
      </span>
     </span>
     ,
     <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337ebe678049086" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
      <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <span class="crayon-v">
        difference_type
       </span>
      </span>
     </span>
     ,
     <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337ebf401352234" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
      <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <span class="crayon-v">
        iterator
       </span>
      </span>
     </span>
     ,
     <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337ec1400061633" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
      <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <span class="crayon-v">
        const_iterator
       </span>
      </span>
     </span>
     ,
     <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337ec3872683431" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
      <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <span class="crayon-v">
        reference
       </span>
      </span>
     </span>
     ,
     <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337ec4836461022" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
      <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <span class="crayon-v">
        const_reference
       </span>
      </span>
     </span>
     ,
     <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337ec6387010937" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
      <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <span class="crayon-v">
        pointer
       </span>
      </span>
     </span>
     ,
     <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337ec8201324352" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
      <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <span class="crayon-v">
        iterator_category
       </span>
      </span>
     </span>
     , etc.
    </li>
   </ul>
  </li>
  <li>
   The Range objects extend the lifetime of the array they contain. They hold a reference to the array, so as long as a Range object exists, the data it describes is guaranteed to be valid.
  </li>
 </ul>
 <h3>
  STL Compatibility
 </h3>
 <p>
  These iterators are fully usable by the STL algorithms. For instance, the magnitude computation could be implemented using the
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337eca741414174" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-v">
     std
    </span>
    <span class="crayon-o">
     ::
    </span>
    <span class="crayon-v">
     transform
    </span>
   </span>
  </span>
  algorithm like so:
 </p>
 <p>
 </p>
 <!-- Crayon Syntax Highlighter v_2.7.2_beta -->
 <div class="crayon-syntax crayon-theme-coy crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c41e89337ecc226278763" style=" margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 25px !important;">
  <div class="crayon-plain-wrap">
   <textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 16px !important; line-height: 25px !important;" wrap="soft">
struct Mag3Worker
{
  template &lt;typename VecArray, typename MagArray&gt;
  void operator()(VecArray *vecs, MagArray *mags)
  {
    // Create range objects:
    const auto vecRange = vtk::DataArrayTupleRange&lt;3&gt;(vecs);
    auto magRange = vtk::DataArrayValueRange&lt;1&gt;(mags);
    
    using VecTuple = typename decltype(vecRange)::const_reference; 
    using MagType = typename decltype(magRange)::ComponentType;

    // Per-tuple magnitude functor for std::transform:
    auto computeMag = [](const VecTuple&amp; tuple) -&gt; MagType
    {
      MagType mag = 0;
      for (const auto&amp; comp : tuple)
      {
        mag += static_cast&lt;MagType&gt;(comp * comp);
      }
      return std::sqrt(mag);
    };

    std::transform(vecRange.cbegin(),
                   vecRange.cend(), 
                   magRange.begin(),
                   computeMag);
  }
};</textarea>
  </div>
  <div class="crayon-main">
   <table class="crayon-table">
    <tr class="crayon-row">
     <td class="crayon-nums " data-settings="show">
      <div class="crayon-nums-content" style="font-size: 16px !important; line-height: 25px !important;">
       <div class="crayon-num" data-line="crayon-5c41e89337ecc226278763-1">
        1
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ecc226278763-2">
        2
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ecc226278763-3">
        3
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ecc226278763-4">
        4
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ecc226278763-5">
        5
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ecc226278763-6">
        6
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ecc226278763-7">
        7
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ecc226278763-8">
        8
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ecc226278763-9">
        9
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ecc226278763-10">
        10
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ecc226278763-11">
        11
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ecc226278763-12">
        12
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ecc226278763-13">
        13
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ecc226278763-14">
        14
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ecc226278763-15">
        15
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ecc226278763-16">
        16
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ecc226278763-17">
        17
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ecc226278763-18">
        18
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ecc226278763-19">
        19
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ecc226278763-20">
        20
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ecc226278763-21">
        21
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ecc226278763-22">
        22
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ecc226278763-23">
        23
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ecc226278763-24">
        24
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ecc226278763-25">
        25
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ecc226278763-26">
        26
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ecc226278763-27">
        27
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ecc226278763-28">
        28
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ecc226278763-29">
        29
       </div>
      </div>
     </td>
     <td class="crayon-code">
      <div class="crayon-pre" style="font-size: 16px !important; line-height: 25px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <div class="crayon-line" id="crayon-5c41e89337ecc226278763-1">
        <span class="crayon-t">
         struct
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         Mag3Worker
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ecc226278763-2">
        <span class="crayon-sy">
         {
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ecc226278763-3">
        <span class="crayon-h">
        </span>
        <span class="crayon-t">
         template
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-r">
         typename
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         VecArray
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         typename
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         MagArray
        </span>
        <span class="crayon-o">
         &gt;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ecc226278763-4">
        <span class="crayon-h">
        </span>
        <span class="crayon-t">
         void
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-t">
         operator
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         VecArray
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         *
        </span>
        <span class="crayon-v">
         vecs
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         MagArray
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         *
        </span>
        <span class="crayon-v">
         mags
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ecc226278763-5">
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         {
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ecc226278763-6">
        <span class="crayon-h">
        </span>
        <span class="crayon-c">
         // Create range objects:
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ecc226278763-7">
        <span class="crayon-h">
        </span>
        <span class="crayon-m">
         const
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         auto
        </span>
        <span class="crayon-v">
         vecRange
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-o">
         ::
        </span>
        <span class="crayon-v">
         DataArrayTupleRange
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-cn">
         3
        </span>
        <span class="crayon-o">
         &gt;
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         vecs
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ecc226278763-8">
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         auto
        </span>
        <span class="crayon-v">
         magRange
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-o">
         ::
        </span>
        <span class="crayon-v">
         DataArrayValueRange
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-cn">
         1
        </span>
        <span class="crayon-o">
         &gt;
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         mags
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ecc226278763-9">
        <span class="crayon-h">
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ecc226278763-10">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         using
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         VecTuple
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         typename
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-t">
         decltype
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         vecRange
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-o">
         ::
        </span>
        <span class="crayon-v">
         const_reference
        </span>
        <span class="crayon-sy">
         ;
        </span>
        <span class="crayon-h">
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ecc226278763-11">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         using
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         MagType
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         typename
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-t">
         decltype
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         magRange
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-o">
         ::
        </span>
        <span class="crayon-v">
         ComponentType
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ecc226278763-12">
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ecc226278763-13">
        <span class="crayon-h">
        </span>
        <span class="crayon-c">
         // Per-tuple magnitude functor for std::transform:
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ecc226278763-14">
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         auto
        </span>
        <span class="crayon-v">
         computeMag
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-m">
         const
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         VecTuple
        </span>
        <span class="crayon-o">
         &amp;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         tuple
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         MagType
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ecc226278763-15">
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         {
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ecc226278763-16">
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         MagType
        </span>
        <span class="crayon-v">
         mag
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ecc226278763-17">
        <span class="crayon-h">
        </span>
        <span class="crayon-st">
         for
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-m">
         const
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         auto
        </span>
        <span class="crayon-o">
         &amp;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         comp
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         :
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         tuple
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ecc226278763-18">
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         {
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ecc226278763-19">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         mag
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         +=
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         static_cast
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-v">
         MagType
        </span>
        <span class="crayon-o">
         &gt;
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         comp
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         *
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         comp
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ecc226278763-20">
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         }
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ecc226278763-21">
        <span class="crayon-h">
        </span>
        <span class="crayon-st">
         return
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         std
        </span>
        <span class="crayon-o">
         ::
        </span>
        <span class="crayon-e">
         sqrt
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         mag
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ecc226278763-22">
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         }
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ecc226278763-23">
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ecc226278763-24">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         std
        </span>
        <span class="crayon-o">
         ::
        </span>
        <span class="crayon-e">
         transform
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         vecRange
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         cbegin
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ,
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ecc226278763-25">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vecRange
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         cend
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ecc226278763-26">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         magRange
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         begin
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ,
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ecc226278763-27">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         computeMag
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ecc226278763-28">
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         }
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ecc226278763-29">
        <span class="crayon-sy">
         }
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
      </div>
     </td>
    </tr>
   </table>
  </div>
 </div>
 <!-- [Format Time: 0.0010 seconds] -->
 <p>
 </p>
 <h2>
  Debugging
 </h2>
 <p>
  A useful feature of the ranges and iterators is optional safety checking. By enabling
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337ece065057272" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-v">
     VTK_DEBUG_RANGE_ITERATORS
    </span>
   </span>
  </span>
  in VTK’s CMake options and compiling in Debug mode, additional compile and runtime checks are enabled that ensure the iterators are used properly. The resulting code will run much slower than normal, but common usage errors such as mixing iterators from different arrays, dereferencing invalid iterators, or iterating out-of-bounds will be caught.
 </p>
 <h2>
  Benchmarks
 </h2>
 <p>
  The methods of array access described above have been benchmarked using
  <a href="https://gitlab.kitware.com/allisonvacanti/vtkBenchmark/blob/master/RangeIters.cxx">
   this script
  </a>
  . When iterating over an AOS-backed
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337ed0990754161" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-v">
     vtkDataArray
    </span>
   </span>
  </span>
  handle, various methods of array access are shown below:
 </p>
 <div class="wp-caption aligncenter" id="attachment_23899" style="width: 846px">
  <img alt="" class="wp-image-23899 size-full" height="560" sizes="(max-width: 836px) 100vw, 836px" src="http://blog.kitware.com/wp-content/uploads/2018/11/DA-Read.png" srcset="https://blog.kitware.com/wp-content/uploads/2018/11/DA-Read.png 836w, https://blog.kitware.com/wp-content/uploads/2018/11/DA-Read-235x156.png 235w, https://blog.kitware.com/wp-content/uploads/2018/11/DA-Read-300x201.png 300w, https://blog.kitware.com/wp-content/uploads/2018/11/DA-Read-768x514.png 768w, https://blog.kitware.com/wp-content/uploads/2018/11/DA-Read-220x147.png 220w, https://blog.kitware.com/wp-content/uploads/2018/11/DA-Read-250x167.png 250w, https://blog.kitware.com/wp-content/uploads/2018/11/DA-Read-355x238.png 355w, https://blog.kitware.com/wp-content/uploads/2018/11/DA-Read-730x489.png 730w, https://blog.kitware.com/wp-content/uploads/2018/11/DA-Read-90x60.png 90w" width="836"/>
  <p class="wp-caption-text">
   Reading a 1GiB 3-component vtkAOSDataArrayTemplate&lt;float&gt; through a vtkDataArray pointer.
  </p>
 </div>
 <p>
 </p>
 <div class="wp-caption aligncenter" id="attachment_23900" style="width: 846px">
  <img alt="" class="size-full wp-image-23900" height="560" sizes="(max-width: 836px) 100vw, 836px" src="http://blog.kitware.com/wp-content/uploads/2018/11/DA-Write.png" srcset="https://blog.kitware.com/wp-content/uploads/2018/11/DA-Write.png 836w, https://blog.kitware.com/wp-content/uploads/2018/11/DA-Write-235x156.png 235w, https://blog.kitware.com/wp-content/uploads/2018/11/DA-Write-300x201.png 300w, https://blog.kitware.com/wp-content/uploads/2018/11/DA-Write-768x514.png 768w, https://blog.kitware.com/wp-content/uploads/2018/11/DA-Write-220x147.png 220w, https://blog.kitware.com/wp-content/uploads/2018/11/DA-Write-250x167.png 250w, https://blog.kitware.com/wp-content/uploads/2018/11/DA-Write-355x238.png 355w, https://blog.kitware.com/wp-content/uploads/2018/11/DA-Write-730x489.png 730w, https://blog.kitware.com/wp-content/uploads/2018/11/DA-Write-90x60.png 90w" width="836"/>
  <p class="wp-caption-text">
   Writing a 1GiB 3-component vtkAOSDataArrayTemplate&lt;float&gt; through a vtkDataArray pointer.
  </p>
 </div>
 <p>
  The implementations for these benchmarks are shown in the above link, but they correspond with the techniques covered in this post. The FixedSize variants inform the optimizer at compile time what the tuple size is. We see that the TupleRange and ValueRange tests perform as well as the Accessor tests, which is the target for accessing one component of the array at a time. The IterGetTuple tests use the following technique to extract each tuple iterator’s data into a contiguous local array:
 </p>
 <p>
 </p>
 <!-- Crayon Syntax Highlighter v_2.7.2_beta -->
 <div class="crayon-syntax crayon-theme-coy crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c41e89337ed3589407344" style=" margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 25px !important;">
  <div class="crayon-plain-wrap">
   <textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 16px !important; line-height: 25px !important;" wrap="soft">
static constexpr vtk::ComponentIdType NumComps = ...;
const auto range = vtk::DataArrayTupleRange&lt;NumComps&gt;(array);
using ValueType = typename decltype(range)::ComponentType;

std::array&lt;ValueType, NumComps&gt; data;
for (auto&amp; tuple: range)
{
  tuple.GetTuple(data.data());
  // Do work with data
  tuple.SetTuple(data.data());
}</textarea>
  </div>
  <div class="crayon-main">
   <table class="crayon-table">
    <tr class="crayon-row">
     <td class="crayon-nums " data-settings="show">
      <div class="crayon-nums-content" style="font-size: 16px !important; line-height: 25px !important;">
       <div class="crayon-num" data-line="crayon-5c41e89337ed3589407344-1">
        1
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ed3589407344-2">
        2
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ed3589407344-3">
        3
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ed3589407344-4">
        4
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ed3589407344-5">
        5
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ed3589407344-6">
        6
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ed3589407344-7">
        7
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ed3589407344-8">
        8
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ed3589407344-9">
        9
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ed3589407344-10">
        10
       </div>
       <div class="crayon-num" data-line="crayon-5c41e89337ed3589407344-11">
        11
       </div>
      </div>
     </td>
     <td class="crayon-code">
      <div class="crayon-pre" style="font-size: 16px !important; line-height: 25px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <div class="crayon-line" id="crayon-5c41e89337ed3589407344-1">
        <span class="crayon-m">
         static
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-t">
         constexpr
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-o">
         ::
        </span>
        <span class="crayon-e">
         ComponentIdType
        </span>
        <span class="crayon-v">
         NumComps
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ed3589407344-2">
        <span class="crayon-m">
         const
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         auto
        </span>
        <span class="crayon-v">
         range
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-o">
         ::
        </span>
        <span class="crayon-v">
         DataArrayTupleRange
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-v">
         NumComps
        </span>
        <span class="crayon-o">
         &gt;
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-t">
         array
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ed3589407344-3">
        <span class="crayon-r">
         using
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         ValueType
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         typename
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-t">
         decltype
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         range
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-o">
         ::
        </span>
        <span class="crayon-v">
         ComponentType
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ed3589407344-4">
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ed3589407344-5">
        <span class="crayon-v">
         std
        </span>
        <span class="crayon-o">
         ::
        </span>
        <span class="crayon-t">
         array
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-v">
         ValueType
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         NumComps
        </span>
        <span class="crayon-o">
         &gt;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         data
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ed3589407344-6">
        <span class="crayon-st">
         for
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         auto
        </span>
        <span class="crayon-o">
         &amp;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         tuple
        </span>
        <span class="crayon-o">
         :
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         range
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ed3589407344-7">
        <span class="crayon-sy">
         {
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ed3589407344-8">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         tuple
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetTuple
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         data
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         data
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ed3589407344-9">
        <span class="crayon-h">
        </span>
        <span class="crayon-c">
         // Do work with data
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ed3589407344-10">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         tuple
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetTuple
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         data
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         data
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e89337ed3589407344-11">
        <span class="crayon-sy">
         }
        </span>
       </div>
      </div>
     </td>
    </tr>
   </table>
  </div>
 </div>
 <!-- [Format Time: 0.0005 seconds] -->
 <p>
 </p>
 <p>
  These are much faster for the
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337ed5727906599" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-v">
     vtkDataArray
    </span>
   </span>
  </span>
  case because it only requires one virtual call per tuple, rather than one per component.
 </p>
 <p>
  Looking at the type-explicit AOS interfaces, the performance is even across the board, indicating that the ranges and iterators are transparent to the compiler and they perform at the same level as the raw pointer code:
 </p>
 <div class="wp-caption aligncenter" id="attachment_23897" style="width: 846px">
  <img alt="" class="size-full wp-image-23897" height="560" sizes="(max-width: 836px) 100vw, 836px" src="http://blog.kitware.com/wp-content/uploads/2018/11/AOS-Read.png" srcset="https://blog.kitware.com/wp-content/uploads/2018/11/AOS-Read.png 836w, https://blog.kitware.com/wp-content/uploads/2018/11/AOS-Read-235x156.png 235w, https://blog.kitware.com/wp-content/uploads/2018/11/AOS-Read-300x201.png 300w, https://blog.kitware.com/wp-content/uploads/2018/11/AOS-Read-768x514.png 768w, https://blog.kitware.com/wp-content/uploads/2018/11/AOS-Read-220x147.png 220w, https://blog.kitware.com/wp-content/uploads/2018/11/AOS-Read-250x167.png 250w, https://blog.kitware.com/wp-content/uploads/2018/11/AOS-Read-355x238.png 355w, https://blog.kitware.com/wp-content/uploads/2018/11/AOS-Read-730x489.png 730w, https://blog.kitware.com/wp-content/uploads/2018/11/AOS-Read-90x60.png 90w" width="836"/>
  <p class="wp-caption-text">
   Reading a 1GiB 3-component vtkAOSDataArrayTemplate&lt;float&gt; directly.
  </p>
 </div>
 <p>
 </p>
 <div class="wp-caption aligncenter" id="attachment_23898" style="width: 846px">
  <img alt="" class="size-full wp-image-23898" height="560" sizes="(max-width: 836px) 100vw, 836px" src="http://blog.kitware.com/wp-content/uploads/2018/11/AOS-Write.png" srcset="https://blog.kitware.com/wp-content/uploads/2018/11/AOS-Write.png 836w, https://blog.kitware.com/wp-content/uploads/2018/11/AOS-Write-235x156.png 235w, https://blog.kitware.com/wp-content/uploads/2018/11/AOS-Write-300x201.png 300w, https://blog.kitware.com/wp-content/uploads/2018/11/AOS-Write-768x514.png 768w, https://blog.kitware.com/wp-content/uploads/2018/11/AOS-Write-220x147.png 220w, https://blog.kitware.com/wp-content/uploads/2018/11/AOS-Write-250x167.png 250w, https://blog.kitware.com/wp-content/uploads/2018/11/AOS-Write-355x238.png 355w, https://blog.kitware.com/wp-content/uploads/2018/11/AOS-Write-730x489.png 730w, https://blog.kitware.com/wp-content/uploads/2018/11/AOS-Write-90x60.png 90w" width="836"/>
  <p class="wp-caption-text">
   Writing a 1GiB 3-component vtkAOSDataArrayTemplate&lt;float&gt; directly.
  </p>
 </div>
 <h2>
  Summary and Caveats
 </h2>
 <p>
  These range and iterator utilities provide a new mechanism for interacting with
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337ed7334396903" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-v">
     vtkDataArray
    </span>
   </span>
  </span>
  s safely, efficiently, and with a high degree of flexibility and compatibility. They take advantage of known tuple sizes to produce optimized instructions, and can be easily restricted to a subset of an array’s data. Iteration can be performed using C++11 for-range syntax, and can step through data tuple-by-tuple and component-by-component (
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337ed9759266860" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-v">
     TupleRange
    </span>
   </span>
  </span>
  ), or by walking the array in an AOS pattern (
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337edb139160188" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-v">
     ValueRange
    </span>
   </span>
  </span>
  ). The range proxies and iterators are compatible with STL conventions, and can be used seamlessly with the STL algorithms.
 </p>
 <p>
  The one major feature missing from the new iterators is that
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337edd350664591" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-v">
     operator
    </span>
    <span class="crayon-sy">
     [
    </span>
    <span class="crayon-sy">
     ]
    </span>
   </span>
  </span>
  is not implemented, making random access a bit more tedious in certain cases. This is due to how references interact with the
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337ede980981362" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-v">
     auto
    </span>
   </span>
  </span>
  keyword. There’s not a straightforward way to implement this without breaking reference/value semantics or leaving dangling references, so the operator is disabled. Certain specializations may still allow it to be used, but enabling
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337ee0625119686" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-v">
     VTK_DEBUG_RANGE_ITERATORS
    </span>
   </span>
  </span>
  in cmake will catch these usages and emit errors.
 </p>
 <p>
  It’s a bit early to talk about best practices, but it does appear that using the
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337ee2863153501" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-v">
     GetTuple
    </span>
   </span>
  </span>
  method with the tuple iterators is, in general, the fastest way to use the tuple ranges. The performance is comparable to the other methods for type-explicit arrays, but significantly faster for the slow-path since the number of virtual calls is reduced.
 </p>
 <p>
  Along with the ranges and iterators, a new
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337ee4511488942" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-v">
     vtkDataArrayMeta
    </span>
    <span class="crayon-sy">
     .
    </span>
    <span class="crayon-v">
     h
    </span>
   </span>
  </span>
  header file is added, which contains metaprogramming helpers for working with
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337ee6894380958" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-v">
     vtkDataArray
    </span>
   </span>
  </span>
  s. It introduces a
  <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337ee8999980958" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
   <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
    <span class="crayon-v">
     vtk
    </span>
    <span class="crayon-o">
     ::
    </span>
   </span>
  </span>
  namespace, and populates it with:
 </p>
 <ul>
  <li>
   typedefs for array index types (
   <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337eea432913524" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
    <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
     <span class="crayon-v">
      vtk
     </span>
     <span class="crayon-o">
      ::
     </span>
     <span class="crayon-v">
      ValueIdType
     </span>
    </span>
   </span>
   ,
   <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337eeb212099388" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
    <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
     <span class="crayon-v">
      vtk
     </span>
     <span class="crayon-o">
      ::
     </span>
     <span class="crayon-v">
      TupleIdType
     </span>
    </span>
   </span>
   , and
   <span class="crayon-syntax crayon-syntax-inline crayon-theme-coy crayon-theme-coy-inline crayon-font-monaco" id="crayon-5c41e89337eed376273468" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important;">
    <span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 25px !important;font-size: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
     <span class="crayon-v">
      vtk
     </span>
     <span class="crayon-o">
      ::
     </span>
     <span class="crayon-v">
      ComponentIdType
     </span>
    </span>
   </span>
   ).
  </li>
  <li>
   helpers for static assertions and SFINAE checks.
  </li>
  <li>
   A class to strip pointers (including VTK’s smart pointers) from an arbitrary type.
  </li>
  <li>
   A container that transparently switches between a compile-time constant and a runtime tuple size to simplify optimizing code.
  </li>
 </ul>
 <p>
  The addition of these features will hopefully provide a fresh, modern feel to the VTK toolkit, and simplify the process of writing highly performant code in generic contexts. Do you have ideas for other ways to leverage new C++11 features in the VTK codebase? Feel free to leave your thoughts in the comments below!
 </p>
 <p>
 </p>
</div>
