<meta charset="utf-8">
<div class="entry-content">
 <p>
  In my
  <a href="https://blog.kitware.com/streaming-in-vtk-time/">
   last blog
  </a>
  , I introduced temporal streaming in VTK. For this, I used a simple unsteady flow-field example and at the end of the blog, I challenged the readers to developing a simple particle advection code built on temporal streaming concepts. Here is my implementation of the particle integrator.
 </p>
 <!-- Crayon Syntax Highlighter v_2.7.2_beta -->
 <div class="crayon-syntax crayon-theme-coy crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c41e81486d9d266458806" style=" margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 25px !important;">
  <div class="crayon-plain-wrap">
   <textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 16px !important; line-height: 25px !important;" wrap="soft">
from source import *
from vtk.util import keys

TIME_VALUES = keys.MakeKey(keys.DoubleVectorKey, "Time Values", "particle.py")

class ParticleAdvection(VTKPythonAlgorithmBase):
    def __init__(self):
        VTKPythonAlgorithmBase.__init__(self,
            nInputPorts=1, inputType='vtkDataSet',
            nOutputPorts=1, outputType='vtkUnstructuredGrid')
        self.Cache = None
        # Seed for the particles
        self.Source = vtk.vtkLineSource()
        self.Source.SetPoint1(3, 0, 0)
        self.Source.SetPoint2(3, 6, 0)
        self.Source.SetResolution(20)
        self.Source.Update()
        self.NumPts = self.Source.GetOutput().GetNumberOfPoints()
        # We use the probe filter to sample the input
        # field at particle locations.
        self.Probe = vtk.vtkProbeFilter()

        # Create a polydata to represent the particle locations
        # at which we will sample the velocity fields.
        self.ProbePoints = vtk.vtkPolyData()
        pts = vtk.vtkPoints()
        self.ProbePoints.SetPoints(pts)

        self.Probe.SetInputData(self.ProbePoints)

        self.UpdateTimeIndex = 0

    def RequestInformation(self, request, inInfo, outInfo):
        # Reset values.
        info = inInfo[0].GetInformationObject(0)
        self.TimeValues = info.Get(
            vtk.vtkStreamingDemandDrivenPipeline.TIME_STEPS())

        # We accumulate all particles to one dataset so we don't really
        # produce temporal data that can be separately requested.
        outInfo.GetInformationObject(0).Remove(
            vtk.vtkStreamingDemandDrivenPipeline.TIME_STEPS())
        outInfo.GetInformationObject(0).Remove(
            vtk.vtkStreamingDemandDrivenPipeline.TIME_RANGE())

        # This is to give the next filter an idea about time
        # values. Taking a shortcut here. This should really
        # be a proper meta-data that is copied downstream.
        outInfo.GetInformationObject(0).Set(
            TIME_VALUES, self.TimeValues, len(self.TimeValues))

        return 1

    def RequestUpdateExtent(self, request, inInfo, outInfo):
        info = inInfo[0].GetInformationObject(0)
        # Ask for the next timestep.
        info.Set(vtk.vtkStreamingDemandDrivenPipeline.UPDATE_TIME_STEP(),
            self.TimeValues[self.UpdateTimeIndex])
        return 1

    def ProbeVelocity(self, data):
        # Update the particle locations we sample at
        pts = dsa.numpyTovtkDataArray(self.Points)
        self.ProbePoints.GetPoints().SetData(pts)

        self.Probe.SetSourceData(data)

        # Sample
        self.Probe.Update()
        p = dsa.WrapDataObject(self.Probe.GetOutput())
        # All we care about is the vector values/
        return p.PointData['vectors']

    def DoParticle(self, t1, t2):
        # Evaluate both timesteps at the current point
        v1 = self.ProbeVelocity(t1.VTKObject)
        v2 = self.ProbeVelocity(t2.VTKObject)

        # Use the average as the velocity
        v = (v1+v2)/2
        dt = t[self.UpdateTimeIndex] - t[self.UpdateTimeIndex - 1]
        # Advect particles
        pts = self.Points + v*dt
        self.Points = pts
        # Store new particle values in the output array
        idx = self.UpdateTimeIndex*self.NumPts
        self.OutputPoints[idx:idx+self.NumPts, :] = pts

        self.TimeValuesArray[idx:idx+self.NumPts] = t[self.UpdateTimeIndex]

    def RequestData(self, request, inInfo, outInfo):
        info = inInfo[0].GetInformationObject(0)
        inp = dsa.WrapDataObject(vtk.vtkDataSet.GetData(info))

        if self.Cache is not None:
            self.DoParticle(self.Cache, inp)
        else:
            # First time step. Initialize.

            # This is where we will store the coordinates of all points
            # at all times
            self.OutputPoints = np.zeros(
                (len(self.TimeValues)*self.NumPts, 3))

            # First time step uses the seed locations as the particle points
            pts = vtk.vtkPoints()
            pts.DeepCopy(self.Source.GetOutput().GetPoints())
            self.Points = dsa.vtkDataArrayToVTKArray(pts.GetData())
            self.OutputPoints[0:self.NumPts, :] = self.Points

            # This will be a point array showing the time value of each
            # output point. This is necessary to differentiate output
            # points since we store all timesteps in the output.
            self.TimeValuesArray = np.empty(len(self.TimeValues)*self.NumPts)
            self.TimeValuesArray[0:self.NumPts] = self.TimeValues[0]

        if self.UpdateTimeIndex &lt; len(self.TimeValues) - 1:
            # If we are not done, ask the pipeline to re-execute us.
            self.UpdateTimeIndex += 1
            request.Set(
                vtk.vtkStreamingDemandDrivenPipeline.CONTINUE_EXECUTING(), 1)
            c = inp.NewInstance()
            c.ShallowCopy(inp.VTKObject)
            c = dsa.WrapDataObject(c)
            self.Cache = c
        else:
            # Stop execution
            request.Remove(
                vtk.vtkStreamingDemandDrivenPipeline.CONTINUE_EXECUTING())
            # Reset for next potential execution.
            self.UpdateTimeIndex = 0
            # Create output
            outputPts = dsa.numpyTovtkDataArray(self.OutputPoints)
            pts = vtk.vtkPoints()
            pts.SetData(outputPts)
            output = dsa.WrapDataObject(
                vtk.vtkUnstructuredGrid.GetData(outInfo))
            output.SetPoints(pts)
            tvs = dsa.numpyTovtkDataArray(self.TimeValuesArray)
            tvs.SetName("Time Values")
            output.GetPointData().SetScalars(tvs)
            # Clean up
            self.Cache = None
            self.OutputPoints = None
            self.Points = None
        return 1</textarea>
  </div>
  <div class="crayon-main">
   <table class="crayon-table">
    <tr class="crayon-row">
     <td class="crayon-nums " data-settings="show">
      <div class="crayon-nums-content" style="font-size: 16px !important; line-height: 25px !important;">
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-1">
        1
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-2">
        2
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-3">
        3
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-4">
        4
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-5">
        5
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-6">
        6
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-7">
        7
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-8">
        8
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-9">
        9
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-10">
        10
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-11">
        11
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-12">
        12
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-13">
        13
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-14">
        14
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-15">
        15
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-16">
        16
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-17">
        17
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-18">
        18
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-19">
        19
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-20">
        20
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-21">
        21
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-22">
        22
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-23">
        23
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-24">
        24
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-25">
        25
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-26">
        26
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-27">
        27
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-28">
        28
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-29">
        29
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-30">
        30
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-31">
        31
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-32">
        32
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-33">
        33
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-34">
        34
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-35">
        35
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-36">
        36
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-37">
        37
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-38">
        38
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-39">
        39
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-40">
        40
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-41">
        41
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-42">
        42
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-43">
        43
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-44">
        44
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-45">
        45
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-46">
        46
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-47">
        47
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-48">
        48
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-49">
        49
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-50">
        50
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-51">
        51
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-52">
        52
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-53">
        53
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-54">
        54
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-55">
        55
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-56">
        56
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-57">
        57
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-58">
        58
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-59">
        59
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-60">
        60
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-61">
        61
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-62">
        62
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-63">
        63
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-64">
        64
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-65">
        65
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-66">
        66
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-67">
        67
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-68">
        68
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-69">
        69
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-70">
        70
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-71">
        71
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-72">
        72
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-73">
        73
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-74">
        74
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-75">
        75
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-76">
        76
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-77">
        77
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-78">
        78
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-79">
        79
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-80">
        80
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-81">
        81
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-82">
        82
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-83">
        83
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-84">
        84
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-85">
        85
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-86">
        86
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-87">
        87
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-88">
        88
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-89">
        89
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-90">
        90
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-91">
        91
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-92">
        92
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-93">
        93
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-94">
        94
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-95">
        95
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-96">
        96
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-97">
        97
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-98">
        98
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-99">
        99
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-100">
        100
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-101">
        101
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-102">
        102
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-103">
        103
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-104">
        104
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-105">
        105
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-106">
        106
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-107">
        107
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-108">
        108
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-109">
        109
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-110">
        110
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-111">
        111
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-112">
        112
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-113">
        113
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-114">
        114
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-115">
        115
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-116">
        116
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-117">
        117
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-118">
        118
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-119">
        119
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-120">
        120
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-121">
        121
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-122">
        122
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-123">
        123
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-124">
        124
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-125">
        125
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-126">
        126
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-127">
        127
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-128">
        128
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-129">
        129
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-130">
        130
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-131">
        131
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-132">
        132
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-133">
        133
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-134">
        134
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-135">
        135
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-136">
        136
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-137">
        137
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-138">
        138
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-139">
        139
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-140">
        140
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-141">
        141
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-142">
        142
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-143">
        143
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-144">
        144
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-145">
        145
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486d9d266458806-146">
        146
       </div>
      </div>
     </td>
     <td class="crayon-code">
      <div class="crayon-pre" style="font-size: 16px !important; line-height: 25px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-1">
        <span class="crayon-e">
         from
        </span>
        <span class="crayon-e">
         source
        </span>
        <span class="crayon-e ">
         import *
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-2">
        <span class="crayon-e">
         from
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         util
        </span>
        <span class="crayon-e">
         import
        </span>
        <span class="crayon-e">
         keys
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-3">
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-4">
        <span class="crayon-v">
         TIME_VALUES
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         keys
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         MakeKey
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         keys
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         DoubleVectorKey
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-s">
         "Time Values"
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-s">
         "particle.py"
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-5">
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-6">
        <span class="crayon-t">
         class
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         ParticleAdvection
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         VTKPythonAlgorithmBase
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-o">
         :
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-7">
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         def
        </span>
        <span class="crayon-e">
         __init__
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-o">
         :
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-8">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         VTKPythonAlgorithmBase
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         __init__
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         ,
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-9">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         nInputPorts
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-cn">
         1
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         inputType
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-s">
         'vtkDataSet'
        </span>
        <span class="crayon-sy">
         ,
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-10">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         nOutputPorts
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-cn">
         1
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         outputType
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-s">
         'vtkUnstructuredGrid'
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-11">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         Cache
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         None
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-12">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # Seed for the particles
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-13">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         Source
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkLineSource
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-14">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         Source
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetPoint1
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         3
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-15">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         Source
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetPoint2
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         3
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         6
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-16">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         Source
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetResolution
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         20
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-17">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         Source
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Update
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-18">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         NumPts
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         Source
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetOutput
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetNumberOfPoints
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-19">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # We use the probe filter to sample the input
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-20">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # field at particle locations.
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-21">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         Probe
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkProbeFilter
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-22">
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-23">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # Create a polydata to represent the particle locations
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-24">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # at which we will sample the velocity fields.
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-25">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         ProbePoints
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkPolyData
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-26">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         pts
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkPoints
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-27">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         ProbePoints
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetPoints
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         pts
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-28">
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-29">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         Probe
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetInputData
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         ProbePoints
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-30">
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-31">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         UpdateTimeIndex
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         0
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-32">
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-33">
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         def
        </span>
        <span class="crayon-e">
         RequestInformation
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         request
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         inInfo
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         outInfo
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-o">
         :
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-34">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # Reset values.
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-35">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         info
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         inInfo
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetInformationObject
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-36">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         TimeValues
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         info
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Get
        </span>
        <span class="crayon-sy">
         (
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-37">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         vtkStreamingDemandDrivenPipeline
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         TIME_STEPS
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-38">
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-39">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # We accumulate all particles to one dataset so we don't really
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-40">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # produce temporal data that can be separately requested.
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-41">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         outInfo
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetInformationObject
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Remove
        </span>
        <span class="crayon-sy">
         (
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-42">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         vtkStreamingDemandDrivenPipeline
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         TIME_STEPS
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-43">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         outInfo
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetInformationObject
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Remove
        </span>
        <span class="crayon-sy">
         (
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-44">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         vtkStreamingDemandDrivenPipeline
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         TIME_RANGE
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-45">
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-46">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # This is to give the next filter an idea about time
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-47">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # values. Taking a shortcut here. This should really
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-48">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # be a proper meta-data that is copied downstream.
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-49">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         outInfo
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetInformationObject
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Set
        </span>
        <span class="crayon-sy">
         (
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-50">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         TIME_VALUES
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         TimeValues
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         len
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         TimeValues
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-51">
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-52">
        <span class="crayon-h">
        </span>
        <span class="crayon-st">
         return
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         1
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-53">
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-54">
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         def
        </span>
        <span class="crayon-e">
         RequestUpdateExtent
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         request
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         inInfo
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         outInfo
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-o">
         :
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-55">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         info
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         inInfo
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetInformationObject
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-56">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # Ask for the next timestep.
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-57">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         info
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Set
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         vtkStreamingDemandDrivenPipeline
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         UPDATE_TIME_STEP
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ,
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-58">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         TimeValues
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         UpdateTimeIndex
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-59">
        <span class="crayon-h">
        </span>
        <span class="crayon-st">
         return
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         1
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-60">
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-61">
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         def
        </span>
        <span class="crayon-e">
         ProbeVelocity
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         data
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-o">
         :
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-62">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # Update the particle locations we sample at
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-63">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         pts
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         dsa
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         numpyTovtkDataArray
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         Points
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-64">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         ProbePoints
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetPoints
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetData
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         pts
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-65">
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-66">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         Probe
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetSourceData
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         data
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-67">
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-68">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # Sample
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-69">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         Probe
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Update
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-70">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         p
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         dsa
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         WrapDataObject
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         Probe
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetOutput
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-71">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # All we care about is the vector values/
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-72">
        <span class="crayon-h">
        </span>
        <span class="crayon-st">
         return
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         p
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         PointData
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-s">
         'vectors'
        </span>
        <span class="crayon-sy">
         ]
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-73">
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-74">
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         def
        </span>
        <span class="crayon-e">
         DoParticle
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         t1
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         t2
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-o">
         :
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-75">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # Evaluate both timesteps at the current point
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-76">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         v1
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         ProbeVelocity
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         t1
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         VTKObject
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-77">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         v2
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         ProbeVelocity
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         t2
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         VTKObject
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-78">
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-79">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # Use the average as the velocity
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-80">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         v
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         v1
        </span>
        <span class="crayon-o">
         +
        </span>
        <span class="crayon-v">
         v2
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-o">
         /
        </span>
        <span class="crayon-cn">
         2
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-81">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         dt
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         t
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         UpdateTimeIndex
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         -
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         t
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         UpdateTimeIndex
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         -
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         1
        </span>
        <span class="crayon-sy">
         ]
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-82">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # Advect particles
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-83">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         pts
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         Points
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         +
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e ">
         v*
        </span>
        <span class="crayon-e">
         dt
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-84">
        <span class="crayon-e">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         Points
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         pts
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-85">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # Store new particle values in the output array
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-86">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         idx
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e ">
         UpdateTimeIndex*
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         NumPts
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-87">
        <span class="crayon-e">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         OutputPoints
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-v">
         idx
        </span>
        <span class="crayon-o">
         :
        </span>
        <span class="crayon-v">
         idx
        </span>
        <span class="crayon-o">
         +
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         NumPts
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         :
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         pts
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-88">
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-89">
        <span class="crayon-e">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         TimeValuesArray
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-v">
         idx
        </span>
        <span class="crayon-o">
         :
        </span>
        <span class="crayon-v">
         idx
        </span>
        <span class="crayon-o">
         +
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         NumPts
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         t
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         UpdateTimeIndex
        </span>
        <span class="crayon-sy">
         ]
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-90">
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-91">
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         def
        </span>
        <span class="crayon-e">
         RequestData
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         request
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         inInfo
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         outInfo
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-o">
         :
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-92">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         info
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         inInfo
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetInformationObject
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-93">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         inp
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         dsa
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         WrapDataObject
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         vtkDataSet
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetData
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         info
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-94">
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-95">
        <span class="crayon-h">
        </span>
        <span class="crayon-st">
         if
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Cache
        </span>
        <span class="crayon-st">
         is
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-st">
         not
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         None
        </span>
        <span class="crayon-o">
         :
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-96">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         DoParticle
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         Cache
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         inp
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-97">
        <span class="crayon-h">
        </span>
        <span class="crayon-st">
         else
        </span>
        <span class="crayon-o">
         :
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-98">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # First time step. Initialize.
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-99">
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-100">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # This is where we will store the coordinates of all points
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-101">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # at all times
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-102">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         OutputPoints
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         np
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         zeros
        </span>
        <span class="crayon-sy">
         (
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-103">
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-e">
         len
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         TimeValues
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-o">
         *
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         NumPts
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         3
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-104">
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-105">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # First time step uses the seed locations as the particle points
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-106">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         pts
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkPoints
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-107">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         pts
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         DeepCopy
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         Source
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetOutput
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetPoints
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-108">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         Points
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         dsa
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkDataArrayToVTKArray
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         pts
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetData
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-109">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         OutputPoints
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-o">
         :
        </span>
        <span class="crayon-v">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         NumPts
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         :
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         Points
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-110">
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-111">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # This will be a point array showing the time value of each
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-112">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # output point. This is necessary to differentiate output
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-113">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # points since we store all timesteps in the output.
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-114">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         TimeValuesArray
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         np
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         empty
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-e">
         len
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         TimeValues
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-o">
         *
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         NumPts
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-115">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         TimeValuesArray
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-o">
         :
        </span>
        <span class="crayon-v">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         NumPts
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         TimeValues
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ]
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-116">
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-117">
        <span class="crayon-h">
        </span>
        <span class="crayon-st">
         if
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         UpdateTimeIndex
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         len
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         TimeValues
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         -
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         1
        </span>
        <span class="crayon-o">
         :
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-118">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # If we are not done, ask the pipeline to re-execute us.
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-119">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         UpdateTimeIndex
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         +=
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         1
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-120">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         request
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Set
        </span>
        <span class="crayon-sy">
         (
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-121">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         vtkStreamingDemandDrivenPipeline
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         CONTINUE_EXECUTING
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         1
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-122">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         c
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         inp
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         NewInstance
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-123">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         c
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         ShallowCopy
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         inp
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         VTKObject
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-124">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         c
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         dsa
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         WrapDataObject
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         c
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-125">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         Cache
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-i">
         c
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-126">
        <span class="crayon-h">
        </span>
        <span class="crayon-st">
         else
        </span>
        <span class="crayon-o">
         :
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-127">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # Stop execution
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-128">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         request
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Remove
        </span>
        <span class="crayon-sy">
         (
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-129">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         vtkStreamingDemandDrivenPipeline
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         CONTINUE_EXECUTING
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-130">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # Reset for next potential execution.
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-131">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         UpdateTimeIndex
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         0
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-132">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # Create output
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-133">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         outputPts
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         dsa
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         numpyTovtkDataArray
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         OutputPoints
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-134">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         pts
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkPoints
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-135">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         pts
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetData
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         outputPts
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-136">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         output
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         dsa
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         WrapDataObject
        </span>
        <span class="crayon-sy">
         (
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-137">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         vtkUnstructuredGrid
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetData
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         outInfo
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-138">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         output
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetPoints
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         pts
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-139">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         tvs
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         dsa
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         numpyTovtkDataArray
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         TimeValuesArray
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-140">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         tvs
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetName
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-s">
         "Time Values"
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-141">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         output
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetPointData
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetScalars
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         tvs
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-142">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # Clean up
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-143">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         Cache
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         None
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-144">
        <span class="crayon-e">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         OutputPoints
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         None
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-145">
        <span class="crayon-e">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         Points
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         None
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486d9d266458806-146">
        <span class="crayon-e">
        </span>
        <span class="crayon-st">
         return
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         1
        </span>
       </div>
      </div>
     </td>
    </tr>
   </table>
  </div>
 </div>
 <!-- [Format Time: 0.0342 seconds] -->
 <p>
  Most of the code in this filter actually takes care of initializing and maintaining data structures. The interesting parts are quite short. The streaming is implemented with something as simple as this:
 </p>
 <!-- Crayon Syntax Highlighter v_2.7.2_beta -->
 <div class="crayon-syntax crayon-theme-coy crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c41e81486da9190155864" style=" margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 25px !important;">
  <div class="crayon-plain-wrap">
   <textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 16px !important; line-height: 25px !important;" wrap="soft">
    def RequestUpdateExtent(self, request, inInfo, outInfo):
        info = inInfo[0].GetInformationObject(0)
        # Ask for the next timestep.
        info.Set(vtk.vtkStreamingDemandDrivenPipeline.UPDATE_TIME_STEP(),
            self.TimeValues[self.UpdateTimeIndex])
        return 1

    def RequestData(self, request, inInfo, outInfo):
        if self.Cache is not None:
            self.DoParticle(self.Cache, inp)

        if self.UpdateTimeIndex &lt; len(self.TimeValues) - 1:
            # If we are not done, ask the pipeline to re-execute us.
            self.UpdateTimeIndex += 1
            request.Set(
                vtk.vtkStreamingDemandDrivenPipeline.CONTINUE_EXECUTING(), 1)
            c = inp.NewInstance()
            c.ShallowCopy(inp.VTKObject)
            c = dsa.WrapDataObject(c)
            self.Cache = c
        else:
            # Stop execution
            request.Remove(
                vtk.vtkStreamingDemandDrivenPipeline.CONTINUE_EXECUTING())
        return 1</textarea>
  </div>
  <div class="crayon-main">
   <table class="crayon-table">
    <tr class="crayon-row">
     <td class="crayon-nums " data-settings="show">
      <div class="crayon-nums-content" style="font-size: 16px !important; line-height: 25px !important;">
       <div class="crayon-num" data-line="crayon-5c41e81486da9190155864-1">
        1
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486da9190155864-2">
        2
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486da9190155864-3">
        3
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486da9190155864-4">
        4
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486da9190155864-5">
        5
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486da9190155864-6">
        6
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486da9190155864-7">
        7
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486da9190155864-8">
        8
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486da9190155864-9">
        9
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486da9190155864-10">
        10
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486da9190155864-11">
        11
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486da9190155864-12">
        12
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486da9190155864-13">
        13
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486da9190155864-14">
        14
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486da9190155864-15">
        15
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486da9190155864-16">
        16
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486da9190155864-17">
        17
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486da9190155864-18">
        18
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486da9190155864-19">
        19
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486da9190155864-20">
        20
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486da9190155864-21">
        21
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486da9190155864-22">
        22
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486da9190155864-23">
        23
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486da9190155864-24">
        24
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486da9190155864-25">
        25
       </div>
      </div>
     </td>
     <td class="crayon-code">
      <div class="crayon-pre" style="font-size: 16px !important; line-height: 25px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <div class="crayon-line" id="crayon-5c41e81486da9190155864-1">
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         def
        </span>
        <span class="crayon-e">
         RequestUpdateExtent
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         request
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         inInfo
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         outInfo
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-o">
         :
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486da9190155864-2">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         info
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         inInfo
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetInformationObject
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486da9190155864-3">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # Ask for the next timestep.
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486da9190155864-4">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         info
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Set
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         vtkStreamingDemandDrivenPipeline
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         UPDATE_TIME_STEP
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ,
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486da9190155864-5">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         TimeValues
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         UpdateTimeIndex
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486da9190155864-6">
        <span class="crayon-h">
        </span>
        <span class="crayon-st">
         return
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         1
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486da9190155864-7">
       </div>
       <div class="crayon-line" id="crayon-5c41e81486da9190155864-8">
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         def
        </span>
        <span class="crayon-e">
         RequestData
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         request
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         inInfo
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         outInfo
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-o">
         :
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486da9190155864-9">
        <span class="crayon-h">
        </span>
        <span class="crayon-st">
         if
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Cache
        </span>
        <span class="crayon-st">
         is
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-st">
         not
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         None
        </span>
        <span class="crayon-o">
         :
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486da9190155864-10">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         DoParticle
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         Cache
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         inp
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486da9190155864-11">
       </div>
       <div class="crayon-line" id="crayon-5c41e81486da9190155864-12">
        <span class="crayon-h">
        </span>
        <span class="crayon-st">
         if
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         UpdateTimeIndex
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         len
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         TimeValues
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         -
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         1
        </span>
        <span class="crayon-o">
         :
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486da9190155864-13">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # If we are not done, ask the pipeline to re-execute us.
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486da9190155864-14">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         UpdateTimeIndex
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         +=
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         1
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486da9190155864-15">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         request
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Set
        </span>
        <span class="crayon-sy">
         (
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486da9190155864-16">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         vtkStreamingDemandDrivenPipeline
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         CONTINUE_EXECUTING
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         1
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486da9190155864-17">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         c
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         inp
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         NewInstance
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486da9190155864-18">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         c
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         ShallowCopy
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         inp
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         VTKObject
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486da9190155864-19">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         c
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         dsa
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         WrapDataObject
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         c
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486da9190155864-20">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         Cache
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-i">
         c
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486da9190155864-21">
        <span class="crayon-h">
        </span>
        <span class="crayon-st">
         else
        </span>
        <span class="crayon-o">
         :
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486da9190155864-22">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # Stop execution
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486da9190155864-23">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         request
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Remove
        </span>
        <span class="crayon-sy">
         (
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486da9190155864-24">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         vtkStreamingDemandDrivenPipeline
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         CONTINUE_EXECUTING
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486da9190155864-25">
        <span class="crayon-h">
        </span>
        <span class="crayon-st">
         return
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         1
        </span>
       </div>
      </div>
     </td>
    </tr>
   </table>
  </div>
 </div>
 <!-- [Format Time: 0.0010 seconds] -->
 <p>
  Note that we don’t do any computing in the first time step (because we need pairs of two). For all other time steps, we use the previously cached dataset together with the current dataset to do the particle integration. Also, we tell the pipeline to keep executing until the last time step is reached. Simple.
 </p>
 <p>
  The integration code is even simpler:
 </p>
 <!-- Crayon Syntax Highlighter v_2.7.2_beta -->
 <div class="crayon-syntax crayon-theme-coy crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c41e81486db9064569409" style=" margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 25px !important;">
  <div class="crayon-plain-wrap">
   <textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 16px !important; line-height: 25px !important;" wrap="soft">
    def DoParticle(self, t1, t2):
        # Evaluate both timesteps at the current point
        v1 = self.ProbeVelocity(t1.VTKObject)
        v2 = self.ProbeVelocity(t2.VTKObject)

        # Use the average as the velocity
        v = (v1+v2)/2
        dt = t[self.UpdateTimeIndex] - t[self.UpdateTimeIndex - 1]
        # Advect particles
        pts = self.Points + v*dt
        self.Points = pts</textarea>
  </div>
  <div class="crayon-main">
   <table class="crayon-table">
    <tr class="crayon-row">
     <td class="crayon-nums " data-settings="show">
      <div class="crayon-nums-content" style="font-size: 16px !important; line-height: 25px !important;">
       <div class="crayon-num" data-line="crayon-5c41e81486db9064569409-1">
        1
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486db9064569409-2">
        2
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486db9064569409-3">
        3
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486db9064569409-4">
        4
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486db9064569409-5">
        5
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486db9064569409-6">
        6
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486db9064569409-7">
        7
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486db9064569409-8">
        8
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486db9064569409-9">
        9
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486db9064569409-10">
        10
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486db9064569409-11">
        11
       </div>
      </div>
     </td>
     <td class="crayon-code">
      <div class="crayon-pre" style="font-size: 16px !important; line-height: 25px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <div class="crayon-line" id="crayon-5c41e81486db9064569409-1">
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         def
        </span>
        <span class="crayon-e">
         DoParticle
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         t1
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         t2
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-o">
         :
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486db9064569409-2">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # Evaluate both timesteps at the current point
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486db9064569409-3">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         v1
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         ProbeVelocity
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         t1
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         VTKObject
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486db9064569409-4">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         v2
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         ProbeVelocity
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         t2
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         VTKObject
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486db9064569409-5">
       </div>
       <div class="crayon-line" id="crayon-5c41e81486db9064569409-6">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # Use the average as the velocity
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486db9064569409-7">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         v
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         v1
        </span>
        <span class="crayon-o">
         +
        </span>
        <span class="crayon-v">
         v2
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-o">
         /
        </span>
        <span class="crayon-cn">
         2
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486db9064569409-8">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         dt
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         t
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         UpdateTimeIndex
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         -
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         t
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         UpdateTimeIndex
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         -
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         1
        </span>
        <span class="crayon-sy">
         ]
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486db9064569409-9">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # Advect particles
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486db9064569409-10">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         pts
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         Points
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         +
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e ">
         v*
        </span>
        <span class="crayon-e">
         dt
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486db9064569409-11">
        <span class="crayon-e">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         Points
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         pts
        </span>
       </div>
      </div>
     </td>
    </tr>
   </table>
  </div>
 </div>
 <!-- [Format Time: 0.0014 seconds] -->
 <p>
  The
  <span style="font-family: courier;">
   ProbeVelocity
  </span>
  function takes care of evaluating the velocity field at the given point coordinates. In this case, we evaluate both the previous and current time step at the previous particle locations. Then we average these velocities and advect the particles with this average value to obtain first order integration. In the actual VTK filter, we spent quite a bit of effort optimizing this part. Evaluating a field at a particular coordinates requires finding the cell containing it, which is non-trivial work for any grid types other than rectilinear grids.
 </p>
 <p>
  The rest of code simply does bookkeeping. We can evaluate the filter with the following code.
 </p>
 <!-- Crayon Syntax Highlighter v_2.7.2_beta -->
 <div class="crayon-syntax crayon-theme-coy crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c41e81486dbc108956179" style=" margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 25px !important;">
  <div class="crayon-plain-wrap">
   <textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 16px !important; line-height: 25px !important;" wrap="soft">
s = VelocitySource()

f = ParticleAdvection()
f.SetInputConnection(s.GetOutputPort())

renWin = vtk.vtkRenderWindow()
ren = vtk.vtkRenderer()
renWin.AddRenderer(ren)
s = vtk.vtkSphereSource()
s.SetRadius(0.03)
glyph = vtk.vtkGlyph3D()
glyph.SetInputConnection(f.GetOutputPort())
glyph.SetSourceConnection(s.GetOutputPort())
glyph.SetScaleModeToDataScalingOff()
m = vtk.vtkPolyDataMapper()
m.SetInputConnection(glyph.GetOutputPort())
m.SetScalarRange(0, 2*np.pi)
a = vtk.vtkActor()
a.SetMapper(m)
ren.AddActor(a)
renWin.SetSize(500, 500)
renWin.Render()</textarea>
  </div>
  <div class="crayon-main">
   <table class="crayon-table">
    <tr class="crayon-row">
     <td class="crayon-nums " data-settings="show">
      <div class="crayon-nums-content" style="font-size: 16px !important; line-height: 25px !important;">
       <div class="crayon-num" data-line="crayon-5c41e81486dbc108956179-1">
        1
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbc108956179-2">
        2
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbc108956179-3">
        3
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbc108956179-4">
        4
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbc108956179-5">
        5
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbc108956179-6">
        6
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbc108956179-7">
        7
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbc108956179-8">
        8
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbc108956179-9">
        9
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbc108956179-10">
        10
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbc108956179-11">
        11
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbc108956179-12">
        12
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbc108956179-13">
        13
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbc108956179-14">
        14
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbc108956179-15">
        15
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbc108956179-16">
        16
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbc108956179-17">
        17
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbc108956179-18">
        18
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbc108956179-19">
        19
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbc108956179-20">
        20
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbc108956179-21">
        21
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbc108956179-22">
        22
       </div>
      </div>
     </td>
     <td class="crayon-code">
      <div class="crayon-pre" style="font-size: 16px !important; line-height: 25px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <div class="crayon-line" id="crayon-5c41e81486dbc108956179-1">
        <span class="crayon-v">
         s
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         VelocitySource
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbc108956179-2">
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbc108956179-3">
        <span class="crayon-v">
         f
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         ParticleAdvection
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbc108956179-4">
        <span class="crayon-v">
         f
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetInputConnection
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         s
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetOutputPort
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbc108956179-5">
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbc108956179-6">
        <span class="crayon-v">
         renWin
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkRenderWindow
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbc108956179-7">
        <span class="crayon-v">
         ren
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkRenderer
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbc108956179-8">
        <span class="crayon-v">
         renWin
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         AddRenderer
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         ren
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbc108956179-9">
        <span class="crayon-v">
         s
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkSphereSource
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbc108956179-10">
        <span class="crayon-v">
         s
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetRadius
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         0.03
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbc108956179-11">
        <span class="crayon-v">
         glyph
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkGlyph3D
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbc108956179-12">
        <span class="crayon-v">
         glyph
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetInputConnection
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         f
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetOutputPort
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbc108956179-13">
        <span class="crayon-v">
         glyph
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetSourceConnection
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         s
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetOutputPort
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbc108956179-14">
        <span class="crayon-v">
         glyph
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetScaleModeToDataScalingOff
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbc108956179-15">
        <span class="crayon-v">
         m
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkPolyDataMapper
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbc108956179-16">
        <span class="crayon-v">
         m
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetInputConnection
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         glyph
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetOutputPort
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbc108956179-17">
        <span class="crayon-v">
         m
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetScalarRange
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         2
        </span>
        <span class="crayon-o">
         *
        </span>
        <span class="crayon-v">
         np
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         pi
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbc108956179-18">
        <span class="crayon-v">
         a
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkActor
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbc108956179-19">
        <span class="crayon-v">
         a
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetMapper
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         m
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbc108956179-20">
        <span class="crayon-v">
         ren
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         AddActor
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         a
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbc108956179-21">
        <span class="crayon-v">
         renWin
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetSize
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         500
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         500
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbc108956179-22">
        <span class="crayon-v">
         renWin
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Render
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
      </div>
     </td>
    </tr>
   </table>
  </div>
 </div>
 <!-- [Format Time: 0.0008 seconds] -->
 <p>
  We then get the following image.
 </p>
 <p>
  <img alt="particles" src="https://blog.kitware.com/blog/files/53_987971419.png"/>
 </p>
 <p>
  I also wrote a very simple filter to animate this results. Here it is.
 </p>
 <!-- Crayon Syntax Highlighter v_2.7.2_beta -->
 <div class="crayon-syntax crayon-theme-coy crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c41e81486dbf718926517" style=" margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 25px !important;">
  <div class="crayon-plain-wrap">
   <textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 16px !important; line-height: 25px !important;" wrap="soft">
from particle import *

class AnimateParticles(VTKPythonAlgorithmBase):
    def __init__(self):
        VTKPythonAlgorithmBase.__init__(self,
            nInputPorts=1, inputType='vtkUnstructuredGrid',
            nOutputPorts=1, outputType='vtkUnstructuredGrid')

        self.Threshold = vtk.vtkThreshold()

    def RequestInformation(self, request, inInfo, outInfo):
        # We need to report that we are a time source to downstream.
        # We will use the TIME_VALUES from upstream for this.
        info = inInfo[0].GetInformationObject(0)
        self.TimeValues = info.Get(TIME_VALUES)
        outInfo.GetInformationObject(0).Set(
            vtk.vtkStreamingDemandDrivenPipeline.TIME_STEPS(),
            self.TimeValues,
            len(self.TimeValues))
        tr = [self.TimeValues[0], self.TimeValues[-1]]
        outInfo.GetInformationObject(0).Set(
            vtk.vtkStreamingDemandDrivenPipeline.TIME_RANGE(), tr, 2)

        return 1


    def RequestData(self, request, inInfo, outInfo):
        info = inInfo[0].GetInformationObject(0)
        inp = dsa.WrapDataObject(
            vtk.vtkUnstructuredGrid.GetData(info))

        oinfo = outInfo.GetInformationObject(0)
        if oinfo.Has(vtk.vtkStreamingDemandDrivenPipeline.UPDATE_TIME_STEP()):
            ut = oinfo.Get(
                vtk.vtkStreamingDemandDrivenPipeline.UPDATE_TIME_STEP())
        else:
            ut = self.TimeValues[0]
        # Simply extract the particles where the Time Values array
        # matches the requested time value.
        tvs = inp.PointData['Time Values']
        newpts = dsa.numpyTovtkDataArray(inp.Points[np.where(tvs == ut)])
        pts = vtk.vtkPoints()
        pts.SetData(newpts)

        output = vtk.vtkUnstructuredGrid.GetData(outInfo)
        output.SetPoints(pts)

        return 1</textarea>
  </div>
  <div class="crayon-main">
   <table class="crayon-table">
    <tr class="crayon-row">
     <td class="crayon-nums " data-settings="show">
      <div class="crayon-nums-content" style="font-size: 16px !important; line-height: 25px !important;">
       <div class="crayon-num" data-line="crayon-5c41e81486dbf718926517-1">
        1
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbf718926517-2">
        2
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbf718926517-3">
        3
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbf718926517-4">
        4
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbf718926517-5">
        5
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbf718926517-6">
        6
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbf718926517-7">
        7
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbf718926517-8">
        8
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbf718926517-9">
        9
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbf718926517-10">
        10
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbf718926517-11">
        11
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbf718926517-12">
        12
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbf718926517-13">
        13
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbf718926517-14">
        14
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbf718926517-15">
        15
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbf718926517-16">
        16
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbf718926517-17">
        17
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbf718926517-18">
        18
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbf718926517-19">
        19
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbf718926517-20">
        20
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbf718926517-21">
        21
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbf718926517-22">
        22
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbf718926517-23">
        23
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbf718926517-24">
        24
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbf718926517-25">
        25
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbf718926517-26">
        26
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbf718926517-27">
        27
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbf718926517-28">
        28
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbf718926517-29">
        29
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbf718926517-30">
        30
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbf718926517-31">
        31
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbf718926517-32">
        32
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbf718926517-33">
        33
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbf718926517-34">
        34
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbf718926517-35">
        35
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbf718926517-36">
        36
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbf718926517-37">
        37
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbf718926517-38">
        38
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbf718926517-39">
        39
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbf718926517-40">
        40
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbf718926517-41">
        41
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbf718926517-42">
        42
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbf718926517-43">
        43
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbf718926517-44">
        44
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbf718926517-45">
        45
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbf718926517-46">
        46
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbf718926517-47">
        47
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dbf718926517-48">
        48
       </div>
      </div>
     </td>
     <td class="crayon-code">
      <div class="crayon-pre" style="font-size: 16px !important; line-height: 25px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <div class="crayon-line" id="crayon-5c41e81486dbf718926517-1">
        <span class="crayon-e">
         from
        </span>
        <span class="crayon-e">
         particle
        </span>
        <span class="crayon-e ">
         import *
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbf718926517-2">
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbf718926517-3">
        <span class="crayon-t">
         class
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         AnimateParticles
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         VTKPythonAlgorithmBase
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-o">
         :
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbf718926517-4">
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         def
        </span>
        <span class="crayon-e">
         __init__
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-o">
         :
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbf718926517-5">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         VTKPythonAlgorithmBase
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         __init__
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         ,
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbf718926517-6">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         nInputPorts
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-cn">
         1
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         inputType
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-s">
         'vtkUnstructuredGrid'
        </span>
        <span class="crayon-sy">
         ,
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbf718926517-7">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         nOutputPorts
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-cn">
         1
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         outputType
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-s">
         'vtkUnstructuredGrid'
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbf718926517-8">
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbf718926517-9">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         Threshold
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkThreshold
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbf718926517-10">
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbf718926517-11">
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         def
        </span>
        <span class="crayon-e">
         RequestInformation
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         request
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         inInfo
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         outInfo
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-o">
         :
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbf718926517-12">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # We need to report that we are a time source to downstream.
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbf718926517-13">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # We will use the TIME_VALUES from upstream for this.
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbf718926517-14">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         info
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         inInfo
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetInformationObject
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbf718926517-15">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         TimeValues
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         info
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Get
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         TIME_VALUES
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbf718926517-16">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         outInfo
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetInformationObject
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Set
        </span>
        <span class="crayon-sy">
         (
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbf718926517-17">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         vtkStreamingDemandDrivenPipeline
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         TIME_STEPS
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ,
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbf718926517-18">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         TimeValues
        </span>
        <span class="crayon-sy">
         ,
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbf718926517-19">
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         len
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         TimeValues
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbf718926517-20">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         tr
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         TimeValues
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         TimeValues
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-o">
         -
        </span>
        <span class="crayon-cn">
         1
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-sy">
         ]
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbf718926517-21">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         outInfo
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetInformationObject
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Set
        </span>
        <span class="crayon-sy">
         (
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbf718926517-22">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         vtkStreamingDemandDrivenPipeline
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         TIME_RANGE
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         tr
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         2
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbf718926517-23">
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbf718926517-24">
        <span class="crayon-h">
        </span>
        <span class="crayon-st">
         return
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         1
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbf718926517-25">
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbf718926517-26">
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbf718926517-27">
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         def
        </span>
        <span class="crayon-e">
         RequestData
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         request
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         inInfo
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         outInfo
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-o">
         :
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbf718926517-28">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         info
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         inInfo
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetInformationObject
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbf718926517-29">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         inp
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         dsa
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         WrapDataObject
        </span>
        <span class="crayon-sy">
         (
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbf718926517-30">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         vtkUnstructuredGrid
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetData
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         info
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbf718926517-31">
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbf718926517-32">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         oinfo
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         outInfo
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetInformationObject
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbf718926517-33">
        <span class="crayon-h">
        </span>
        <span class="crayon-st">
         if
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         oinfo
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Has
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         vtkStreamingDemandDrivenPipeline
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         UPDATE_TIME_STEP
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-o">
         :
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbf718926517-34">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         ut
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         oinfo
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Get
        </span>
        <span class="crayon-sy">
         (
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbf718926517-35">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         vtkStreamingDemandDrivenPipeline
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         UPDATE_TIME_STEP
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbf718926517-36">
        <span class="crayon-h">
        </span>
        <span class="crayon-st">
         else
        </span>
        <span class="crayon-o">
         :
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbf718926517-37">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         ut
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         TimeValues
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ]
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbf718926517-38">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # Simply extract the particles where the Time Values array
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbf718926517-39">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # matches the requested time value.
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbf718926517-40">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         tvs
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         inp
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         PointData
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-s">
         'Time Values'
        </span>
        <span class="crayon-sy">
         ]
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbf718926517-41">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         newpts
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         dsa
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         numpyTovtkDataArray
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         inp
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         Points
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-v">
         np
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         where
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         tvs
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         ==
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         ut
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbf718926517-42">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         pts
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkPoints
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbf718926517-43">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         pts
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetData
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         newpts
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbf718926517-44">
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbf718926517-45">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         output
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         vtkUnstructuredGrid
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetData
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         outInfo
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbf718926517-46">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         output
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetPoints
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         pts
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbf718926517-47">
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dbf718926517-48">
        <span class="crayon-h">
        </span>
        <span class="crayon-st">
         return
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         1
        </span>
       </div>
      </div>
     </td>
    </tr>
   </table>
  </div>
 </div>
 <!-- [Format Time: 0.0023 seconds] -->
 <p>
  Very simple filter. It takes the entire collection of particles (which is essentially a collection of particle paths) and takes out the particles that belong to the requested time step. By the way, when you look at this filter, you probably understand better why I created the
  <span style="font-family: courier;">
   TIME_VALUES
  </span>
  meta-data and the
  <span style="font-family: courier;">
   “Time Values”
  </span>
  variable in the particle filter.\
 </p>
 <p>
  We can now change our pipeline a bit to generate an animation. Here is the code:
 </p>
 <!-- Crayon Syntax Highlighter v_2.7.2_beta -->
 <div class="crayon-syntax crayon-theme-coy crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c41e81486dc2119434266" style=" margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 25px !important;">
  <div class="crayon-plain-wrap">
   <textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 16px !important; line-height: 25px !important;" wrap="soft">
s = VelocitySource()

pa = ParticleAdvection()
pa.SetInputConnection(s.GetOutputPort())

anim = AnimateParticles()
anim.SetInputConnection(pa.GetOutputPort())
anim.Update()

renWin = vtk.vtkRenderWindow()
ren = vtk.vtkRenderer()
renWin.AddRenderer(ren)
s = vtk.vtkSphereSource()
s.SetRadius(0.03)
glyph = vtk.vtkGlyph3D()
glyph.SetInputConnection(anim.GetOutputPort())
glyph.SetSourceConnection(s.GetOutputPort())
glyph.SetScaleModeToDataScalingOff()
m = vtk.vtkPolyDataMapper()
m.SetInputConnection(glyph.GetOutputPort())
a = vtk.vtkActor()
a.SetMapper(m)
ren.AddActor(a)
renWin.SetSize(500, 500)
for time in t:
    glyph.GetOutputInformation(0).Set(
        vtk.vtkStreamingDemandDrivenPipeline.UPDATE_TIME_STEP(),
        time)
    glyph.Update()
    renWin.Render()</textarea>
  </div>
  <div class="crayon-main">
   <table class="crayon-table">
    <tr class="crayon-row">
     <td class="crayon-nums " data-settings="show">
      <div class="crayon-nums-content" style="font-size: 16px !important; line-height: 25px !important;">
       <div class="crayon-num" data-line="crayon-5c41e81486dc2119434266-1">
        1
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dc2119434266-2">
        2
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dc2119434266-3">
        3
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dc2119434266-4">
        4
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dc2119434266-5">
        5
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dc2119434266-6">
        6
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dc2119434266-7">
        7
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dc2119434266-8">
        8
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dc2119434266-9">
        9
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dc2119434266-10">
        10
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dc2119434266-11">
        11
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dc2119434266-12">
        12
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dc2119434266-13">
        13
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dc2119434266-14">
        14
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dc2119434266-15">
        15
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dc2119434266-16">
        16
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dc2119434266-17">
        17
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dc2119434266-18">
        18
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dc2119434266-19">
        19
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dc2119434266-20">
        20
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dc2119434266-21">
        21
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dc2119434266-22">
        22
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dc2119434266-23">
        23
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dc2119434266-24">
        24
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dc2119434266-25">
        25
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dc2119434266-26">
        26
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dc2119434266-27">
        27
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dc2119434266-28">
        28
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dc2119434266-29">
        29
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81486dc2119434266-30">
        30
       </div>
      </div>
     </td>
     <td class="crayon-code">
      <div class="crayon-pre" style="font-size: 16px !important; line-height: 25px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <div class="crayon-line" id="crayon-5c41e81486dc2119434266-1">
        <span class="crayon-v">
         s
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         VelocitySource
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dc2119434266-2">
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dc2119434266-3">
        <span class="crayon-v">
         pa
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         ParticleAdvection
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dc2119434266-4">
        <span class="crayon-v">
         pa
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetInputConnection
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         s
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetOutputPort
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dc2119434266-5">
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dc2119434266-6">
        <span class="crayon-v">
         anim
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         AnimateParticles
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dc2119434266-7">
        <span class="crayon-v">
         anim
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetInputConnection
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         pa
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetOutputPort
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dc2119434266-8">
        <span class="crayon-v">
         anim
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Update
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dc2119434266-9">
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dc2119434266-10">
        <span class="crayon-v">
         renWin
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkRenderWindow
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dc2119434266-11">
        <span class="crayon-v">
         ren
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkRenderer
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dc2119434266-12">
        <span class="crayon-v">
         renWin
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         AddRenderer
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         ren
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dc2119434266-13">
        <span class="crayon-v">
         s
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkSphereSource
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dc2119434266-14">
        <span class="crayon-v">
         s
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetRadius
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         0.03
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dc2119434266-15">
        <span class="crayon-v">
         glyph
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkGlyph3D
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dc2119434266-16">
        <span class="crayon-v">
         glyph
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetInputConnection
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         anim
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetOutputPort
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dc2119434266-17">
        <span class="crayon-v">
         glyph
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetSourceConnection
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         s
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetOutputPort
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dc2119434266-18">
        <span class="crayon-v">
         glyph
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetScaleModeToDataScalingOff
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dc2119434266-19">
        <span class="crayon-v">
         m
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkPolyDataMapper
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dc2119434266-20">
        <span class="crayon-v">
         m
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetInputConnection
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         glyph
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetOutputPort
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dc2119434266-21">
        <span class="crayon-v">
         a
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkActor
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dc2119434266-22">
        <span class="crayon-v">
         a
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetMapper
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         m
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dc2119434266-23">
        <span class="crayon-v">
         ren
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         AddActor
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         a
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dc2119434266-24">
        <span class="crayon-v">
         renWin
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetSize
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         500
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         500
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dc2119434266-25">
        <span class="crayon-st">
         for
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         time
        </span>
        <span class="crayon-st">
         in
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         t
        </span>
        <span class="crayon-o">
         :
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dc2119434266-26">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         glyph
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetOutputInformation
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Set
        </span>
        <span class="crayon-sy">
         (
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dc2119434266-27">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         vtkStreamingDemandDrivenPipeline
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         UPDATE_TIME_STEP
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ,
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dc2119434266-28">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         time
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dc2119434266-29">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         glyph
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Update
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81486dc2119434266-30">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         renWin
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Render
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
      </div>
     </td>
    </tr>
   </table>
  </div>
 </div>
 <!-- [Format Time: 0.0009 seconds] -->
 <p>
  The output looks like this (click to animate):
 </p>
 <p>
  <img alt="Animation" src="https://blog.kitware.com/blog/files/53_1664740018.png" style="margin-left: auto; margin-right: auto;"/>
 </p>
 <p>
  That’s it folks. We’ll dig into other types of streaming in the future.
 </p>
</div>
