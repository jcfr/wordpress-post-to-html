<meta charset="utf-8">
<div class="entry-content">
 <div class="wp-caption aligncenter" id="attachment_17427" style="width: 996px">
  <img class="wp-image-17427 size-full" height="674" sizes="(max-width: 986px) 100vw, 986px" src="https://blog.kitware.com/wp-content/uploads/2017/03/diskoutref2-streamlines.png" srcset="https://blog.kitware.com/wp-content/uploads/2017/03/diskoutref2-streamlines.png 986w, https://blog.kitware.com/wp-content/uploads/2017/03/diskoutref2-streamlines-300x205.png 300w, https://blog.kitware.com/wp-content/uploads/2017/03/diskoutref2-streamlines-768x525.png 768w, https://blog.kitware.com/wp-content/uploads/2017/03/diskoutref2-streamlines-220x150.png 220w, https://blog.kitware.com/wp-content/uploads/2017/03/diskoutref2-streamlines-250x171.png 250w, https://blog.kitware.com/wp-content/uploads/2017/03/diskoutref2-streamlines-355x243.png 355w, https://blog.kitware.com/wp-content/uploads/2017/03/diskoutref2-streamlines-730x499.png 730w, https://blog.kitware.com/wp-content/uploads/2017/03/diskoutref2-streamlines-90x62.png 90w" width="986"/>
  <p class="wp-caption-text">
   Figure 1 – The new Stream Lines representation display animated streamlines using a vector field defined on a dataset.
  </p>
 </div>
 <p>
  We are proud to introduce you a new cool feature that will be available in ParaView 5.3.
 </p>
 <p>
  This feature comes with the
  <strong>
   StreamLinesRepresentation
  </strong>
  plugin which provides a new representation called “
  <strong>
   Stream Lines
  </strong>
  “. This representation that can deal with any kind of data set and takes benefit of the new OpenGL2 back-end of VTK.
 </p>
 <h4>
  <span style="color: #000080">
   The Stream Lines Representation
  </span>
 </h4>
 <p>
  The representation displays an animated view of streamlines in a vector field associated to cells or points of the dataset. The streamline seeds are initialized randomly in the bounds of the domain and recreated each time one particle dies (time to live – ie, max number of iterations – is reached, out-of-domain or zero velocity).
  <br/>
  The UI panel allows to specify:
 </p>
 <ul>
  <li>
   <strong>
    Vectors
   </strong>
   : the vector field array (mandatory).
  </li>
  <li>
   <strong>
    Alpha
   </strong>
   : the rate of fading (depends on MaxTimeToLive, 0: no trace, 1: trace will fade as long as TimeToLive).
  </li>
  <li>
   <strong>
    Step Length
   </strong>
   : the normalized integration step – allow to adjust particle speed.
  </li>
  <li>
   <strong>
    Number Of Particles
   </strong>
   : the number of simulated particles in the flow.
  </li>
  <li>
   <strong>
    Max Time To Live
   </strong>
   : the maximum number of iteration a particle moves before it dies.
  </li>
  <li>
   <strong>
    Animate
   </strong>
   : allow to turn ON or OFF the streamlines animation – when turned OFF, lines will be visible until the camera is changed.
  </li>
 </ul>
 <p>
  The
  <strong>
   Color
  </strong>
  (solid color or depending on a data array, see Figure 2) and
  <strong>
   Line Width
  </strong>
  can also be changed using default ParaView UI widgets.
 </p>
 <div class="wp-caption aligncenter" id="attachment_17507" style="width: 360px">
  <img alt="Animation on disk_out_ref.ex2" class="wp-image-17507 size-full" height="302" src="https://blog.kitware.com/wp-content/uploads/2017/03/disk305x302.gif" width="350"/>
  <p class="wp-caption-text">
   Figure 2 – disk_out_ref.ex2 dataset with V as Vectors, and
   <span class="tL8wMe EMoHub" dir="ltr" id=":3w.co">
    Pres
   </span>
   sure Coloring.
  </p>
 </div>
 <p>
  The streamlines are continuously updated implying a infinite rendering loop of the whole view to which to representation belongs.
  <br/>
  Technically speaking, we added a new class that observes all pqRenderView. When a rendering on such a view is finished, it checks all existing representations and search for a visible StreamLines representation. If found, a new still render pass is requested.
 </p>
 <h4>
  <span style="color: #000080">
   Known Limitations
  </span>
 </h4>
 <ul>
  <li>
   So far, this new representation only works in local rendering mode – it does not work in parallel.
  </li>
  <li>
   The streamlines are reset when camera settings change: this is a side effect of the efficient rendering mechanism involved here: particle tracks are accumulated in a 2D buffer.  At each time step, new track segments are computed, per particle, between their previous and new position. The final image is a blending new tracks and the image obtained at previous iteration. To make it consistent, this image buffer mechanism assumes a still camera.
  </li>
 </ul>
 <h4>
  <span style="color: #000080">
   How to Test?
  </span>
 </h4>
 <p>
  Here is an simple way to test this new feature:
  <br/>
  1.  Load the plugin “StreamLinesRepresentation”, enable the AutoLoad checkbox for it and restart ParaView (if you don’t, stream lines will not correctly animate).
  <br/>
  2. Create a “Wavelet” source. Apply a “Gradient” filter on it.
  <br/>
  3. Switch representation from “Outline” to “Stream Lines”.
  <br/>
  4. Play with the StreamLines options in the Representation panel.
  <br/>
  5. Change the Coloring array – see Figure 3.
 </p>
 <p>
 </p>
 <div class="wp-caption aligncenter" id="attachment_17445" style="width: 410px">
  <img class="wp-image-17445 size-full" height="400" src="https://blog.kitware.com/wp-content/uploads/2017/03/sl1.gif" width="400"/>
  <p class="wp-caption-text">
   Figure 3 – RTData Gradients vector field in a Wavelet source.
  </p>
 </div>
 <p>
 </p>
 <p>
 </p>
 <p>
  Another cool demo is to load the disk_out_ref.ex2 dataset with the V vector point data array – see Figure 1 and 2.
 </p>
 <p>
  Here is a video capture of those animated streamlines on a “real” case:
 </p>
 <div class="wp-video" style="width: 1290px;">
  <!--[if lt IE 9]><script>document.createElement('video');</script><![endif]-->
  <video class="wp-video-shortcode" controls="controls" height="924" id="video-17425-1" preload="metadata" width="1290">
   <source src="https://blog.kitware.com/wp-content/uploads/2017/03/Demo_Streamlines2-cropped.mp4?_=1" type="video/mp4"/>
   <a href="https://blog.kitware.com/wp-content/uploads/2017/03/Demo_Streamlines2-cropped.mp4">
    https://blog.kitware.com/wp-content/uploads/2017/03/Demo_Streamlines2-cropped.mp4
   </a>
  </video>
 </div>
 <p>
 </p>
 <p style="text-align: center">
  <strong>
   This work was supported by Total SA.
   <br/>
  </strong>
 </p>
 <p>
  <img alt="" class="wp-image-17429 aligncenter" height="74" sizes="(max-width: 305px) 100vw, 305px" src="https://blog.kitware.com/wp-content/uploads/2017/03/logo_total_37.png" srcset="https://blog.kitware.com/wp-content/uploads/2017/03/logo_total_37.png 574w, https://blog.kitware.com/wp-content/uploads/2017/03/logo_total_37-300x73.png 300w, https://blog.kitware.com/wp-content/uploads/2017/03/logo_total_37-220x53.png 220w, https://blog.kitware.com/wp-content/uploads/2017/03/logo_total_37-250x61.png 250w, https://blog.kitware.com/wp-content/uploads/2017/03/logo_total_37-355x86.png 355w, https://blog.kitware.com/wp-content/uploads/2017/03/logo_total_37-90x22.png 90w" width="305"/>
 </p>
 <p style="text-align: center">
  <strong>
   Developments were done by Kitware SAS, France.
  </strong>
  <img alt="" class="wp-image-17450 aligncenter" height="56" sizes="(max-width: 217px) 100vw, 217px" src="https://blog.kitware.com/wp-content/uploads/2017/03/kitware_logo.png" srcset="https://blog.kitware.com/wp-content/uploads/2017/03/kitware_logo.png 443w, https://blog.kitware.com/wp-content/uploads/2017/03/kitware_logo-300x77.png 300w, https://blog.kitware.com/wp-content/uploads/2017/03/kitware_logo-220x57.png 220w, https://blog.kitware.com/wp-content/uploads/2017/03/kitware_logo-250x64.png 250w, https://blog.kitware.com/wp-content/uploads/2017/03/kitware_logo-355x91.png 355w, https://blog.kitware.com/wp-content/uploads/2017/03/kitware_logo-90x23.png 90w" width="217"/>
 </p>
 <p>
 </p>
 <p>
  <img alt="" class="size-full wp-image-17435 alignleft" height="150" sizes="(max-width: 125px) 100vw, 125px" src="https://blog.kitware.com/wp-content/uploads/2017/03/jpouderoux.png" srcset="https://blog.kitware.com/wp-content/uploads/2017/03/jpouderoux.png 125w, https://blog.kitware.com/wp-content/uploads/2017/03/jpouderoux-90x108.png 90w" width="125"/>
  <strong>
   Joachim Pouderoux
  </strong>
  is a Technical Expert at Kitware, France. He is a developer of VTK and ParaView since 2012. His areas of expertise include scientific visualization, computer graphics, interaction techniques, Voronoi meshing and software development.
 </p>
 <p>
 </p>
 <p>
 </p>
 <p>
 </p>
 <p>
  <img alt="" class="size-full wp-image-17436 alignleft" height="150" sizes="(max-width: 125px) 100vw, 125px" src="https://blog.kitware.com/wp-content/uploads/2017/03/bjacquet.png" srcset="https://blog.kitware.com/wp-content/uploads/2017/03/bjacquet.png 125w, https://blog.kitware.com/wp-content/uploads/2017/03/bjacquet-90x108.png 90w" width="125"/>
  <strong>
   Bastien Jacquet
  </strong>
  is a Technical Leader at Kitware, France. Since 2016, he promotes and extends Kitware’s Computer Vision expertise in Europe. He has experience in various Computer Vision subdomains, and he is an expert in 3D Reconstruction and related mathematical tools.
 </p>
</div>
