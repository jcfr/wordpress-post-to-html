<meta charset="utf-8">
<div class="entry-content">
 <p>
  In the previous posts (
  <a href="https://blog.kitware.com/using-the-color-map-editor-in-paraview-the-basics/">
   [1]
  </a>
  ,
  <a href="https://blog.kitware.com/using-the-color-map-editor-in-paraview-the-annotations/">
   [2]
  </a>
  ), we covered several aspects on using the
  <strong>
   Color Map Editor
  </strong>
  panel in ParaView introduced in version 4.1. In this final installment in the series, we take a look at categorical colors and how they can be useful for certain visualization use-cases.
 </p>
 <h3>
  Overview
 </h3>
 <hr/>
 <p>
  A picture is worth a thousand words, they say, so let’s just let the picture do the talking. Categorical color maps allow you to render visualizations as shown in Figure 1.
 </p>
 <p>
  <center>
   <a href="/blog/files/48_179691811.jpg" rel="noopener" target="_blank">
    <img alt="" src="https://blog.kitware.com/blog/files/48_179691811.jpg" width="70%"/>
   </a>
   <br/>
   <strong>
    Figure 1: Visualization using a categorical color map for discrete coloring
   </strong>
  </center>
  When one thinks of scalar coloring, one is typically talking of mapping numerical values to colors. However, in some cases the numerical values are not really numbers, but enumerations such as elements types, or gear types (as in Figure 1), or generally speaking, categories. The traditional approach of using an interpolated color map specifying range of values to color with doesn’t really work here. While users could always play tricks with number of discrete steps, multiple control points, and annotations, it is tedious and cumbersome.
 </p>
 <p>
  Categorical color maps, introduced in 4.0.1, provide an elegant solution for such cases. Instead of a continuous color transfer function, user specifies a set of discrete values and colors to use for those values. For any element where the data value
  <em>
   exactly
  </em>
  matches the values in the lookup table, ParaView renders the specified color, otherwise the NaN color is used.
 </p>
 <p>
  The color legend or scalar bar also switches to a new mode where it renders swatches with annotations, rather than a single bar. Users can add custom annotations for each value in the lookup table.
 </p>
 <h3>
  The User Interface
 </h3>
 <hr/>
 <p>
  To tell ParaView that the data array is to be treated as categories for coloring check the
  <strong>
   Interpret Values As Categories
  </strong>
  checkbox in the Color Map Editor panel. As soon that’s checked, the panel switches to categorical mode: the
  <strong>
   Mapping Data
  </strong>
  group is hidden and
  <strong>
   Annotations
  </strong>
  group becomes a non-advanced group i.e. the annotations widget is visible even if the panel is not showing advanced properties, as shown in Figure 2.
 </p>
 <p>
  <center>
   <a href="/blog/files/48_60245226.png" rel="noopener" target="_blank">
    <img alt="" src="https://blog.kitware.com/blog/files/48_60245226.png" width="90%"/>
   </a>
   <br/>
   <strong>
    Figure 2: Default Color Map Editor when
    <em>
     Interpret Values As Categories
    </em>
    is checked
   </strong>
  </center>
  The annotations widget will still show any annotations that may have been added earlier, or be empty if none were added. One can add annotations for data values as before using the buttons on the side of the widget. This time, however, each annotation entry also has a column for color. If no color has been specified, a question mark icon will show up, otherwise a color swatch will be shown. One can double click the color swatch or the question mark icon to specify the color to use for that entry. Alternatively, one can choose from a preset collection of categorical color maps by clicking the
  <strong>
   Choose preset
  </strong>
  button.
 </p>
 <p>
  <center>
   <a href="/blog/files/48_613476352.png" rel="noopener" target="_blank">
    <img alt="" src="https://blog.kitware.com/blog/files/48_613476352.png" width="40%"/>
   </a>
   <br/>
   <strong>
    Figure 3: Choose preset dialog for categorical color maps
   </strong>
  </center>
  As
  <a href="https://blog.kitware.com/using-the-color-map-editor-in-paraview-the-annotations/">
   before
  </a>
  , one can use
  <em>
   Tab
  </em>
  key to edit and add multiple values. Hence, one can first add all the values of interest in one pass and then pick a preset color map to set colors for the values added. If preset has fewer colors that the annotated values, then user may have to manually set the colors for those extra annotations.
 </p>
 <p>
  Also
  <strong>
   Add active values
  </strong>
  plays the same role as described in
  <a href="https://blog.kitware.com/using-the-color-map-editor-in-paraview-the-annotations/">
   previous post
  </a>
  : fill the annotations widget with unique discrete values from the data array, is possible. Based on the number of distinct values present in the data array, this may not yield any result (instead a warning message will be shown).
 </p>
 <p>
  To see how to use categorical colors for coloring contours, check out my
  <a href="https://blog.kitware.com/coloring-contours-in-paraview/">
   previous blog post
  </a>
  .
 </p>
 <h3>
  Caveats
 </h3>
 <hr/>
 <p>
  Categorical color maps are designed for data arrays with enumerations which are typically integer arrays. However they can be used for arrays with floating point number as well. However with floating point numbers, the value specified for annotation may not exactly match the value in the dataset even when the user expected it to match. In that case, the NaN color will be used. In future, we may add a mechanism to specify a delta to use to when comparing data values to annotated values.
 </p>
 <h3>
  Wrap-Up
 </h3>
 <hr/>
 <p>
  That is pretty much it! And as always, if you have any suggestions, feel free to use the
  <a href="http://www.paraview.org/paraview/help/mailing.html">
   mailing lists
  </a>
  or
  <a href="http://paraview.uservoice.com">
   user-voice
  </a>
  to bring them up.
 </p>
</div>
