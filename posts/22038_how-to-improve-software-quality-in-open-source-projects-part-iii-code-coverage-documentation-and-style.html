<meta charset="utf-8">
<div class="entry-content">
 <p style="text-align: center;">
  <strong>
   Index To the Series
  </strong>
  <br/>
  1.
  <a href="https://blog.kitware.com/how-to-improve-software-quality-in-open-source-projects-part-i-overview-of-continuous-integration-ci-and-software-process-in-pynwb/">
   Overview of Continuous Integration (CI) and Software Process in PyNWB
  </a>
  <br/>
  2.
  <a href="https://blog.kitware.com/improving-software-quality-in-open-source-projects-part-ii-packaging-pynwb-for-multiple-operating-systems-and-python-versions/">
   Packaging PyNWB for Multiple Operating Systems and Python Versions
   <br/>
  </a>
  3.
  <a href="https://blog.kitware.com/how-to-improve-software-quality-in-open-source-projects-part-iii-code-coverage-documentation-and-style">
   Code Coverage, Documentation and Style
  </a>
 </p>
 <hr/>
 <p>
  <span style="font-weight: 400;">
   In the
  </span>
  <a href="https://blog.kitware.com/improving-software-quality-in-open-source-projects-part-ii-packaging-pynwb-for-multiple-operating-systems-and-python-versions/">
   <span style="font-weight: 400;">
    second post
   </span>
  </a>
  <span style="font-weight: 400;">
   in our series, we talked about Python 2 and Python 3 support, cross-platform operating system support, source distributions and dependency versioning. In this post, we introduce code coverage metrics, code documentation and consistent style for
  </span>
  <a href="https://github.com/NeurodataWithoutBorders/pynwb" rel="noopener" target="_blank">
   <span style="font-weight: 400;">
    PyNWB
   </span>
  </a>
  <span style="font-weight: 400;">
   .
  </span>
 </p>
 <h2>
  <span style="font-weight: 400;">
   Code Coverage Metrics
  </span>
 </h2>
 <p>
  <span style="font-weight: 400;">
   Code coverage is a measurement that highlights which lines of code are reviewed (or covered) by tests, and it helps to prioritize future test development. Just because a line of code is covered by tests, however, does not mean the line is correct. As
  </span>
  <a href="https://en.wikiquote.org/wiki/Edsger_W._Dijkstra" rel="noopener" target="_blank">
   <span style="font-weight: 400;">
    Edsger W. Dijkstra
   </span>
  </a>
  <span style="font-weight: 400;">
   said, “Testing never proves the absence of faults, it only shows their presence.”
  </span>
 </p>
 <p>
  <span style="font-weight: 400;">
   For PyNWB, the project’s
  </span>
  <a href="https://github.com/NeurodataWithoutBorders/pynwb/blob/dev/.travis.yml" rel="noopener" target="_blank">
   <span style="font-weight: 400;">
    Travis CI file
   </span>
  </a>
  <span style="font-weight: 400;">
   runs tests on macOS. As the file currently indicates, the tests review Python versions 2.7 and 3.6. The “script” portion of the file actually runs the tests.
  </span>
 </p>
 <p>
  <span style="font-weight: 400;">
   PyNWB’s
  </span>
  <a href="https://github.com/NeurodataWithoutBorders/pynwb/blob/dev/tox.ini#L48-L52" rel="noopener" target="_blank">
   <span style="font-weight: 400;">
    tox file
   </span>
  </a>
  <span style="font-weight: 400;">
   includes commands that provide coverage reports as a part of the continuous integration (CI) process. To archive, aggregate and visualize the coverage reports, we use
  </span>
  <a href="https://docs.codecov.io/" rel="noopener" target="_blank">
   <span style="font-weight: 400;">
    Codecov
   </span>
  </a>
  <span style="font-weight: 400;">
   . Codecov is also tied to the CI process. It posts coverage report updates directly into the view of a pull request on GitHub, using tags to aggregate coverage across different test suites such as unit and integration testing.
  </span>
 </p>
 <p>
  <span style="font-weight: 400;">
   Codecov provides separate reports for each tag. In the following report, red specifies lines that were not covered by the tests, and green specifies lines that were executed during one or more tests. Lines that are not colored were ignored by the tests (e.g., comments, function definitions, etc.).
  </span>
 </p>
 <div class="wp-caption aligncenter" id="attachment_22040" style="width: 620px">
  <img alt="" class="size-full wp-image-22040" height="168" sizes="(max-width: 610px) 100vw, 610px" src="http://blog.kitware.com/wp-content/uploads/2018/04/Report.png" srcset="https://blog.kitware.com/wp-content/uploads/2018/04/Report.png 610w, https://blog.kitware.com/wp-content/uploads/2018/04/Report-300x83.png 300w, https://blog.kitware.com/wp-content/uploads/2018/04/Report-220x61.png 220w, https://blog.kitware.com/wp-content/uploads/2018/04/Report-250x69.png 250w, https://blog.kitware.com/wp-content/uploads/2018/04/Report-355x98.png 355w, https://blog.kitware.com/wp-content/uploads/2018/04/Report-90x25.png 90w" width="610"/>
  <p class="wp-caption-text">
   A report colors lines of code based on results from a Codecov run on PyNWB.
  </p>
 </div>
 <p>
  <span style="font-weight: 400;">
   Note that while full coverage does not mean perfection, a high coverage rate is better than a low one.
  </span>
 </p>
 <h2>
  <span style="font-weight: 400;">
   Code Documentation
  </span>
 </h2>
 <p>
  <span style="font-weight: 400;">
   Good documentation is key for a successful software project, especially an open source project, as there may be new developers who need to quickly get up to speed, and there is little friction that prevents users from adopting alternate software. Documentation is also a good proxy to indicate if a software project is actually intended to be long lived and to support growth and inclusion, or if the project is intended to serve a particular purpose and may soon be abandoned.
  </span>
 </p>
 <p>
  <span style="font-weight: 400;">
   PyNWB
  </span>
  <a href="https://pynwb.readthedocs.io/en/latest/" rel="noopener" target="_blank">
   <span style="font-weight: 400;">
    documentation
   </span>
  </a>
  <span style="font-weight: 400;">
   is automatically generated and published each time changes are integrated into the main branch. To support these capabilities, we use webhooks;
  </span>
  <a href="https://readthedocs.org/" rel="noopener" target="_blank">
   <span style="font-weight: 400;">
    Read the Docs
   </span>
  </a>
  <span style="font-weight: 400;">
   , which is freely available for open source projects; and
  </span>
  <a href="http://sphinx-doc.org/" rel="noopener" target="_blank">
   <span style="font-weight: 400;">
    Sphinx
   </span>
  </a>
  <span style="font-weight: 400;">
   .
  </span>
 </p>
 <p>
  <span style="font-weight: 400;">
   In our previous post, we mentioned that we activate integration between GitHub and CI services with webhooks. A webhook is very simply an HTTP callback that gets triggered after an event is fired such as an update to the main branch. The callback notifies Read the Docs that the event occurred. After the update gets triggered, Sphinx builds the HTML from the function docstrings, along with the restructured text files that we added for the update. Read the Docs then gets modified to show the updated documentation.
  </span>
 </p>
 <h2>
  <span style="font-weight: 400;">
   Consistent Style
  </span>
 </h2>
 <p>
  <span style="font-weight: 400;">
   Style tools reduce the possibility of bugs, make it easier for developers to contribute code and improve the consistency of an overall package. They do so through constraints. Setting a maximum value for
  </span>
  <a href="https://en.wikipedia.org/wiki/Cyclomatic_complexity" rel="noopener" target="_blank">
   <span style="font-weight: 400;">
    cyclomatic complexity
   </span>
  </a>
  <span style="font-weight: 400;">
   , for example, requires that certain functions be refactored before they can be merged into the main repository.
  </span>
 </p>
 <p>
  <span style="font-weight: 400;">
   An example style tool is
  </span>
  <a href="http://flake8.pycqa.org/en/latest/" rel="noopener" target="_blank">
   <span style="font-weight: 400;">
    Flake8
   </span>
  </a>
  <span style="font-weight: 400;">
   . Flake8 provides static code analysis and code style checks to catch mistakes. Flake8 checks integrate with CI vendors to ensure that pull requests follow style requirements. If Flake8 checks fail for CI, the code will not be merged until the style issues are fixed.
  </span>
 </p>
 <p>
  <span style="font-weight: 400;">
   Another free style tool is
  </span>
  <a href="https://github.com/pep8speaks" rel="noopener" target="_blank">
   <span style="font-weight: 400;">
    PEP8 Speaks
   </span>
  </a>
  <span style="font-weight: 400;">
   , which we use for PyNWB. PEP8 Speaks runs PEP8 tests, and a bot comments on the pull request to show the specific lines that violate the style rules. An example is the image below.
  </span>
 </p>
 <div class="wp-caption aligncenter" id="attachment_22042" style="width: 346px">
  <img alt="" class="wp-image-22042 size-full" height="144" sizes="(max-width: 336px) 100vw, 336px" src="http://blog.kitware.com/wp-content/uploads/2018/04/PEP8-Speaks-Comment-Issues.png" srcset="https://blog.kitware.com/wp-content/uploads/2018/04/PEP8-Speaks-Comment-Issues.png 336w, https://blog.kitware.com/wp-content/uploads/2018/04/PEP8-Speaks-Comment-Issues-300x129.png 300w, https://blog.kitware.com/wp-content/uploads/2018/04/PEP8-Speaks-Comment-Issues-220x94.png 220w, https://blog.kitware.com/wp-content/uploads/2018/04/PEP8-Speaks-Comment-Issues-250x107.png 250w, https://blog.kitware.com/wp-content/uploads/2018/04/PEP8-Speaks-Comment-Issues-90x39.png 90w" width="336"/>
  <p class="wp-caption-text">
   A sample PEP8 Speaks comment shows style violations.
  </p>
 </div>
 <p>
  <span style="font-weight: 400;">
   Once the violations are fixed in the pull request, PEP8 Speaks posts another comment, which declares that the pull request is compliant in terms of style.
  </span>
 </p>
 <div class="wp-caption aligncenter" id="attachment_22043" style="width: 431px">
  <img alt="" class="size-full wp-image-22043" height="153" sizes="(max-width: 421px) 100vw, 421px" src="http://blog.kitware.com/wp-content/uploads/2018/04/PEP-8-Speaks-Comment-No-Issues.png" srcset="https://blog.kitware.com/wp-content/uploads/2018/04/PEP-8-Speaks-Comment-No-Issues.png 421w, https://blog.kitware.com/wp-content/uploads/2018/04/PEP-8-Speaks-Comment-No-Issues-300x109.png 300w, https://blog.kitware.com/wp-content/uploads/2018/04/PEP-8-Speaks-Comment-No-Issues-220x80.png 220w, https://blog.kitware.com/wp-content/uploads/2018/04/PEP-8-Speaks-Comment-No-Issues-250x91.png 250w, https://blog.kitware.com/wp-content/uploads/2018/04/PEP-8-Speaks-Comment-No-Issues-355x129.png 355w, https://blog.kitware.com/wp-content/uploads/2018/04/PEP-8-Speaks-Comment-No-Issues-90x33.png 90w" width="421"/>
  <p class="wp-caption-text">
   A pull request is marked as PEP8 compliant.
  </p>
 </div>
 <h2>
  <span style="font-weight: 400;">
   Software Process Importance
  </span>
 </h2>
 <p>
  <span style="font-weight: 400;">
   Code coverage metrics, code documentation and consistent style are important when it comes to community adoption of your project. These concepts support consistency in the code base; they make it easier for developers to start contributing, understand the codebase and comply with your project’s requirements; and they show your project’s commitment to long-term success, which welcomes contributions.
  </span>
 </p>
 <p>
  <span style="font-weight: 400;">
   At Kitware, we are firmly committed to software process to ensure high-quality, effective code. We encourage you to also adopt such practices and hope that this tutorial series provides a useful guide. If you have questions as you proceed, please reach out to us, and let us know how we can help.
  </span>
 </p>
</div>
