<meta charset="utf-8">
<div class="entry-content">
 <p>
  In my
  <a href="https://blog.kitware.com/streaming-in-vtk-spatial/">
   last blog
  </a>
  , I talked about spatial streaming in VTK. The example I covered demonstrated how a pipeline consisting of a structured data source and a contour filter can be streamed in smaller chunks to create a collection of polydata objects, which can then be rendered. The downside of this approach is that the entirety of the contour geometry needs to be stored in memory for rendering. One way of getting around this limitation is to stream into a view. Here is an example.
 </p>
 <!-- Crayon Syntax Highlighter v_2.7.2_beta -->
 <div class="crayon-syntax crayon-theme-coy crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c41e80999735567310306" style=" margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 25px !important;">
  <div class="crayon-plain-wrap">
   <textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 16px !important; line-height: 25px !important;" wrap="soft">
from vtk.numpy_interface import dataset_adapter as dsa
from vtk.util.vtkAlgorithm import VTKPythonAlgorithmBase
import vtk
import numpy as np

class StreamExtents(VTKPythonAlgorithmBase):
    def __init__(self):
        VTKPythonAlgorithmBase.__init__(self,
            nInputPorts=1, inputType='vtkImageData',
            nOutputPorts=0)

        self.Contour = vtk.vtkContourFilter()
        self.Contour.SetValue(0, 180)
        self.UpdateIndex = 0
        self.NumberOfBlocks = 20

        self.Mapper = vtk.vtkPolyDataMapper()
        self.Mapper.SetScalarRange(0, 20)

        actor = vtk.vtkActor()
        actor.SetMapper(self.Mapper)

        ren = vtk.vtkRenderer()
        ren.AddActor(actor)

        self.RenWin = vtk.vtkRenderWindow()
        self.RenWin.AddRenderer(ren)
        self.RenWin.Render()
        ren.GetActiveCamera().SetPosition(0, 0, 400)
        self.RenWin.SetSize(600, 600)
        # This allows us to stream into the view. OpenGL
        # takes care of compositing using the z-buffer
        # when Erase is set to off.
        self.RenWin.EraseOff()
        self.RenWin.DoubleBufferOff()

    def RequestUpdateExtent(self, request, inInfo, outInfo):
        info = inInfo[0].GetInformationObject(0)
        # Ask for the next extent.
        info.Set(
            vtk.vtkStreamingDemandDrivenPipeline.UPDATE_NUMBER_OF_PIECES(),
            self.NumberOfBlocks)
        info.Set(
            vtk.vtkStreamingDemandDrivenPipeline.UPDATE_PIECE_NUMBER(),
            self.UpdateIndex)
        return 1

    def RequestData(self, request, inInfo, outInfo):
        info = inInfo[0].GetInformationObject(0)
        inp = dsa.WrapDataObject(vtk.vtkDataSet.GetData(info))

        self.Contour.SetInputData(inp.VTKObject)
        self.Contour.Update()
        contour = dsa.WrapDataObject(self.Contour.GetOutput())
        rtdata = contour.PointData['RTData']
        color = np.empty_like(rtdata)
        color[:] = self.UpdateIndex
        contour.PointData.append(color, "color")
        contour.PointData.SetActiveScalars("color")

        self.Mapper.SetInputData(contour.VTKObject)
        self.RenWin.Render()

        if self.UpdateIndex &lt; self.NumberOfBlocks - 1:
            # If we are not done, ask the pipeline to re-execute us.
            self.UpdateIndex += 1
            request.Set(
                vtk.vtkStreamingDemandDrivenPipeline.CONTINUE_EXECUTING(),
                1)
        else:
            # Stop execution
            request.Remove(
                vtk.vtkStreamingDemandDrivenPipeline.CONTINUE_EXECUTING())
            # Reset for next potential execution.
            self.UpdateIndex = 0

            w2i = vtk.vtkWindowToImageFilter()
            w2i.SetInput(self.RenWin)

            w = vtk.vtkPNGWriter()
            w.SetInputConnection(w2i.GetOutputPort())
            w.SetFileName("composite1.png")
            w.Write()

        return 1

w = vtk.vtkRTAnalyticSource()
w.SetWholeExtent(-100, 100, -100, 100, -100, 100)

s = StreamExtents()
s.SetInputConnection(w.GetOutputPort())

s.Update()</textarea>
  </div>
  <div class="crayon-main">
   <table class="crayon-table">
    <tr class="crayon-row">
     <td class="crayon-nums " data-settings="show">
      <div class="crayon-nums-content" style="font-size: 16px !important; line-height: 25px !important;">
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-1">
        1
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-2">
        2
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-3">
        3
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-4">
        4
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-5">
        5
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-6">
        6
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-7">
        7
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-8">
        8
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-9">
        9
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-10">
        10
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-11">
        11
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-12">
        12
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-13">
        13
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-14">
        14
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-15">
        15
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-16">
        16
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-17">
        17
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-18">
        18
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-19">
        19
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-20">
        20
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-21">
        21
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-22">
        22
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-23">
        23
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-24">
        24
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-25">
        25
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-26">
        26
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-27">
        27
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-28">
        28
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-29">
        29
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-30">
        30
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-31">
        31
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-32">
        32
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-33">
        33
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-34">
        34
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-35">
        35
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-36">
        36
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-37">
        37
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-38">
        38
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-39">
        39
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-40">
        40
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-41">
        41
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-42">
        42
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-43">
        43
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-44">
        44
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-45">
        45
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-46">
        46
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-47">
        47
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-48">
        48
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-49">
        49
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-50">
        50
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-51">
        51
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-52">
        52
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-53">
        53
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-54">
        54
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-55">
        55
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-56">
        56
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-57">
        57
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-58">
        58
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-59">
        59
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-60">
        60
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-61">
        61
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-62">
        62
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-63">
        63
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-64">
        64
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-65">
        65
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-66">
        66
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-67">
        67
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-68">
        68
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-69">
        69
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-70">
        70
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-71">
        71
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-72">
        72
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-73">
        73
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-74">
        74
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-75">
        75
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-76">
        76
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-77">
        77
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-78">
        78
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-79">
        79
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-80">
        80
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-81">
        81
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-82">
        82
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-83">
        83
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-84">
        84
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-85">
        85
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-86">
        86
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-87">
        87
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-88">
        88
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-89">
        89
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-90">
        90
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-91">
        91
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-92">
        92
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999735567310306-93">
        93
       </div>
      </div>
     </td>
     <td class="crayon-code">
      <div class="crayon-pre" style="font-size: 16px !important; line-height: 25px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <div class="crayon-line" id="crayon-5c41e80999735567310306-1">
        <span class="crayon-e">
         from
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         numpy_interface
        </span>
        <span class="crayon-e">
         import
        </span>
        <span class="crayon-e">
         dataset_adapter
        </span>
        <span class="crayon-st">
         as
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         dsa
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-2">
        <span class="crayon-e">
         from
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         util
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkAlgorithm
        </span>
        <span class="crayon-e">
         import
        </span>
        <span class="crayon-e">
         VTKPythonAlgorithmBase
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-3">
        <span class="crayon-e">
         import
        </span>
        <span class="crayon-e">
         vtk
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-4">
        <span class="crayon-e">
         import
        </span>
        <span class="crayon-e">
         numpy
        </span>
        <span class="crayon-st">
         as
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         np
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-5">
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-6">
        <span class="crayon-t">
         class
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         StreamExtents
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         VTKPythonAlgorithmBase
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-o">
         :
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-7">
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         def
        </span>
        <span class="crayon-e">
         __init__
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-o">
         :
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-8">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         VTKPythonAlgorithmBase
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         __init__
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         ,
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-9">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         nInputPorts
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-cn">
         1
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         inputType
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-s">
         'vtkImageData'
        </span>
        <span class="crayon-sy">
         ,
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-10">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         nOutputPorts
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-11">
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-12">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         Contour
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkContourFilter
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-13">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         Contour
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetValue
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         180
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-14">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         UpdateIndex
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         0
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-15">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         NumberOfBlocks
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         20
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-16">
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-17">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         Mapper
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkPolyDataMapper
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-18">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         Mapper
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetScalarRange
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         20
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-19">
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-20">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         actor
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkActor
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-21">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         actor
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetMapper
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         Mapper
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-22">
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-23">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         ren
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkRenderer
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-24">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         ren
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         AddActor
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         actor
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-25">
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-26">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         RenWin
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkRenderWindow
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-27">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         RenWin
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         AddRenderer
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         ren
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-28">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         RenWin
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Render
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-29">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         ren
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetActiveCamera
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetPosition
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         400
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-30">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         RenWin
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetSize
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         600
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         600
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-31">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # This allows us to stream into the view. OpenGL
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-32">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # takes care of compositing using the z-buffer
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-33">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # when Erase is set to off.
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-34">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         RenWin
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         EraseOff
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-35">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         RenWin
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         DoubleBufferOff
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-36">
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-37">
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         def
        </span>
        <span class="crayon-e">
         RequestUpdateExtent
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         request
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         inInfo
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         outInfo
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-o">
         :
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-38">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         info
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         inInfo
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetInformationObject
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-39">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # Ask for the next extent.
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-40">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         info
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Set
        </span>
        <span class="crayon-sy">
         (
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-41">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         vtkStreamingDemandDrivenPipeline
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         UPDATE_NUMBER_OF_PIECES
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ,
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-42">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         NumberOfBlocks
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-43">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         info
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Set
        </span>
        <span class="crayon-sy">
         (
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-44">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         vtkStreamingDemandDrivenPipeline
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         UPDATE_PIECE_NUMBER
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ,
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-45">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         UpdateIndex
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-46">
        <span class="crayon-h">
        </span>
        <span class="crayon-st">
         return
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         1
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-47">
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-48">
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         def
        </span>
        <span class="crayon-e">
         RequestData
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         request
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         inInfo
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         outInfo
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-o">
         :
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-49">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         info
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         inInfo
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetInformationObject
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-50">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         inp
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         dsa
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         WrapDataObject
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         vtkDataSet
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetData
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         info
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-51">
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-52">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         Contour
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetInputData
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         inp
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         VTKObject
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-53">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         Contour
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Update
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-54">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         contour
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         dsa
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         WrapDataObject
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         Contour
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetOutput
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-55">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         rtdata
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         contour
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         PointData
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-s">
         'RTData'
        </span>
        <span class="crayon-sy">
         ]
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-56">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         color
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         np
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         empty_like
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         rtdata
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-57">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         color
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-o">
         :
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         UpdateIndex
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-58">
        <span class="crayon-e">
        </span>
        <span class="crayon-v">
         contour
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         PointData
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         append
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         color
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-s">
         "color"
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-59">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         contour
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         PointData
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetActiveScalars
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-s">
         "color"
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-60">
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-61">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         Mapper
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetInputData
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         contour
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         VTKObject
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-62">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         RenWin
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Render
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-63">
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-64">
        <span class="crayon-h">
        </span>
        <span class="crayon-st">
         if
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         UpdateIndex
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         NumberOfBlocks
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         -
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         1
        </span>
        <span class="crayon-o">
         :
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-65">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # If we are not done, ask the pipeline to re-execute us.
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-66">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         UpdateIndex
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         +=
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         1
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-67">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         request
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Set
        </span>
        <span class="crayon-sy">
         (
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-68">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         vtkStreamingDemandDrivenPipeline
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         CONTINUE_EXECUTING
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ,
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-69">
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         1
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-70">
        <span class="crayon-h">
        </span>
        <span class="crayon-st">
         else
        </span>
        <span class="crayon-o">
         :
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-71">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # Stop execution
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-72">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         request
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Remove
        </span>
        <span class="crayon-sy">
         (
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-73">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         vtkStreamingDemandDrivenPipeline
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         CONTINUE_EXECUTING
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-74">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # Reset for next potential execution.
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-75">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         UpdateIndex
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         0
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-76">
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-77">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         w2i
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkWindowToImageFilter
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-78">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         w2i
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetInput
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         RenWin
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-79">
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-80">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         w
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkPNGWriter
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-81">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         w
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetInputConnection
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         w2i
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetOutputPort
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-82">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         w
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetFileName
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-s">
         "composite1.png"
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-83">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         w
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Write
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-84">
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-85">
        <span class="crayon-h">
        </span>
        <span class="crayon-st">
         return
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         1
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-86">
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-87">
        <span class="crayon-v">
         w
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkRTAnalyticSource
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-88">
        <span class="crayon-v">
         w
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetWholeExtent
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-o">
         -
        </span>
        <span class="crayon-cn">
         100
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         100
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         -
        </span>
        <span class="crayon-cn">
         100
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         100
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         -
        </span>
        <span class="crayon-cn">
         100
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         100
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-89">
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-90">
        <span class="crayon-v">
         s
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         StreamExtents
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-91">
        <span class="crayon-v">
         s
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetInputConnection
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         w
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetOutputPort
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-92">
       </div>
       <div class="crayon-line" id="crayon-5c41e80999735567310306-93">
        <span class="crayon-v">
         s
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Update
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
      </div>
     </td>
    </tr>
   </table>
  </div>
 </div>
 <!-- [Format Time: 0.0027 seconds] -->
 <p>
  Note that this is very similar to the examples in the previous blog. The main difference is that this algorithm is a sink rather than a filter and instead of producing a polydata output which represents the contour, it produces an image. For this, we create a rendering pipeline in the constructor and then during each pipeline execution, we render the current contour geometry. Finally, we save the output image after the last render. In skeleton code, this looks like the following.
 </p>
 <!-- Crayon Syntax Highlighter v_2.7.2_beta -->
 <div class="crayon-syntax crayon-theme-coy crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c41e8099973f160440189" style=" margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 25px !important;">
  <div class="crayon-plain-wrap">
   <textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 16px !important; line-height: 25px !important;" wrap="soft">
def RequestData(self, request, inInfo, outInfo):

    self.Mapper.SetInputData(contour.VTKObject)
    self.RenWin.Render()

    if self.UpdateIndex &lt; self.NumberOfBlocks - 1:
        # If we are not done, ask the pipeline to re-execute us.
        self.UpdateIndex += 1
        request.Set(
            vtk.vtkStreamingDemandDrivenPipeline.CONTINUE_EXECUTING(),
            1)
    else:
        # Stop execution
        request.Remove(
            vtk.vtkStreamingDemandDrivenPipeline.CONTINUE_EXECUTING())
        # Reset for next potential execution.
        self.UpdateIndex = 0

        w2i = vtk.vtkWindowToImageFilter()
        w.Write()</textarea>
  </div>
  <div class="crayon-main">
   <table class="crayon-table">
    <tr class="crayon-row">
     <td class="crayon-nums " data-settings="show">
      <div class="crayon-nums-content" style="font-size: 16px !important; line-height: 25px !important;">
       <div class="crayon-num" data-line="crayon-5c41e8099973f160440189-1">
        1
       </div>
       <div class="crayon-num" data-line="crayon-5c41e8099973f160440189-2">
        2
       </div>
       <div class="crayon-num" data-line="crayon-5c41e8099973f160440189-3">
        3
       </div>
       <div class="crayon-num" data-line="crayon-5c41e8099973f160440189-4">
        4
       </div>
       <div class="crayon-num" data-line="crayon-5c41e8099973f160440189-5">
        5
       </div>
       <div class="crayon-num" data-line="crayon-5c41e8099973f160440189-6">
        6
       </div>
       <div class="crayon-num" data-line="crayon-5c41e8099973f160440189-7">
        7
       </div>
       <div class="crayon-num" data-line="crayon-5c41e8099973f160440189-8">
        8
       </div>
       <div class="crayon-num" data-line="crayon-5c41e8099973f160440189-9">
        9
       </div>
       <div class="crayon-num" data-line="crayon-5c41e8099973f160440189-10">
        10
       </div>
       <div class="crayon-num" data-line="crayon-5c41e8099973f160440189-11">
        11
       </div>
       <div class="crayon-num" data-line="crayon-5c41e8099973f160440189-12">
        12
       </div>
       <div class="crayon-num" data-line="crayon-5c41e8099973f160440189-13">
        13
       </div>
       <div class="crayon-num" data-line="crayon-5c41e8099973f160440189-14">
        14
       </div>
       <div class="crayon-num" data-line="crayon-5c41e8099973f160440189-15">
        15
       </div>
       <div class="crayon-num" data-line="crayon-5c41e8099973f160440189-16">
        16
       </div>
       <div class="crayon-num" data-line="crayon-5c41e8099973f160440189-17">
        17
       </div>
       <div class="crayon-num" data-line="crayon-5c41e8099973f160440189-18">
        18
       </div>
       <div class="crayon-num" data-line="crayon-5c41e8099973f160440189-19">
        19
       </div>
       <div class="crayon-num" data-line="crayon-5c41e8099973f160440189-20">
        20
       </div>
      </div>
     </td>
     <td class="crayon-code">
      <div class="crayon-pre" style="font-size: 16px !important; line-height: 25px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <div class="crayon-line" id="crayon-5c41e8099973f160440189-1">
        <span class="crayon-e">
         def
        </span>
        <span class="crayon-e">
         RequestData
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         request
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         inInfo
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         outInfo
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-o">
         :
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e8099973f160440189-2">
       </div>
       <div class="crayon-line" id="crayon-5c41e8099973f160440189-3">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         Mapper
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetInputData
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         contour
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         VTKObject
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e8099973f160440189-4">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         RenWin
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Render
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e8099973f160440189-5">
       </div>
       <div class="crayon-line" id="crayon-5c41e8099973f160440189-6">
        <span class="crayon-h">
        </span>
        <span class="crayon-st">
         if
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         UpdateIndex
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         NumberOfBlocks
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         -
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         1
        </span>
        <span class="crayon-o">
         :
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e8099973f160440189-7">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # If we are not done, ask the pipeline to re-execute us.
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e8099973f160440189-8">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         UpdateIndex
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         +=
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         1
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e8099973f160440189-9">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         request
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Set
        </span>
        <span class="crayon-sy">
         (
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e8099973f160440189-10">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         vtkStreamingDemandDrivenPipeline
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         CONTINUE_EXECUTING
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ,
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e8099973f160440189-11">
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         1
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e8099973f160440189-12">
        <span class="crayon-h">
        </span>
        <span class="crayon-st">
         else
        </span>
        <span class="crayon-o">
         :
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e8099973f160440189-13">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # Stop execution
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e8099973f160440189-14">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         request
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Remove
        </span>
        <span class="crayon-sy">
         (
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e8099973f160440189-15">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         vtkStreamingDemandDrivenPipeline
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         CONTINUE_EXECUTING
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e8099973f160440189-16">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # Reset for next potential execution.
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e8099973f160440189-17">
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         UpdateIndex
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         0
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e8099973f160440189-18">
       </div>
       <div class="crayon-line" id="crayon-5c41e8099973f160440189-19">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         w2i
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkWindowToImageFilter
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e8099973f160440189-20">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         w
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Write
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
      </div>
     </td>
    </tr>
   </table>
  </div>
 </div>
 <!-- [Format Time: 0.0006 seconds] -->
 <p>
  The trick that makes this example work is in these two lines:
 </p>
 <!-- Crayon Syntax Highlighter v_2.7.2_beta -->
 <div class="crayon-syntax crayon-theme-coy crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c41e80999742672101607" style=" margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 25px !important;">
  <div class="crayon-plain-wrap">
   <textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 16px !important; line-height: 25px !important;" wrap="soft">
self.RenWin.EraseOff()
self.RenWin.DoubleBufferOff()</textarea>
  </div>
  <div class="crayon-main">
   <table class="crayon-table">
    <tr class="crayon-row">
     <td class="crayon-nums " data-settings="show">
      <div class="crayon-nums-content" style="font-size: 16px !important; line-height: 25px !important;">
       <div class="crayon-num" data-line="crayon-5c41e80999742672101607-1">
        1
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999742672101607-2">
        2
       </div>
      </div>
     </td>
     <td class="crayon-code">
      <div class="crayon-pre" style="font-size: 16px !important; line-height: 25px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <div class="crayon-line" id="crayon-5c41e80999742672101607-1">
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         RenWin
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         EraseOff
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999742672101607-2">
        <span class="crayon-r">
         self
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-v">
         RenWin
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         DoubleBufferOff
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
      </div>
     </td>
    </tr>
   </table>
  </div>
 </div>
 <!-- [Format Time: 0.0001 seconds] -->
 <p>
  When the
  <span style="font-family: courier;">
   Erase
  </span>
  mode is enabled, the render window renders each time on top of the same framebuffer and zbuffer without clearing them. OpenGL decides to draw a particular pixel or not depending on the previous value of the z buffer. If the old z value is smaller, it keeps the previous pixel. Otherwise, it overwrites the pixel. This works perfectly because the object we are rendering is opaque. Handling transparencly would require doing the passes in a certain order and blending the pixels. I leave that to you as an exercise. The output looks as follows. Click on the picture to see the streaming in action.
 </p>
 <p>
  <img alt="Animation" src="https://blog.kitware.com/blog/files/53_2094826496.png" style="margin-left: auto; margin-right: auto;"/>
 </p>
 <p>
  This example was mainly for demonstration. The same can be achieved in VTK without writing an algorithm. Here is the code.
 </p>
 <!-- Crayon Syntax Highlighter v_2.7.2_beta -->
 <div class="crayon-syntax crayon-theme-coy crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c41e80999745713316591" style=" margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 25px !important;">
  <div class="crayon-plain-wrap">
   <textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 16px !important; line-height: 25px !important;" wrap="soft">
import vtk

w = vtk.vtkRTAnalyticSource()
w.SetWholeExtent(-100, 100, -100, 100, -100, 100)

c = vtk.vtkContourFilter()
c.SetInputConnection(w.GetOutputPort())
c.SetValue(0, 180)

ps = vtk.vtkPieceScalars()
ps.SetInputConnection(c.GetOutputPort())

mapper = vtk.vtkPolyDataMapper()
mapper.SetInputConnection(ps.GetOutputPort())
mapper.SetNumberOfSubPieces(20)
mapper.SetScalarRange(0, 20)

actor = vtk.vtkActor()
actor.SetMapper(mapper)

ren = vtk.vtkRenderer()
ren.AddActor(actor)

renWin = vtk.vtkRenderWindow()
renWin.AddRenderer(ren)
renWin.SetSize(600, 600)
ren.GetActiveCamera().SetPosition(0, 0, 400)
renWin.Render()</textarea>
  </div>
  <div class="crayon-main">
   <table class="crayon-table">
    <tr class="crayon-row">
     <td class="crayon-nums " data-settings="show">
      <div class="crayon-nums-content" style="font-size: 16px !important; line-height: 25px !important;">
       <div class="crayon-num" data-line="crayon-5c41e80999745713316591-1">
        1
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999745713316591-2">
        2
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999745713316591-3">
        3
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999745713316591-4">
        4
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999745713316591-5">
        5
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999745713316591-6">
        6
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999745713316591-7">
        7
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999745713316591-8">
        8
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999745713316591-9">
        9
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999745713316591-10">
        10
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999745713316591-11">
        11
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999745713316591-12">
        12
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999745713316591-13">
        13
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999745713316591-14">
        14
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999745713316591-15">
        15
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999745713316591-16">
        16
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999745713316591-17">
        17
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999745713316591-18">
        18
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999745713316591-19">
        19
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999745713316591-20">
        20
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999745713316591-21">
        21
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999745713316591-22">
        22
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999745713316591-23">
        23
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999745713316591-24">
        24
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999745713316591-25">
        25
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999745713316591-26">
        26
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999745713316591-27">
        27
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999745713316591-28">
        28
       </div>
      </div>
     </td>
     <td class="crayon-code">
      <div class="crayon-pre" style="font-size: 16px !important; line-height: 25px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <div class="crayon-line" id="crayon-5c41e80999745713316591-1">
        <span class="crayon-e">
         import
        </span>
        <span class="crayon-i">
         vtk
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999745713316591-2">
       </div>
       <div class="crayon-line" id="crayon-5c41e80999745713316591-3">
        <span class="crayon-v">
         w
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkRTAnalyticSource
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999745713316591-4">
        <span class="crayon-v">
         w
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetWholeExtent
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-o">
         -
        </span>
        <span class="crayon-cn">
         100
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         100
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         -
        </span>
        <span class="crayon-cn">
         100
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         100
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         -
        </span>
        <span class="crayon-cn">
         100
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         100
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999745713316591-5">
       </div>
       <div class="crayon-line" id="crayon-5c41e80999745713316591-6">
        <span class="crayon-v">
         c
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkContourFilter
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999745713316591-7">
        <span class="crayon-v">
         c
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetInputConnection
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         w
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetOutputPort
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999745713316591-8">
        <span class="crayon-v">
         c
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetValue
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         180
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999745713316591-9">
       </div>
       <div class="crayon-line" id="crayon-5c41e80999745713316591-10">
        <span class="crayon-v">
         ps
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkPieceScalars
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999745713316591-11">
        <span class="crayon-v">
         ps
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetInputConnection
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         c
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetOutputPort
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999745713316591-12">
       </div>
       <div class="crayon-line" id="crayon-5c41e80999745713316591-13">
        <span class="crayon-v">
         mapper
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkPolyDataMapper
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999745713316591-14">
        <span class="crayon-v">
         mapper
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetInputConnection
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         ps
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetOutputPort
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999745713316591-15">
        <span class="crayon-v">
         mapper
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetNumberOfSubPieces
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         20
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999745713316591-16">
        <span class="crayon-v">
         mapper
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetScalarRange
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         20
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999745713316591-17">
       </div>
       <div class="crayon-line" id="crayon-5c41e80999745713316591-18">
        <span class="crayon-v">
         actor
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkActor
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999745713316591-19">
        <span class="crayon-v">
         actor
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetMapper
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         mapper
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999745713316591-20">
       </div>
       <div class="crayon-line" id="crayon-5c41e80999745713316591-21">
        <span class="crayon-v">
         ren
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkRenderer
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999745713316591-22">
        <span class="crayon-v">
         ren
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         AddActor
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         actor
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999745713316591-23">
       </div>
       <div class="crayon-line" id="crayon-5c41e80999745713316591-24">
        <span class="crayon-v">
         renWin
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkRenderWindow
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999745713316591-25">
        <span class="crayon-v">
         renWin
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         AddRenderer
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         ren
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999745713316591-26">
        <span class="crayon-v">
         renWin
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetSize
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         600
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         600
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999745713316591-27">
        <span class="crayon-v">
         ren
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetActiveCamera
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetPosition
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         400
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999745713316591-28">
        <span class="crayon-v">
         renWin
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Render
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
      </div>
     </td>
    </tr>
   </table>
  </div>
 </div>
 <!-- [Format Time: 0.0007 seconds] -->
 <p>
  The only special thing in this example is the
  <span style="font-family: courier;">
   mapper.SetNumberOfSubPieces(20)
  </span>
  line which tells the mapper to stream its input in 20 steps. This uses the same logic as our example in that the mapper does multiple render passes when it is asked to render.
 </p>
 <h2 id="parallel-compositing">
  Parallel Compositing
 </h2>
 <p>
  The examples we covered so far are only one step away from parallel compositing so we might as well cover that too. In general, parallel sort last compositing involves rendering images with geometry local to each process, transferring the frame and zbuffers over the network and then comparing the z values to decide which pixels to keep from which framebuffer. For more details on compositing, I recommend checking out some of the papers out there, for example An Image Compositing Solution at Scale by Moreland et al. You should also check out
  <a href="http://icet.sandia.gov/">
   IceT
  </a>
  , which has become the open-source reference and production implementation used by many parallel tools including VTK/ParaView.
 </p>
 <p>
  Here is my simple two process example demonstrating compositing.
 </p>
 <!-- Crayon Syntax Highlighter v_2.7.2_beta -->
 <div class="crayon-syntax crayon-theme-coy crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c41e80999747986216124" style=" margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 25px !important;">
  <div class="crayon-plain-wrap">
   <textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 16px !important; line-height: 25px !important;" wrap="soft">
from vtk.numpy_interface import dataset_adapter as dsa
import vtk
import numpy as np
from mpi4py import MPI

comm = MPI.COMM_WORLD
rank = comm.Get_rank()
size = comm.Get_size()

if size != 2:
    print 'This example needs 2 MPI processes'
    import sys
    sys.exit(0)

w = vtk.vtkRTAnalyticSource()
w.SetWholeExtent(-100, 100, -100, 100, -100, 100)

c = vtk.vtkContourFilter()
c.SetInputConnection(w.GetOutputPort())
c.SetValue(0, 180)

ps = vtk.vtkPieceScalars()
ps.SetInputConnection(c.GetOutputPort())

mapper = vtk.vtkPolyDataMapper()
mapper.SetInputConnection(ps.GetOutputPort())
# For streaming
mapper.SetNumberOfSubPieces(20/size)
# For parallel execution
mapper.SetNumberOfPieces(size)
mapper.SetPiece(rank)
mapper.SetScalarRange(0, 20)

actor = vtk.vtkActor()
actor.SetMapper(mapper)

ren = vtk.vtkRenderer()
ren.AddActor(actor)

renWin = vtk.vtkRenderWindow()
renWin.AddRenderer(ren)
renWin.SetSize(600, 600)
ren.GetActiveCamera().SetPosition(0, 0, 400)
# We need to do this manually because we want z buffer
# values to be consistent across MPI ranks.
ren.ResetCameraClippingRange(-100, 100, -100, 100, -100, 100)
renWin.Render()

# Grab the famebuffer
a = vtk.vtkUnsignedCharArray()
renWin.GetRGBACharPixelData(0, 0, 599, 599, 1, a)
rgba = dsa.vtkDataArrayToVTKArray(a)

# Grab the zbuffer
z = vtk.vtkFloatArray()
renWin.GetZbufferData(0, 0, 599, 599, z)
z = dsa.vtkDataArrayToVTKArray(z)

# Write individual framebuffers
i = vtk.vtkImageData()
i.SetDimensions(600, 600, 1)
i.GetPointData().SetScalars(a)

w = vtk.vtkPNGWriter()
w.SetInputData(i)
w.SetFileName("composite2_%d.png" % rank)
w.Write()

if rank == 0:
    # Receive the frame and zbuffers from rank 1
    rgba2 = np.empty_like(rgba)
    z2 = np.empty_like(z)
    comm.Recv([rgba2, MPI.CHAR], source=1, tag=77)
    comm.Recv([z2, MPI.FLOAT], source=1, tag=77)
    # Compositing.
    # Find where the zbuffer values of the remote
    # image are smaller (pixels are closer).
    loc = np.where(z2 &lt; z)
    # Use those locations to overwrite local pixels
    # with remote pixels.
    rgba[loc[0], :] = rgba2[loc[0], :]

    # Write the composited image.
    i = vtk.vtkImageData()
    i.SetDimensions(600, 600, 1)
    i.GetPointData().SetScalars(a)

    w = vtk.vtkPNGWriter()
    w.SetInputData(i)
    w.SetFileName("composite2.png")
    w.Write()
else:
    comm.Send([rgba, MPI.CHAR], dest=0, tag=77)
    comm.Send([z, MPI.FLOAT], dest=0, tag=77)</textarea>
  </div>
  <div class="crayon-main">
   <table class="crayon-table">
    <tr class="crayon-row">
     <td class="crayon-nums " data-settings="show">
      <div class="crayon-nums-content" style="font-size: 16px !important; line-height: 25px !important;">
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-1">
        1
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-2">
        2
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-3">
        3
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-4">
        4
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-5">
        5
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-6">
        6
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-7">
        7
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-8">
        8
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-9">
        9
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-10">
        10
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-11">
        11
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-12">
        12
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-13">
        13
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-14">
        14
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-15">
        15
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-16">
        16
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-17">
        17
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-18">
        18
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-19">
        19
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-20">
        20
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-21">
        21
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-22">
        22
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-23">
        23
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-24">
        24
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-25">
        25
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-26">
        26
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-27">
        27
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-28">
        28
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-29">
        29
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-30">
        30
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-31">
        31
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-32">
        32
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-33">
        33
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-34">
        34
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-35">
        35
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-36">
        36
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-37">
        37
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-38">
        38
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-39">
        39
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-40">
        40
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-41">
        41
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-42">
        42
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-43">
        43
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-44">
        44
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-45">
        45
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-46">
        46
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-47">
        47
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-48">
        48
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-49">
        49
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-50">
        50
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-51">
        51
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-52">
        52
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-53">
        53
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-54">
        54
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-55">
        55
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-56">
        56
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-57">
        57
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-58">
        58
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-59">
        59
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-60">
        60
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-61">
        61
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-62">
        62
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-63">
        63
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-64">
        64
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-65">
        65
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-66">
        66
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-67">
        67
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-68">
        68
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-69">
        69
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-70">
        70
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-71">
        71
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-72">
        72
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-73">
        73
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-74">
        74
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-75">
        75
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-76">
        76
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-77">
        77
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-78">
        78
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-79">
        79
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-80">
        80
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-81">
        81
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-82">
        82
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-83">
        83
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-84">
        84
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-85">
        85
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-86">
        86
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-87">
        87
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-88">
        88
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-89">
        89
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-90">
        90
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-91">
        91
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-92">
        92
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-93">
        93
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999747986216124-94">
        94
       </div>
      </div>
     </td>
     <td class="crayon-code">
      <div class="crayon-pre" style="font-size: 16px !important; line-height: 25px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <div class="crayon-line" id="crayon-5c41e80999747986216124-1">
        <span class="crayon-e">
         from
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         numpy_interface
        </span>
        <span class="crayon-e">
         import
        </span>
        <span class="crayon-e">
         dataset_adapter
        </span>
        <span class="crayon-st">
         as
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         dsa
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-2">
        <span class="crayon-e">
         import
        </span>
        <span class="crayon-e">
         vtk
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-3">
        <span class="crayon-e">
         import
        </span>
        <span class="crayon-e">
         numpy
        </span>
        <span class="crayon-st">
         as
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         np
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-4">
        <span class="crayon-e">
         from
        </span>
        <span class="crayon-e">
         mpi4py
        </span>
        <span class="crayon-e">
         import
        </span>
        <span class="crayon-e">
         MPI
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-5">
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-6">
        <span class="crayon-v">
         comm
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         MPI
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         COMM_WORLD
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-7">
        <span class="crayon-v">
         rank
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         comm
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Get_rank
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-8">
        <span class="crayon-v">
         size
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         comm
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Get_size
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-9">
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-10">
        <span class="crayon-st">
         if
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         size
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         !=
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         2
        </span>
        <span class="crayon-o">
         :
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-11">
        <span class="crayon-h">
        </span>
        <span class="crayon-i">
         print
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-s">
         'This example needs 2 MPI processes'
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-12">
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         import
        </span>
        <span class="crayon-e">
         sys
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-13">
        <span class="crayon-e">
        </span>
        <span class="crayon-v">
         sys
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         exit
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-14">
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-15">
        <span class="crayon-v">
         w
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkRTAnalyticSource
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-16">
        <span class="crayon-v">
         w
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetWholeExtent
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-o">
         -
        </span>
        <span class="crayon-cn">
         100
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         100
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         -
        </span>
        <span class="crayon-cn">
         100
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         100
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         -
        </span>
        <span class="crayon-cn">
         100
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         100
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-17">
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-18">
        <span class="crayon-v">
         c
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkContourFilter
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-19">
        <span class="crayon-v">
         c
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetInputConnection
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         w
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetOutputPort
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-20">
        <span class="crayon-v">
         c
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetValue
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         180
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-21">
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-22">
        <span class="crayon-v">
         ps
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkPieceScalars
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-23">
        <span class="crayon-v">
         ps
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetInputConnection
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         c
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetOutputPort
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-24">
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-25">
        <span class="crayon-v">
         mapper
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkPolyDataMapper
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-26">
        <span class="crayon-v">
         mapper
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetInputConnection
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         ps
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetOutputPort
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-27">
        <span class="crayon-p">
         # For streaming
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-28">
        <span class="crayon-v">
         mapper
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetNumberOfSubPieces
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         20
        </span>
        <span class="crayon-o">
         /
        </span>
        <span class="crayon-v">
         size
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-29">
        <span class="crayon-p">
         # For parallel execution
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-30">
        <span class="crayon-v">
         mapper
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetNumberOfPieces
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         size
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-31">
        <span class="crayon-v">
         mapper
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetPiece
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         rank
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-32">
        <span class="crayon-v">
         mapper
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetScalarRange
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         20
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-33">
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-34">
        <span class="crayon-v">
         actor
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkActor
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-35">
        <span class="crayon-v">
         actor
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetMapper
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         mapper
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-36">
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-37">
        <span class="crayon-v">
         ren
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkRenderer
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-38">
        <span class="crayon-v">
         ren
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         AddActor
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         actor
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-39">
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-40">
        <span class="crayon-v">
         renWin
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkRenderWindow
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-41">
        <span class="crayon-v">
         renWin
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         AddRenderer
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         ren
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-42">
        <span class="crayon-v">
         renWin
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetSize
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         600
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         600
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-43">
        <span class="crayon-v">
         ren
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetActiveCamera
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetPosition
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         400
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-44">
        <span class="crayon-p">
         # We need to do this manually because we want z buffer
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-45">
        <span class="crayon-p">
         # values to be consistent across MPI ranks.
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-46">
        <span class="crayon-v">
         ren
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         ResetCameraClippingRange
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-o">
         -
        </span>
        <span class="crayon-cn">
         100
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         100
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         -
        </span>
        <span class="crayon-cn">
         100
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         100
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         -
        </span>
        <span class="crayon-cn">
         100
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         100
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-47">
        <span class="crayon-v">
         renWin
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Render
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-48">
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-49">
        <span class="crayon-p">
         # Grab the famebuffer
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-50">
        <span class="crayon-v">
         a
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkUnsignedCharArray
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-51">
        <span class="crayon-v">
         renWin
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetRGBACharPixelData
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         599
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         599
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         1
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         a
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-52">
        <span class="crayon-v">
         rgba
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         dsa
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkDataArrayToVTKArray
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         a
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-53">
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-54">
        <span class="crayon-p">
         # Grab the zbuffer
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-55">
        <span class="crayon-v">
         z
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkFloatArray
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-56">
        <span class="crayon-v">
         renWin
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetZbufferData
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         599
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         599
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         z
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-57">
        <span class="crayon-v">
         z
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         dsa
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkDataArrayToVTKArray
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         z
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-58">
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-59">
        <span class="crayon-p">
         # Write individual framebuffers
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-60">
        <span class="crayon-v">
         i
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkImageData
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-61">
        <span class="crayon-v">
         i
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetDimensions
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         600
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         600
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         1
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-62">
        <span class="crayon-v">
         i
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetPointData
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetScalars
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         a
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-63">
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-64">
        <span class="crayon-v">
         w
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkPNGWriter
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-65">
        <span class="crayon-v">
         w
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetInputData
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         i
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-66">
        <span class="crayon-v">
         w
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetFileName
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-s">
         "composite2_%d.png"
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         %
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         rank
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-67">
        <span class="crayon-v">
         w
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Write
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-68">
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-69">
        <span class="crayon-st">
         if
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         rank
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         ==
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-o">
         :
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-70">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # Receive the frame and zbuffers from rank 1
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-71">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         rgba2
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         np
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         empty_like
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         rgba
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-72">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         z2
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         np
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         empty_like
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         z
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-73">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         comm
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Recv
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-v">
         rgba2
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         MPI
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-t">
         CHAR
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         source
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-cn">
         1
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         tag
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-cn">
         77
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-74">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         comm
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Recv
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-v">
         z2
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         MPI
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-t">
         FLOAT
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         source
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-cn">
         1
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         tag
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-cn">
         77
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-75">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # Compositing.
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-76">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # Find where the zbuffer values of the remote
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-77">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # image are smaller (pixels are closer).
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-78">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         loc
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         np
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         where
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         z2
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         z
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-79">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # Use those locations to overwrite local pixels
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-80">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # with remote pixels.
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-81">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         rgba
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-v">
         loc
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         :
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         rgba2
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-v">
         loc
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         :
        </span>
        <span class="crayon-sy">
         ]
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-82">
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-83">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # Write the composited image.
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-84">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         i
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkImageData
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-85">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         i
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetDimensions
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         600
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         600
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         1
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-86">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         i
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetPointData
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetScalars
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         a
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-87">
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-88">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         w
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkPNGWriter
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-89">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         w
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetInputData
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         i
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-90">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         w
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetFileName
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-s">
         "composite2.png"
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-91">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         w
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Write
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-92">
        <span class="crayon-st">
         else
        </span>
        <span class="crayon-o">
         :
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-93">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         comm
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Send
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-v">
         rgba
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         MPI
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-t">
         CHAR
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         dest
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         tag
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-cn">
         77
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999747986216124-94">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         comm
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Send
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-v">
         z
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         MPI
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-t">
         FLOAT
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         dest
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         tag
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-cn">
         77
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
      </div>
     </td>
    </tr>
   </table>
  </div>
 </div>
 <!-- [Format Time: 0.0175 seconds] -->
 <p>
  There are a few interesting bits to this example. First, the following sets up distributed processing pipeline as well as streaming:
 </p>
 <!-- Crayon Syntax Highlighter v_2.7.2_beta -->
 <div class="crayon-syntax crayon-theme-coy crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c41e8099974b755679933" style=" margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 25px !important;">
  <div class="crayon-plain-wrap">
   <textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 16px !important; line-height: 25px !important;" wrap="soft">
# For streaming
mapper.SetNumberOfSubPieces(20/size)
# For parallel execution
mapper.SetNumberOfPieces(size)
mapper.SetPiece(rank)</textarea>
  </div>
  <div class="crayon-main">
   <table class="crayon-table">
    <tr class="crayon-row">
     <td class="crayon-nums " data-settings="show">
      <div class="crayon-nums-content" style="font-size: 16px !important; line-height: 25px !important;">
       <div class="crayon-num" data-line="crayon-5c41e8099974b755679933-1">
        1
       </div>
       <div class="crayon-num" data-line="crayon-5c41e8099974b755679933-2">
        2
       </div>
       <div class="crayon-num" data-line="crayon-5c41e8099974b755679933-3">
        3
       </div>
       <div class="crayon-num" data-line="crayon-5c41e8099974b755679933-4">
        4
       </div>
       <div class="crayon-num" data-line="crayon-5c41e8099974b755679933-5">
        5
       </div>
      </div>
     </td>
     <td class="crayon-code">
      <div class="crayon-pre" style="font-size: 16px !important; line-height: 25px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <div class="crayon-line" id="crayon-5c41e8099974b755679933-1">
        <span class="crayon-p">
         # For streaming
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e8099974b755679933-2">
        <span class="crayon-v">
         mapper
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetNumberOfSubPieces
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         20
        </span>
        <span class="crayon-o">
         /
        </span>
        <span class="crayon-v">
         size
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e8099974b755679933-3">
        <span class="crayon-p">
         # For parallel execution
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e8099974b755679933-4">
        <span class="crayon-v">
         mapper
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetNumberOfPieces
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         size
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e8099974b755679933-5">
        <span class="crayon-v">
         mapper
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         SetPiece
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         rank
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
      </div>
     </td>
    </tr>
   </table>
  </div>
 </div>
 <!-- [Format Time: 0.0001 seconds] -->
 <p>
  Note how each process is asked to process the piece with index
  <span style="font-family: courier;">
   rank
  </span>
  among a group of size
  <span style="font-family: courier;">
   size
  </span>
  . In addition, each process is asked to stream using
  <span style="font-family: courier;">
   20/size
  </span>
  pieces. With 2 ranks, we still have 20 pieces total. The only special thing we have to do for compositing to work is this.
 </p>
 <!-- Crayon Syntax Highlighter v_2.7.2_beta -->
 <div class="crayon-syntax crayon-theme-coy crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c41e80999755200388913" style=" margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 25px !important;">
  <div class="crayon-plain-wrap">
   <textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 16px !important; line-height: 25px !important;" wrap="soft">
# We need to do this manually because we want z buffer
# values to be consistent across MPI ranks.
ren.ResetCameraClippingRange(-100, 100, -100, 100, -100, 100)</textarea>
  </div>
  <div class="crayon-main">
   <table class="crayon-table">
    <tr class="crayon-row">
     <td class="crayon-nums " data-settings="show">
      <div class="crayon-nums-content" style="font-size: 16px !important; line-height: 25px !important;">
       <div class="crayon-num" data-line="crayon-5c41e80999755200388913-1">
        1
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999755200388913-2">
        2
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999755200388913-3">
        3
       </div>
      </div>
     </td>
     <td class="crayon-code">
      <div class="crayon-pre" style="font-size: 16px !important; line-height: 25px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <div class="crayon-line" id="crayon-5c41e80999755200388913-1">
        <span class="crayon-p">
         # We need to do this manually because we want z buffer
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999755200388913-2">
        <span class="crayon-p">
         # values to be consistent across MPI ranks.
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999755200388913-3">
        <span class="crayon-v">
         ren
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         ResetCameraClippingRange
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-o">
         -
        </span>
        <span class="crayon-cn">
         100
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         100
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         -
        </span>
        <span class="crayon-cn">
         100
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         100
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         -
        </span>
        <span class="crayon-cn">
         100
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         100
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
      </div>
     </td>
    </tr>
   </table>
  </div>
 </div>
 <!-- [Format Time: 0.0002 seconds] -->
 <p>
  If we dont set a global clipping range, each rank will use clipping planes based on local data which will lead to inconsistent zbuffer values (which are normalized to 0-1).
 </p>
 <p>
  Then we grab the frame and zbuffer with
 </p>
 <!-- Crayon Syntax Highlighter v_2.7.2_beta -->
 <div class="crayon-syntax crayon-theme-coy crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c41e80999757253332158" style=" margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 25px !important;">
  <div class="crayon-plain-wrap">
   <textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 16px !important; line-height: 25px !important;" wrap="soft">
# Grab the famebuffer
a = vtk.vtkUnsignedCharArray()
renWin.GetRGBACharPixelData(0, 0, 599, 599, 1, a)
rgba = dsa.vtkDataArrayToVTKArray(a)

# Grab the zbuffer
z = vtk.vtkFloatArray()
renWin.GetZbufferData(0, 0, 599, 599, z)
z = dsa.vtkDataArrayToVTKArray(z)</textarea>
  </div>
  <div class="crayon-main">
   <table class="crayon-table">
    <tr class="crayon-row">
     <td class="crayon-nums " data-settings="show">
      <div class="crayon-nums-content" style="font-size: 16px !important; line-height: 25px !important;">
       <div class="crayon-num" data-line="crayon-5c41e80999757253332158-1">
        1
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999757253332158-2">
        2
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999757253332158-3">
        3
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999757253332158-4">
        4
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999757253332158-5">
        5
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999757253332158-6">
        6
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999757253332158-7">
        7
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999757253332158-8">
        8
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999757253332158-9">
        9
       </div>
      </div>
     </td>
     <td class="crayon-code">
      <div class="crayon-pre" style="font-size: 16px !important; line-height: 25px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <div class="crayon-line" id="crayon-5c41e80999757253332158-1">
        <span class="crayon-p">
         # Grab the famebuffer
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999757253332158-2">
        <span class="crayon-v">
         a
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkUnsignedCharArray
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999757253332158-3">
        <span class="crayon-v">
         renWin
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetRGBACharPixelData
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         599
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         599
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         1
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         a
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999757253332158-4">
        <span class="crayon-v">
         rgba
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         dsa
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkDataArrayToVTKArray
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         a
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999757253332158-5">
       </div>
       <div class="crayon-line" id="crayon-5c41e80999757253332158-6">
        <span class="crayon-p">
         # Grab the zbuffer
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999757253332158-7">
        <span class="crayon-v">
         z
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtk
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkFloatArray
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999757253332158-8">
        <span class="crayon-v">
         renWin
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetZbufferData
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         599
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         599
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         z
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999757253332158-9">
        <span class="crayon-v">
         z
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         dsa
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         vtkDataArrayToVTKArray
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         z
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
      </div>
     </td>
    </tr>
   </table>
  </div>
 </div>
 <!-- [Format Time: 0.0004 seconds] -->
 <p>
  Then transfer the buffer from rank 1 to 0 with
 </p>
 <!-- Crayon Syntax Highlighter v_2.7.2_beta -->
 <div class="crayon-syntax crayon-theme-coy crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c41e80999759597669326" style=" margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 25px !important;">
  <div class="crayon-plain-wrap">
   <textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 16px !important; line-height: 25px !important;" wrap="soft">
if rank == 0:
    # Receive the frame and zbuffers from rank 1
    rgba2 = np.empty_like(rgba)
    z2 = np.empty_like(z)
    comm.Recv([rgba2, MPI.CHAR], source=1, tag=77)
    comm.Recv([z2, MPI.FLOAT], source=1, tag=77)
else:
    comm.Send([rgba, MPI.CHAR], dest=0, tag=77)
    comm.Send([z, MPI.FLOAT], dest=0, tag=77)</textarea>
  </div>
  <div class="crayon-main">
   <table class="crayon-table">
    <tr class="crayon-row">
     <td class="crayon-nums " data-settings="show">
      <div class="crayon-nums-content" style="font-size: 16px !important; line-height: 25px !important;">
       <div class="crayon-num" data-line="crayon-5c41e80999759597669326-1">
        1
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999759597669326-2">
        2
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999759597669326-3">
        3
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999759597669326-4">
        4
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999759597669326-5">
        5
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999759597669326-6">
        6
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999759597669326-7">
        7
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999759597669326-8">
        8
       </div>
       <div class="crayon-num" data-line="crayon-5c41e80999759597669326-9">
        9
       </div>
      </div>
     </td>
     <td class="crayon-code">
      <div class="crayon-pre" style="font-size: 16px !important; line-height: 25px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <div class="crayon-line" id="crayon-5c41e80999759597669326-1">
        <span class="crayon-st">
         if
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         rank
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         ==
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-o">
         :
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999759597669326-2">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # Receive the frame and zbuffers from rank 1
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999759597669326-3">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         rgba2
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         np
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         empty_like
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         rgba
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999759597669326-4">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         z2
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         np
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         empty_like
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         z
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999759597669326-5">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         comm
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Recv
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-v">
         rgba2
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         MPI
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-t">
         CHAR
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         source
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-cn">
         1
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         tag
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-cn">
         77
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999759597669326-6">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         comm
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Recv
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-v">
         z2
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         MPI
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-t">
         FLOAT
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         source
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-cn">
         1
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         tag
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-cn">
         77
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999759597669326-7">
        <span class="crayon-st">
         else
        </span>
        <span class="crayon-o">
         :
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999759597669326-8">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         comm
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Send
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-v">
         rgba
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         MPI
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-t">
         CHAR
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         dest
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         tag
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-cn">
         77
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e80999759597669326-9">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         comm
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         Send
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-v">
         z
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         MPI
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-t">
         FLOAT
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         dest
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         tag
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-cn">
         77
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
      </div>
     </td>
    </tr>
   </table>
  </div>
 </div>
 <!-- [Format Time: 0.0006 seconds] -->
 <p>
  Finally compositing is only 2 lines:
 </p>
 <!-- Crayon Syntax Highlighter v_2.7.2_beta -->
 <div class="crayon-syntax crayon-theme-coy crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c41e8099975b340183151" style=" margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 25px !important;">
  <div class="crayon-plain-wrap">
   <textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 16px !important; line-height: 25px !important;" wrap="soft">
    # Compositing.
    # Find where the zbuffer values of the remote
    # image are smaller (pixels are closer).
    loc = np.where(z2 &lt; z)
    # Use those locations to overwrite local pixels
    # with remote pixels.
    rgba[loc[0], :] = rgba2[loc[0], :]</textarea>
  </div>
  <div class="crayon-main">
   <table class="crayon-table">
    <tr class="crayon-row">
     <td class="crayon-nums " data-settings="show">
      <div class="crayon-nums-content" style="font-size: 16px !important; line-height: 25px !important;">
       <div class="crayon-num" data-line="crayon-5c41e8099975b340183151-1">
        1
       </div>
       <div class="crayon-num" data-line="crayon-5c41e8099975b340183151-2">
        2
       </div>
       <div class="crayon-num" data-line="crayon-5c41e8099975b340183151-3">
        3
       </div>
       <div class="crayon-num" data-line="crayon-5c41e8099975b340183151-4">
        4
       </div>
       <div class="crayon-num" data-line="crayon-5c41e8099975b340183151-5">
        5
       </div>
       <div class="crayon-num" data-line="crayon-5c41e8099975b340183151-6">
        6
       </div>
       <div class="crayon-num" data-line="crayon-5c41e8099975b340183151-7">
        7
       </div>
      </div>
     </td>
     <td class="crayon-code">
      <div class="crayon-pre" style="font-size: 16px !important; line-height: 25px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <div class="crayon-line" id="crayon-5c41e8099975b340183151-1">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # Compositing.
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e8099975b340183151-2">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # Find where the zbuffer values of the remote
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e8099975b340183151-3">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # image are smaller (pixels are closer).
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e8099975b340183151-4">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         loc
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         np
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         where
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         z2
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         z
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e8099975b340183151-5">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # Use those locations to overwrite local pixels
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e8099975b340183151-6">
        <span class="crayon-h">
        </span>
        <span class="crayon-p">
         # with remote pixels.
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e8099975b340183151-7">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         rgba
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-v">
         loc
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         :
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         rgba2
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-v">
         loc
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         :
        </span>
        <span class="crayon-sy">
         ]
        </span>
       </div>
      </div>
     </td>
    </tr>
   </table>
  </div>
 </div>
 <!-- [Format Time: 0.0003 seconds] -->
 <p>
  I leave it up to the reader as an exercise to extend this to more than 2 ranks. The paper by Ken et al. describes common ways of doing this including using a binary tree pattern.
 </p>
 <p>
  Here are the 2 local images and the final image:
 </p>
 <p>
  <img alt="composite" src="https://blog.kitware.com/blog/files/53_1407970988.png"/>
 </p>
 <p>
  In a future blog, I will talk about block-based streaming. Until then, happy coding.
 </p>
</div>
