<meta charset="utf-8">
<div class="entry-content">
 <h1>
  CityGML Reader
 </h1>
 <p>
  CityGML is an OpenGeospatial (OGC) standard for describing 3D models of cities and landscapes. It describes buildings, roads, rivers, bridges, vegetation, and city furniture using a hierarchical XML format. CityGML has support for levels of details (LODs) which can be used to speed up loading and rendering. Recently, we have added a new CityGML reader to VTK and ParaView in order to support
  <a href="https://www.iarpa.gov/index.php/research-programs/core3d">
   IARPA CORE3D
  </a>
  , an ongoing effort which is producing Urban 3D data from satellite imagery and point clouds. The reader creates a multiblock dataset with field arrays to specify the texture file and colors (material) associated with each block.
 </p>
 <div class="wp-caption aligncenter" id="attachment_23735" style="width: 1034px">
  <img alt="" class="wp-image-23735 size-large" height="377" sizes="(max-width: 1024px) 100vw, 1024px" src="http://blog.kitware.com/wp-content/uploads/2018/10/geoRES_testdata_multiblock-1-1024x377.png" srcset="https://blog.kitware.com/wp-content/uploads/2018/10/geoRES_testdata_multiblock-1-1024x377.png 1024w, https://blog.kitware.com/wp-content/uploads/2018/10/geoRES_testdata_multiblock-1-300x111.png 300w, https://blog.kitware.com/wp-content/uploads/2018/10/geoRES_testdata_multiblock-1-768x283.png 768w, https://blog.kitware.com/wp-content/uploads/2018/10/geoRES_testdata_multiblock-1-220x81.png 220w, https://blog.kitware.com/wp-content/uploads/2018/10/geoRES_testdata_multiblock-1-250x92.png 250w, https://blog.kitware.com/wp-content/uploads/2018/10/geoRES_testdata_multiblock-1-355x131.png 355w, https://blog.kitware.com/wp-content/uploads/2018/10/geoRES_testdata_multiblock-1-730x269.png 730w, https://blog.kitware.com/wp-content/uploads/2018/10/geoRES_testdata_multiblock-1-90x33.png 90w" width="1024"/>
  <p class="wp-caption-text">
   Sample CityGML: Three LOD3 Buildings (CityGML v1.0). File read into ParaView as a multiblock.
  </p>
 </div>
 <p>
  Because VTK does not support (yet) applying texture or color to individual blocks, we use a ParaView script (see
  <a href="http://blog.kitware.com/wp-content/uploads/2018/10/citygml-paraview-apply-texture.zip">
   citygml-paraview-apply-texture
  </a>
  ) to flatten the multiblock dataset so we can color and texture the resulting polygonal datasets. We use a similar technique in VTK to test the reader (see
  <a href="https://gitlab.kitware.com/vtk/vtk/blob/master/IO/CityGML/Testing/Cxx/TestCityGMLReader.cxx">
   TestCityGMLReader.cxx
  </a>
  )
 </p>
 <div class="wp-caption aligncenter" id="attachment_23733" style="width: 1034px">
  <img alt="" class="wp-image-23733 size-large" height="358" sizes="(max-width: 1024px) 100vw, 1024px" src="http://blog.kitware.com/wp-content/uploads/2018/10/geoRES_testdata_texture-1024x358.png" srcset="https://blog.kitware.com/wp-content/uploads/2018/10/geoRES_testdata_texture-1024x358.png 1024w, https://blog.kitware.com/wp-content/uploads/2018/10/geoRES_testdata_texture-300x105.png 300w, https://blog.kitware.com/wp-content/uploads/2018/10/geoRES_testdata_texture-768x268.png 768w, https://blog.kitware.com/wp-content/uploads/2018/10/geoRES_testdata_texture-220x77.png 220w, https://blog.kitware.com/wp-content/uploads/2018/10/geoRES_testdata_texture-250x87.png 250w, https://blog.kitware.com/wp-content/uploads/2018/10/geoRES_testdata_texture-355x124.png 355w, https://blog.kitware.com/wp-content/uploads/2018/10/geoRES_testdata_texture-730x255.png 730w, https://blog.kitware.com/wp-content/uploads/2018/10/geoRES_testdata_texture-90x31.png 90w, https://blog.kitware.com/wp-content/uploads/2018/10/geoRES_testdata_texture.png 1523w" width="1024"/>
  <p class="wp-caption-text">
   Sample CityGML: Three LOD3 Buildings (CityGML v1.0). Multiblock flattened, textured and colored in ParaView.
  </p>
 </div>
 <p>
  The reader has two parameters: level of detail (LOD) and ‘use transparency as opacity.’ Because the sample file used to generate the previous images specifies opacity values rather than transparency values, the reader needs this second option set. The figure below shows another sample CityGML file displayed in ParaView.
 </p>
 <div class="wp-caption aligncenter" id="attachment_23741" style="width: 1034px">
  <img alt="" class="wp-image-23741 size-large" height="358" sizes="(max-width: 1024px) 100vw, 1024px" src="http://blog.kitware.com/wp-content/uploads/2018/10/citygml_2.0_test-1024x358.png" srcset="https://blog.kitware.com/wp-content/uploads/2018/10/citygml_2.0_test-1024x358.png 1024w, https://blog.kitware.com/wp-content/uploads/2018/10/citygml_2.0_test-300x105.png 300w, https://blog.kitware.com/wp-content/uploads/2018/10/citygml_2.0_test-768x268.png 768w, https://blog.kitware.com/wp-content/uploads/2018/10/citygml_2.0_test-220x77.png 220w, https://blog.kitware.com/wp-content/uploads/2018/10/citygml_2.0_test-250x87.png 250w, https://blog.kitware.com/wp-content/uploads/2018/10/citygml_2.0_test-355x124.png 355w, https://blog.kitware.com/wp-content/uploads/2018/10/citygml_2.0_test-730x255.png 730w, https://blog.kitware.com/wp-content/uploads/2018/10/citygml_2.0_test-90x31.png 90w, https://blog.kitware.com/wp-content/uploads/2018/10/citygml_2.0_test.png 1523w" width="1024"/>
  <p class="wp-caption-text">
   Sample CityGML: First v2.0 CityGML file (aka ‘Railway’) displayed in ParaView
  </p>
 </div>
 <p>
  The CityGML reader is available in VTK and ParaView source code. If you have any questions or need consulting related to this work,  please email us at kitware@kitware.com.
 </p>
 <hr/>
 <p>
  <em>
   Supported by the Intelligence Advanced Research Projects Activity (IARPA) via Department of Interior/ Interior Business Center (DOI/IBC) contract number D17PC00286. The U.S. Government is authorized to reproduce and distribute reprints for Governmental purposes notwithstanding any copyright annotation thereon. Disclaimer: The views and conclusions contained herein are those of the authors and should not be interpreted as necessarily representing the official policies or endorsements, either expressed or implied, of IARPA, DOI/IBC, or the U.S. Government.
  </em>
 </p>
</div>
