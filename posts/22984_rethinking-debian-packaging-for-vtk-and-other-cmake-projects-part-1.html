<meta charset="utf-8">
<div class="entry-content">
 <h1>
  Introduction
 </h1>
 <p>
  At Kitware, we have always done our best to passively help Linux distribution maintainers by accepting pull requests from downstream and adjusting the
  <a href="https://www.cmake.org/" rel="noopener" target="_blank">
   CMake
  </a>
  build system to support the needs of distributions. But now, we’ve decided to take it one step further and actively take part in the downstream packaging process. Specifically, we have embarked on a project to officially support the
  <a href="https://www.vtk.org/" rel="noopener" target="_blank">
   Visualization Toolkit
  </a>
  (VTK) on Debian and its derivatives and to provide all of the Debian packaging scripts to expedite the process of shipping new VTK releases with Debian.
 </p>
 <p>
  To support this effort, we have created a Debian package with a brand new set of Debhelper scripts. We have named this project “dh-cmake.” It allows Debhelper to take advantage of some of the more advanced capabilities of CMake, such as these:
 </p>
 <ul>
  <li>
   install CMake components into separate binary packages, for example, install the “Development” component into libexample-dev and the “Libraries” component into libexample
   <br/>
   This allows downstream packages to take advantage of the COMPONENT parameter passed to CMake’s
   <a href="https://cmake.org/cmake/help/latest/command/install.html" rel="noopener" target="_blank">
    install()
   </a>
   command.
  </li>
  <li>
   integrate with CTest and CDash so that the output of dh_auto_configure, dh_auto_build and dh_auto_test are submitted to a CDash server in order to monitor the health of a Debian package
   <strong>
    <br/>
   </strong>
   This functionality is especially important for us because it unifies our software development process with the Debian packaging process.
  </li>
  <li>
   integrate with CPack components and component groups
   <strong>
    <br/>
   </strong>
   This is similar to the CMake component installation, but it also propagates CPack’s internal dependency graph into the output packages. For instance, libexample-dev will automatically depend on libexample, if the upstream project is CPack-aware and has this dependency information in its CMakeLists.txt file.
  </li>
 </ul>
 <p>
  After several months of development and testing, we have a prototype of dh-cmake, which provides all of the above features and successfully builds VTK.
 </p>
 <h1>
  What’s Next?
 </h1>
 <p>
  We want to eventually get dh-cmake into Debian proper. In the meantime, it is available for immediate download from our own servers. You can
  <a href="https://gitlab.kitware.com/debian/dh-cmake" rel="noopener" target="_blank">
   download the source code
  </a>
  or you can install the binaries from our APT repository. To add the repository to your Debian Sid instance, follow the instructions at
  <a href="https://apt.kitware.com/" rel="noopener" target="_blank">
   https://apt.kitware.com
  </a>
  . Then, install dh-cmake:
 </p>
 <p>
 </p>
 <!-- Crayon Syntax Highlighter v_2.7.2_beta -->
 <div class="crayon-syntax crayon-theme-coy crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c41e887423ba366490172" style=" margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 25px !important;">
  <div class="crayon-plain-wrap">
   <textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 16px !important; line-height: 25px !important;" wrap="soft">
sudo apt-get install dh-cmake</textarea>
  </div>
  <div class="crayon-main">
   <table class="crayon-table">
    <tr class="crayon-row">
     <td class="crayon-nums " data-settings="show">
      <div class="crayon-nums-content" style="font-size: 16px !important; line-height: 25px !important;">
       <div class="crayon-num" data-line="crayon-5c41e887423ba366490172-1">
        1
       </div>
      </div>
     </td>
     <td class="crayon-code">
      <div class="crayon-pre" style="font-size: 16px !important; line-height: 25px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <div class="crayon-line" id="crayon-5c41e887423ba366490172-1">
        <span class="crayon-e">
         sudo
        </span>
        <span class="crayon-v">
         apt
        </span>
        <span class="crayon-o">
         -
        </span>
        <span class="crayon-r">
         get
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         install
        </span>
        <span class="crayon-v">
         dh
        </span>
        <span class="crayon-o">
         -
        </span>
        <span class="crayon-v">
         cmake
        </span>
       </div>
      </div>
     </td>
    </tr>
   </table>
  </div>
 </div>
 <!-- [Format Time: 0.0002 seconds] -->
 <p>
 </p>
 <p>
  We will be publishing nightly builds of VTK in the “vtk-master” package soon. You can download the source code for our VTK Debian packaging at
  <a href="https://gitlab.kitware.com/debian/vtk" rel="noopener" target="_blank">
   https://gitlab.kitware.com/debian/vtk
  </a>
  .
 </p>
 <p>
  While this is a major milestone for supporting VTK on Debian, there is still a lot of work to do. The next steps will be to polish off dh-cmake by adding documentation and friendlier error messages and continuing to refine the VTK package to bring it closer to what we want it to look like at release time. We will also be publishing Debian packages for Intel’s OSPRay and Embree projects later this year, and we hope that other CMake-based Debian packages will follow our example and use dh-cmake for their own packaging.
 </p>
 <p>
  Stay tuned for
  <a href="https://blog.kitware.com/rethinking-debian-packaging-for-vtk-and-other-cmake-projects-part-2/">
   part two
  </a>
  of this blog series, where we explain more of the technical details of dh-cmake and the challenges that we faced in its development. Until then, happy hacking!
 </p>
</div>
