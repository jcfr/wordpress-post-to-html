<meta charset="utf-8">
<div class="entry-content">
 <p>
  <img alt="logo-mono" class="size-medium wp-image-15460 aligncenter" height="77" sizes="(max-width: 300px) 100vw, 300px" src="https://blog.kitware.com/wp-content/uploads/2016/08/logo-mono-300x77.png" srcset="https://blog.kitware.com/wp-content/uploads/2016/08/logo-mono-300x77.png 300w, https://blog.kitware.com/wp-content/uploads/2016/08/logo-mono-220x57.png 220w, https://blog.kitware.com/wp-content/uploads/2016/08/logo-mono-250x65.png 250w, https://blog.kitware.com/wp-content/uploads/2016/08/logo-mono-355x92.png 355w, https://blog.kitware.com/wp-content/uploads/2016/08/logo-mono-90x23.png 90w, https://blog.kitware.com/wp-content/uploads/2016/08/logo-mono.png 484w" width="300"/>
 </p>
 <p>
  HPCCloud v0.9 is now available. This post introduces HPCCloud and some of the features that the release delivers.
 </p>
 <h2>
  Introduction
 </h2>
 <p>
  HPCCloud is a web-based simulation environment that utilizes web technologies to deliver an innovative Software as a Service (SaaS) advanced modeling and simulation environment. The platform allows the user to take existing computational code that is designed to run on a high-performance computing (HPC) resource and develop an end-to-end simulation workflow, from input generation right through to post-processing. HPCCloud presents the workflows through a simple, intuitive user interface (UI), which shields the user from much of the complexity that comes with running a simulation code on an HPC resource.
 </p>
 <p>
  One of the core features of HPCCloud is the ability to create clusters using a cloud provider such as
  <a href="https://aws.amazon.com/ec2/">
   Amazon’s Elastic Compute Cloud (EC2)
  </a>
  . HPCCloud can tailor the clusters to a particular simulation workflow in terms of size, specification of the nodes and software provisioned. These clusters are created on demand and can be shutdown when the workflow is complete. Therefore, costs only incur when the workflow is active; there are no ongoing maintenance costs like those associated with “traditional” HPC clusters.
 </p>
 <p>
  HPCCloud comes with a couple of built-in workflows such as one that allows
  <a href="http://www.pyfr.org/">
   PyFR
  </a>
  simulations to be run. The workflow visualizes the results with
  <a href="http://www.paraview.org/web/">
   ParaViewWeb
  </a>
  . HPCCloud makes it straightforward to add new simulation workflows to support a wide range of domains and applications.
 </p>
 <h2>
  Getting Started
 </h2>
 <p>
  The HPCCloud stack can be deployed using
  <a href="https://www.ansible.com/">
   Ansible
  </a>
  .
  <a href="https://www.vagrantup.com/">
   Vagrant
  </a>
  offers the quickest way to get things up and running. With a Vagrant deployment, the full stack is deployed on a single virtual machine. The demo mode also provisions the virtual machine as a “cluster” on which to run toy jobs. (This mode is not recommended for running in production.)
 </p>
 <p>
  A Vagrant deployment has the following requirements:
 </p>
 <ul>
  <li>
   <a href="https://www.virtualbox.org/wiki/Downloads">
    VirtualBox &gt;= 5.0
   </a>
   ;
  </li>
  <li>
   <a href="http://docs.ansible.com/ansible/intro_installation.html">
    Ansible &gt;= 2.1
   </a>
   ; and
  </li>
  <li>
   <a href="https://www.vagrantup.com/docs/installation/">
    Vagrant &gt;= 1.8
   </a>
   .
  </li>
 </ul>
 <p>
  Once the dependencies have installed, run the following commands to clone the deployment repository and create the virtual machine. Note that the stack will use ports 8080 (Girder app) and 8888 (HPCCloud app), so these should be free on the machine.
 </p>
 <!-- Crayon Syntax Highlighter v_2.7.2_beta -->
 <div class="crayon-syntax crayon-theme-coy crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c41e858c26ee729537673" style=" margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 25px !important;">
  <div class="crayon-plain-wrap">
   <textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 16px !important; line-height: 25px !important;" wrap="soft">
git clone git@github.com:Kitware/HPCCloud-deploy.git HPCCloud
cd HPCCloud
git checkout v0.9.0
DEMO=1 vagrant up</textarea>
  </div>
  <div class="crayon-main">
   <table class="crayon-table">
    <tr class="crayon-row">
     <td class="crayon-nums " data-settings="show">
      <div class="crayon-nums-content" style="font-size: 16px !important; line-height: 25px !important;">
       <div class="crayon-num" data-line="crayon-5c41e858c26ee729537673-1">
        1
       </div>
       <div class="crayon-num" data-line="crayon-5c41e858c26ee729537673-2">
        2
       </div>
       <div class="crayon-num" data-line="crayon-5c41e858c26ee729537673-3">
        3
       </div>
       <div class="crayon-num" data-line="crayon-5c41e858c26ee729537673-4">
        4
       </div>
      </div>
     </td>
     <td class="crayon-code">
      <div class="crayon-pre" style="font-size: 16px !important; line-height: 25px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <div class="crayon-line" id="crayon-5c41e858c26ee729537673-1">
        <span class="crayon-e">
         git
        </span>
        <span class="crayon-r">
         clone
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         git
        </span>
        <span class="crayon-sy">
         @
        </span>
        <span class="crayon-v">
         github
        </span>
        <span class="crayon-e">
         .com
        </span>
        <span class="crayon-o">
         :
        </span>
        <span class="crayon-v">
         Kitware
        </span>
        <span class="crayon-o">
         /
        </span>
        <span class="crayon-v">
         HPCCloud
        </span>
        <span class="crayon-o">
         -
        </span>
        <span class="crayon-v">
         deploy
        </span>
        <span class="crayon-e">
         .git
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         HPCCloud
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e858c26ee729537673-2">
        <span class="crayon-r">
         cd
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         HPCCloud
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e858c26ee729537673-3">
        <span class="crayon-e">
         git
        </span>
        <span class="crayon-e">
         checkout
        </span>
        <span class="crayon-v">
         v0
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-cn">
         9.0
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e858c26ee729537673-4">
        <span class="crayon-v">
         DEMO
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-cn">
         1
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         vagrant
        </span>
        <span class="crayon-v">
         up
        </span>
       </div>
      </div>
     </td>
    </tr>
   </table>
  </div>
 </div>
 <!-- [Format Time: 0.0002 seconds] -->
 <p>
  When the provisioning process has completed (note that this will take some time), access to HPCCloud becomes available at
  <a href="http://localhost:8888">
   http://localhost:8888
  </a>
  . A demo account will have been created with username “hpccloud
  <em>
   “
  </em>
  and password “letmein.”
 </p>
 <h2>
  Projects and simulations
 </h2>
 <p>
  HPCCloud uses the concept of projects to organize simulation runs. A project also determines the particular simulation workflow that will be followed for a simulation run. Simulations are created within a project, as they are instances of a particular simulation workflow. A simulation leads the user through the workflow steps. So, adding a new simulation workflow to HPCCloud involves implementing a new project type and its associated simulation. The below image shows the “Input Generation” step of the PyFR simulation workflow.
 </p>
 <div class="wp-caption aligncenter" id="attachment_15872" style="width: 610px">
  <a href="https://blog.kitware.com/wp-content/uploads/2016/08/simput.png" target="_blank">
   <img class="wp-image-15872" height="441" sizes="(max-width: 600px) 100vw, 600px" src="https://blog.kitware.com/wp-content/uploads/2016/08/simput-300x221.png" srcset="https://blog.kitware.com/wp-content/uploads/2016/08/simput-300x221.png 300w, https://blog.kitware.com/wp-content/uploads/2016/08/simput-768x565.png 768w, https://blog.kitware.com/wp-content/uploads/2016/08/simput-1024x753.png 1024w, https://blog.kitware.com/wp-content/uploads/2016/08/simput-220x162.png 220w, https://blog.kitware.com/wp-content/uploads/2016/08/simput-250x184.png 250w, https://blog.kitware.com/wp-content/uploads/2016/08/simput-355x261.png 355w, https://blog.kitware.com/wp-content/uploads/2016/08/simput-730x537.png 730w, https://blog.kitware.com/wp-content/uploads/2016/08/simput-90x66.png 90w" width="600"/>
  </a>
  <p class="wp-caption-text">
   An HPCCloud PyFR simulation workflow shows the “Input Generation” step.
  </p>
 </div>
 <h2>
  Access to HPC resources
 </h2>
 <p>
  A simulation workflow needs to run on an HPC resource. HPCCloud supports two types of resources: “Traditional” clusters are what most people think of as HPC resources. These are dedicated statically provisioning machines. HPCCloud also provides the ability to create dynamic clusters in Amazon Elastic Compute Cloud (EC2). HPCCloud simulation workflows are portable across HPC resources. So, the same workflow can run on a traditional cluster as well as on a cloud cluster. The HPCCloud infrastructure shields the workflow developer from many of the differences between these two resource types. The following sections detail how to set up access to these two different types of resources.
 </p>
 <p>
  <strong>
   Traditional HPC cluster
  </strong>
 </p>
 <div class="wp-caption aligncenter" id="attachment_15875" style="width: 610px">
  <a href="https://blog.kitware.com/wp-content/uploads/2016/08/tradcluster.png" target="_blank">
   <img class="wp-image-15875" height="441" sizes="(max-width: 600px) 100vw, 600px" src="https://blog.kitware.com/wp-content/uploads/2016/08/tradcluster-300x221.png" srcset="https://blog.kitware.com/wp-content/uploads/2016/08/tradcluster-300x221.png 300w, https://blog.kitware.com/wp-content/uploads/2016/08/tradcluster-768x565.png 768w, https://blog.kitware.com/wp-content/uploads/2016/08/tradcluster-1024x753.png 1024w, https://blog.kitware.com/wp-content/uploads/2016/08/tradcluster-220x162.png 220w, https://blog.kitware.com/wp-content/uploads/2016/08/tradcluster-250x184.png 250w, https://blog.kitware.com/wp-content/uploads/2016/08/tradcluster-355x261.png 355w, https://blog.kitware.com/wp-content/uploads/2016/08/tradcluster-730x537.png 730w, https://blog.kitware.com/wp-content/uploads/2016/08/tradcluster-90x66.png 90w" width="600"/>
  </a>
  <p class="wp-caption-text">
   Adding a new traditional cluster to HPCCloud.
  </p>
 </div>
 <p>
  HPCCloud accesses traditional clusters using SSH. In order to run simulation workflows on a cluster, a key pair needs to be setup to give HPCCloud secure access to the cluster. Note that the cluster must support key-based SSH access.
 </p>
 <p>
  To go to the preference page, click on the username in the top right, and select “Cluster.” Click the “+” icon in the toolbar. HPCCloud will present a blank form in which to fill out details of the cluster. The form requires a cluster name, a username and the hostname of the machine. When the necessary fields are filled out, click “Save.” HPCCloud will then generate a SSH key pair for the cluster.
 </p>
 <p>
  A “Test” button and a form field with a shell command containing the public key will soon appear. This command will copy the public key to the
  <span style="font-family: courier new,courier;">
   authorized_keys
  </span>
  file of the user account to access the cluster.  Execute this command to add the public key so that HPCCloud can connect with it and run simulations. Once this command has executed, click on “Test.” This will test the connection to the cluster to ensure that the key pair has successfully set up and that HPCCloud can run jobs on the cluster. Note that there is also a workflow-specific configuration that HPCCloud may require to receive the information it needs to run a particular workflow. For example, in the case of PyFR, this information details the back-ends that the cluster supports.
 </p>
 <p>
  <strong>
   Amazon Elastic Compute Cloud (EC2) clusters
  </strong>
 </p>
 <p>
  The creation of EC2 instances require access credentials so that the appropriate account is billed for the resources used. HPCCloud uses an AWS profile to manage these access credentials. The profile contains an
  <a href="https://aws.amazon.com/developers/access-keys/">
   AWS access key
  </a>
  and region information needed to connect to AWS. This access key will be used by HPCCloud to authenticate with AWS application programming interfaces (APIs) in order to launch the cloud instances needed to create dynamic clusters.
 </p>
 <p>
  In order to create a new AWS profile, go to the preference page and click “EC2.” Click the “+” icon in the toolbar. In the blank form that appears, fill out the details of the AWS profile. Most important are AWS key and secret key. If necessary, select a different region and availability zone; us-east(a) is selected by default. Click “Save Profile” and the AWS credentials will be validated. If they’re valid, the profile will save. The profile will be added to the list in the sidebar, and it becomes possible to launch and provision EC2 instances from a workflow. Note that HPCCloud currently only supports U.S. regions. Please contact us if you are interested in launching clusters in another region.
 </p>
 <div class="wp-caption aligncenter" id="attachment_15877" style="width: 610px">
  <a href="https://blog.kitware.com/wp-content/uploads/2016/08/aws.png" target="_blank">
   <img class="wp-image-15877" height="441" sizes="(max-width: 600px) 100vw, 600px" src="https://blog.kitware.com/wp-content/uploads/2016/08/aws-300x221.png" srcset="https://blog.kitware.com/wp-content/uploads/2016/08/aws-300x221.png 300w, https://blog.kitware.com/wp-content/uploads/2016/08/aws-768x565.png 768w, https://blog.kitware.com/wp-content/uploads/2016/08/aws-1024x753.png 1024w, https://blog.kitware.com/wp-content/uploads/2016/08/aws-220x162.png 220w, https://blog.kitware.com/wp-content/uploads/2016/08/aws-250x184.png 250w, https://blog.kitware.com/wp-content/uploads/2016/08/aws-355x261.png 355w, https://blog.kitware.com/wp-content/uploads/2016/08/aws-730x537.png 730w, https://blog.kitware.com/wp-content/uploads/2016/08/aws-90x66.png 90w" width="600"/>
  </a>
  <p class="wp-caption-text">
   Creating an AWS profile to provide access to EC2.
  </p>
 </div>
 <p>
  When running simulation workflows on dynamic EC2 clusters, it is important to ensure that the cluster is terminated once the simulation workflow is no longer needed, otherwise continued costs will incur. HPCCloud provides the ability to terminate a cluster in the simulation view. The
  <a href="https://aws.amazon.com/console/">
   AWS Management console
  </a>
  can be used to confirm that all resources have been cleaned up at the end of a session.
 </p>
 <h2>
  Running simple PyFR workflow with Simput
 </h2>
 <p>
  The PyFR workflow has three stages:
 </p>
 <ul>
  <li>
   <em>
    Input generation
   </em>
   – HPCCloud’s Simput component will generate an input desk for the simulation.
  </li>
  <li>
   <em>
    Simulation
   </em>
   – The simulation code will run on the demo cluster.
  </li>
  <li>
   <em>
    Visualization
   </em>
   – Finally we will visualize the results using
   <a href="http://www.paraview.org/web/">
    ParaViewWeb
   </a>
   .
  </li>
 </ul>
 <p>
  These steps run a simple end-to-end simulation workflow. The demo VM comes provisioned with a traditional cluster that can be used to run this example.
 </p>
 <ol>
  <li>
   Create a project and select the type “pyfr.” Name the project, and then upload the
   <a href="https://raw.githubusercontent.com/vincentlab/PyFR/develop/examples/euler_vortex_2d/euler_vortex_2d.msh">
    mesh input file
   </a>
   (right click and “Save Link As…” to download).
  </li>
  <li>
   Create a simulation and name it.
  </li>
  <li>
   Go to the new simulation and click on the “Input” step on the left side bar.
  </li>
  <li>
   Follow the Simput instructions for PyFr, which
   <a href="https://github.com/Kitware/HPCCloud/blob/release/docs/usage/simput.md#usage-with-pyfr---euler-vortex-2d">
    HPCCloud docs
   </a>
   outlines.
  </li>
  <li>
   Click on the “Simulation” step in the left side bar, then select the demo cluster.
   <p>
    <div class="wp-caption aligncenter" id="attachment_15875" style="width: 610px">
     <a href="https://blog.kitware.com/wp-content/uploads/2016/08/tradcluster.png">
      <img class="wp-image-15875" height="441" sizes="(max-width: 600px) 100vw, 600px" src="https://blog.kitware.com/wp-content/uploads/2016/08/tradcluster-300x221.png" srcset="https://blog.kitware.com/wp-content/uploads/2016/08/tradcluster-300x221.png 300w, https://blog.kitware.com/wp-content/uploads/2016/08/tradcluster-768x565.png 768w, https://blog.kitware.com/wp-content/uploads/2016/08/tradcluster-1024x753.png 1024w, https://blog.kitware.com/wp-content/uploads/2016/08/tradcluster-220x162.png 220w, https://blog.kitware.com/wp-content/uploads/2016/08/tradcluster-250x184.png 250w, https://blog.kitware.com/wp-content/uploads/2016/08/tradcluster-355x261.png 355w, https://blog.kitware.com/wp-content/uploads/2016/08/tradcluster-730x537.png 730w, https://blog.kitware.com/wp-content/uploads/2016/08/tradcluster-90x66.png 90w" width="600"/>
     </a>
     <p class="wp-caption-text">
      Adding a new traditional cluster to HPCCloud.
     </p>
    </div>
   </p>
  </li>
  <li>
   Click “Run Simulation” to go to the “Simulation View” sub-step. Here you can view logs and statuses of both tasks and jobs. When they all reach the “Complete” status, the simulation has completed. A “Visualize” button will appear. Click on it to move the the next step.
   <a href="https://blog.kitware.com/wp-content/uploads/2016/08/running-1.png" target="_blank">
    <img class="aligncenter wp-image-15874" height="441" sizes="(max-width: 600px) 100vw, 600px" src="https://blog.kitware.com/wp-content/uploads/2016/08/running-1-300x221.png" srcset="https://blog.kitware.com/wp-content/uploads/2016/08/running-1-300x221.png 300w, https://blog.kitware.com/wp-content/uploads/2016/08/running-1-768x565.png 768w, https://blog.kitware.com/wp-content/uploads/2016/08/running-1-1024x753.png 1024w, https://blog.kitware.com/wp-content/uploads/2016/08/running-1-220x162.png 220w, https://blog.kitware.com/wp-content/uploads/2016/08/running-1-250x184.png 250w, https://blog.kitware.com/wp-content/uploads/2016/08/running-1-355x261.png 355w, https://blog.kitware.com/wp-content/uploads/2016/08/running-1-730x537.png 730w, https://blog.kitware.com/wp-content/uploads/2016/08/running-1-90x66.png 90w" width="600"/>
   </a>
  </li>
  <li>
   In the “Visualization” step, select the server and click “Start Visualization.” It will go to a job monitor page similar to the one for the “Simulation” step described in step 6.
  </li>
  <li>
   Wait for the tasks to complete, and the primary job (ParaViewWeb) to run. A button labeled “Visualize” will appear. Click this to go to the ParaViewWeb tool in the browser to view and manipulate the output of the simulation.
  </li>
 </ol>
 <div class="wp-caption aligncenter" id="attachment_15878" style="width: 610px">
  <a href="https://blog.kitware.com/wp-content/uploads/2016/08/visualizer2.png" target="_blank">
   <img class="wp-image-15878" height="441" sizes="(max-width: 600px) 100vw, 600px" src="https://blog.kitware.com/wp-content/uploads/2016/08/visualizer2-300x221.png" srcset="https://blog.kitware.com/wp-content/uploads/2016/08/visualizer2-300x221.png 300w, https://blog.kitware.com/wp-content/uploads/2016/08/visualizer2-768x565.png 768w, https://blog.kitware.com/wp-content/uploads/2016/08/visualizer2-1024x753.png 1024w, https://blog.kitware.com/wp-content/uploads/2016/08/visualizer2-220x162.png 220w, https://blog.kitware.com/wp-content/uploads/2016/08/visualizer2-250x184.png 250w, https://blog.kitware.com/wp-content/uploads/2016/08/visualizer2-355x261.png 355w, https://blog.kitware.com/wp-content/uploads/2016/08/visualizer2-730x537.png 730w, https://blog.kitware.com/wp-content/uploads/2016/08/visualizer2-90x66.png 90w" width="600"/>
  </a>
  <p class="wp-caption-text">
   HPCCloud visualizes and manipulates the output of the simulation.
  </p>
 </div>
 <h2>
  Getting Involved
 </h2>
 <p>
  HPCCloud and its components are open source under the following repositories:
 </p>
 <ul>
  <li>
   <a href="https://github.com/Kitware/HPCCloud">
    HPCCloud
   </a>
   (the HPCCloud application code);
  </li>
  <li>
   <a href="https://github.com/Kitware/cumulus">
    Cumulus
   </a>
   (the backend components that support cluster management/access);
  </li>
  <li>
   <a href="https://github.com/Kitware/simput">
    Simput
   </a>
   (the client side library used to provide UI for input generation); and
  </li>
  <li>
   <a href="https://github.com/Kitware/HPCCloud-deploy">
    HPCCloud-deploy
   </a>
   (the ansible playbooks used to deploy the HPCCloud stack).
  </li>
 </ul>
 <p>
  This work was supported by the Office of Nuclear Energy, of the U.S. Department of Energy under Contract No. DE-SC0012037, through the SBIR grant “Web-Based Computational Model Builder for Nuclear Energy Advanced Modeling &amp; Simulation”, under program manager Dan Funk.
 </p>
 <p>
 </p>
</div>
