<meta charset="utf-8">
<div class="entry-content">
 <p>
  With this blog, I start a new series covering some of the new features in VTK’s data model. Please note that a lot of these improvements are very new and are likely to change as we address various kinks we encounter as we apply them to various problems.
 </p>
 <p>
  In these blogs, I will depend heavily on the excellent work done by
  <a href="https://www.kitware.com/allison-vacanti/">
   David Lonie
  </a>
  , which is summarized
  <a href="http://www.vtk.org/Wiki/VTK/InSituDataStructures">
   here
  </a>
  and
  <a href="https://blog.kitware.com/using-simulation-memory-in-catalyst-co-processing/">
   here
  </a>
  . I recommend taking a close look at the Wiki page before digging too deep into these blogs as I will not provide the same level of detail. In summary, we made a number of changes to VTK to allow easy creation of datasets and data arrays that use memory layouts different than VTK’s defaults. The main objective of these changes was to enable tight coupling of VTK with other codes without the need to deep copy data structures back and forth. Our main application for this is
  <em>
   in situ
  </em>
  analysis and visualization where the
  <strong>
   other code
  </strong>
  is a simulation, usually running on a supercomputer. However, as I will demonstrate, these changes open the door for a lot more. Let’s get down to it.
 </p>
 <h2 id="constant-array">
  Constant Array
 </h2>
 <p>
  The simplest example that I could think of is a VTK data array that has one unique value. Normally, such an array would be created and populated as follows.
 </p>
 <!-- Crayon Syntax Highlighter v_2.7.2_beta -->
 <div class="crayon-syntax crayon-theme-coy crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c41e81d20d15096668422" style=" margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 25px !important;">
  <div class="crayon-plain-wrap">
   <textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 16px !important; line-height: 25px !important;" wrap="soft">
vtkNew&lt;vtkFloatArray&gt; constArray;
constArray-&gt;SetNumberOfTuples(nvalues);
for(vtkIdType i=0; i&lt;nvales; i++)
{
  constArray-&gt;SetValue(i, constValue);
}</textarea>
  </div>
  <div class="crayon-main">
   <table class="crayon-table">
    <tr class="crayon-row">
     <td class="crayon-nums " data-settings="show">
      <div class="crayon-nums-content" style="font-size: 16px !important; line-height: 25px !important;">
       <div class="crayon-num" data-line="crayon-5c41e81d20d15096668422-1">
        1
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d15096668422-2">
        2
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d15096668422-3">
        3
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d15096668422-4">
        4
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d15096668422-5">
        5
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d15096668422-6">
        6
       </div>
      </div>
     </td>
     <td class="crayon-code">
      <div class="crayon-pre" style="font-size: 16px !important; line-height: 25px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <div class="crayon-line" id="crayon-5c41e81d20d15096668422-1">
        <span class="crayon-v">
         vtkNew
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-v">
         vtkFloatArray
        </span>
        <span class="crayon-o">
         &gt;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         constArray
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d15096668422-2">
        <span class="crayon-v">
         constArray
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-e">
         SetNumberOfTuples
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         nvalues
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d15096668422-3">
        <span class="crayon-st">
         for
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-i">
         vtkIdType
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         i
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         i
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-v">
         nvales
        </span>
        <span class="crayon-sy">
         ;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         i
        </span>
        <span class="crayon-o">
         ++
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d15096668422-4">
        <span class="crayon-sy">
         {
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d15096668422-5">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         constArray
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-e">
         SetValue
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         i
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         constValue
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d15096668422-6">
        <span class="crayon-sy">
         }
        </span>
       </div>
      </div>
     </td>
    </tr>
   </table>
  </div>
 </div>
 <!-- [Format Time: 0.0003 seconds] -->
 <p>
  <span style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen-Sans, Ubuntu, Cantarell, 'Helvetica Neue', sans-serif;">
   Obviously, this array uses
  </span>
  <span style="font-family: courier;">
   nvalues * sizeof(float)
  </span>
  <span style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen-Sans, Ubuntu, Cantarell, 'Helvetica Neue', sans-serif;">
   bytes of memory in addition to whatever memory an array requires internally. Pretty wasteful. Wouldn’t it be great if we could create an array that uses only
  </span>
  <span style="font-family: courier;">
   sizeof(float)
  </span>
  <span style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen-Sans, Ubuntu, Cantarell, 'Helvetica Neue', sans-serif;">
   bytes (+ whatever the array uses internally)? With the zero copy infrastructure, we can. Take a quick look at the
  </span>
  <a href="https://github.com/berkgeveci/berkgeveci.github.io/blob/jekyll/code/zero-copy/vtkConstantArray.h" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen-Sans, Ubuntu, Cantarell, 'Helvetica Neue', sans-serif;">
   header
  </a>
  <span style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen-Sans, Ubuntu, Cantarell, 'Helvetica Neue', sans-serif;">
   and the
  </span>
  <a href="https://github.com/berkgeveci/berkgeveci.github.io/blob/jekyll/code/zero-copy/vtkConstantArray.txx" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen-Sans, Ubuntu, Cantarell, 'Helvetica Neue', sans-serif;">
   implementation
  </a>
  <span style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen-Sans, Ubuntu, Cantarell, 'Helvetica Neue', sans-serif;">
   . I shamelessly copied and pasted much of this from
  </span>
  <a href="https://github.com/Kitware/VTK/blob/master/IO/Exodus/vtkCPExodusIIResultsArrayTemplate.txx" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen-Sans, Ubuntu, Cantarell, 'Helvetica Neue', sans-serif;">
   <span style="font-family: courier;">
    vtkCPExodusIIResultsArrayTemplate
   </span>
  </a>
  <span style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen-Sans, Ubuntu, Cantarell, 'Helvetica Neue', sans-serif;">
   as one can probably guess from the comments I left. This class looks fairly long but I actually had to change only a few lines of code, mainly:
  </span>
 </p>
 <!-- Crayon Syntax Highlighter v_2.7.2_beta -->
 <div class="crayon-syntax crayon-theme-coy crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c41e81d20d20810380582" style=" margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 25px !important;">
  <div class="crayon-plain-wrap">
   <textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 16px !important; line-height: 25px !important;" wrap="soft">
template &lt;class Scalar&gt; Scalar&amp; vtkConstantArray&lt;Scalar&gt;
::GetValueReference(vtkIdType idx)
{
  return this-&gt;Value;
}</textarea>
  </div>
  <div class="crayon-main">
   <table class="crayon-table">
    <tr class="crayon-row">
     <td class="crayon-nums " data-settings="show">
      <div class="crayon-nums-content" style="font-size: 16px !important; line-height: 25px !important;">
       <div class="crayon-num" data-line="crayon-5c41e81d20d20810380582-1">
        1
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d20810380582-2">
        2
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d20810380582-3">
        3
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d20810380582-4">
        4
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d20810380582-5">
        5
       </div>
      </div>
     </td>
     <td class="crayon-code">
      <div class="crayon-pre" style="font-size: 16px !important; line-height: 25px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <div class="crayon-line" id="crayon-5c41e81d20d20810380582-1">
        <span class="crayon-v">
         template
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-t">
         class
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         Scalar
        </span>
        <span class="crayon-o">
         &gt;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         Scalar
        </span>
        <span class="crayon-o">
         &amp;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtkConstantArray
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-v">
         Scalar
        </span>
        <span class="crayon-o">
         &gt;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d20810380582-2">
        <span class="crayon-o">
         ::
        </span>
        <span class="crayon-e">
         GetValueReference
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-e">
         vtkIdType
        </span>
        <span class="crayon-v">
         idx
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d20810380582-3">
        <span class="crayon-sy">
         {
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d20810380582-4">
        <span class="crayon-h">
        </span>
        <span class="crayon-st">
         return
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         this
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-v">
         Value
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d20810380582-5">
        <span class="crayon-sy">
         }
        </span>
       </div>
      </div>
     </td>
    </tr>
   </table>
  </div>
 </div>
 <!-- [Format Time: 0.0002 seconds] -->
 <p>
  Note that this code ignores the value index,
  <span style="font-family: courier;">
   idx
  </span>
  , which is expected for a constant array. We can exercise this code with the following.
 </p>
 <!-- Crayon Syntax Highlighter v_2.7.2_beta -->
 <div class="crayon-syntax crayon-theme-coy crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c41e81d20d24842648961" style=" margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 25px !important;">
  <div class="crayon-plain-wrap">
   <textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 16px !important; line-height: 25px !important;" wrap="soft">
vtkNew&lt;vtkConstantArray&lt;double&gt; &gt; testScalars;
testScalars-&gt;InitializeArray(10, 1000, 1);
testScalars-&gt;SetName("scalars");

vtkNew&lt;vtkImageData&gt; image;
image-&gt;SetDimensions(10, 10, 10);
image-&gt;GetPointData()-&gt;SetScalars(testScalars.GetPointer());

vtkNew&lt;vtkLineSource&gt; line;
line-&gt;SetPoint1(0, 0, 0);
line-&gt;SetPoint2(9, 9, 9);
line-&gt;SetResolution(50);

vtkNew&lt;vtkProbeFilter&gt; probe;
probe-&gt;SetSourceData(image.GetPointer());
probe-&gt;SetInputConnection(line-&gt;GetOutputPort());
probe-&gt;Update();

vtkDataArray* outScalars =
  probe-&gt;GetOutput()-&gt;GetPointData()-&gt;GetArray("scalars");
for (int i=0; i&lt;50; i++)
  {
  cout &lt;&lt; i &lt;&lt; " : " &lt;&lt; outScalars-&gt;GetTuple1(i) &lt;&lt; endl;
  }</textarea>
  </div>
  <div class="crayon-main">
   <table class="crayon-table">
    <tr class="crayon-row">
     <td class="crayon-nums " data-settings="show">
      <div class="crayon-nums-content" style="font-size: 16px !important; line-height: 25px !important;">
       <div class="crayon-num" data-line="crayon-5c41e81d20d24842648961-1">
        1
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d24842648961-2">
        2
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d24842648961-3">
        3
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d24842648961-4">
        4
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d24842648961-5">
        5
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d24842648961-6">
        6
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d24842648961-7">
        7
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d24842648961-8">
        8
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d24842648961-9">
        9
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d24842648961-10">
        10
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d24842648961-11">
        11
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d24842648961-12">
        12
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d24842648961-13">
        13
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d24842648961-14">
        14
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d24842648961-15">
        15
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d24842648961-16">
        16
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d24842648961-17">
        17
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d24842648961-18">
        18
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d24842648961-19">
        19
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d24842648961-20">
        20
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d24842648961-21">
        21
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d24842648961-22">
        22
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d24842648961-23">
        23
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d24842648961-24">
        24
       </div>
      </div>
     </td>
     <td class="crayon-code">
      <div class="crayon-pre" style="font-size: 16px !important; line-height: 25px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <div class="crayon-line" id="crayon-5c41e81d20d24842648961-1">
        <span class="crayon-v">
         vtkNew
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-v">
         vtkConstantArray
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-t">
         double
        </span>
        <span class="crayon-o">
         &gt;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         &gt;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         testScalars
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d24842648961-2">
        <span class="crayon-v">
         testScalars
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-e">
         InitializeArray
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         10
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         1000
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         1
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d24842648961-3">
        <span class="crayon-v">
         testScalars
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-e">
         SetName
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-s">
         "scalars"
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d24842648961-4">
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d24842648961-5">
        <span class="crayon-v">
         vtkNew
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-v">
         vtkImageData
        </span>
        <span class="crayon-o">
         &gt;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         image
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d24842648961-6">
        <span class="crayon-v">
         image
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-e">
         SetDimensions
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         10
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         10
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         10
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d24842648961-7">
        <span class="crayon-v">
         image
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-e">
         GetPointData
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-e">
         SetScalars
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         testScalars
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetPointer
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d24842648961-8">
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d24842648961-9">
        <span class="crayon-v">
         vtkNew
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-v">
         vtkLineSource
        </span>
        <span class="crayon-o">
         &gt;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         line
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d24842648961-10">
        <span class="crayon-v">
         line
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-e">
         SetPoint1
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d24842648961-11">
        <span class="crayon-v">
         line
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-e">
         SetPoint2
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         9
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         9
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         9
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d24842648961-12">
        <span class="crayon-v">
         line
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-e">
         SetResolution
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         50
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d24842648961-13">
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d24842648961-14">
        <span class="crayon-v">
         vtkNew
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-v">
         vtkProbeFilter
        </span>
        <span class="crayon-o">
         &gt;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         probe
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d24842648961-15">
        <span class="crayon-v">
         probe
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-e">
         SetSourceData
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         image
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetPointer
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d24842648961-16">
        <span class="crayon-v">
         probe
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-e">
         SetInputConnection
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         line
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-e">
         GetOutputPort
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d24842648961-17">
        <span class="crayon-v">
         probe
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-e">
         Update
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d24842648961-18">
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d24842648961-19">
        <span class="crayon-e ">
         vtkDataArray*
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         outScalars
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d24842648961-20">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         probe
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-e">
         GetOutput
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-e">
         GetPointData
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-e">
         GetArray
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-s">
         "scalars"
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d24842648961-21">
        <span class="crayon-st">
         for
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-t">
         int
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         i
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         i
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-cn">
         50
        </span>
        <span class="crayon-sy">
         ;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         i
        </span>
        <span class="crayon-o">
         ++
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d24842648961-22">
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         {
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d24842648961-23">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         cout
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         &lt;&lt;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         i
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         &lt;&lt;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-s">
         " : "
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         &lt;&lt;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         outScalars
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-e">
         GetTuple1
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         i
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         &lt;&lt;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         endl
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d24842648961-24">
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         }
        </span>
       </div>
      </div>
     </td>
    </tr>
   </table>
  </div>
 </div>
 <!-- [Format Time: 0.0009 seconds] -->
 <p>
  This prints 10 for each point as expected.
 </p>
 <h2 id="struct-of-arrays">
  Struct of Arrays
 </h2>
 <p>
  Let’s do something a bit more involved. As you probably know, VTK stores vectors in an interleaved way. When linearly traversing a vector array, the component index increases faster than the tuple index. This is commonly referred to as array of structs (AOS, see
  <a href="http://stackoverflow.com/questions/17924705/structure-of-arrays-vs-array-of-structures-in-cuda">
   this link
  </a>
  for example). Many simulation codes store their vectors as struct of arrays (SOA).
  <a href="https://www.kitware.com/allison-vacanti/">
   Dave
  </a>
  developed an array that can handle AOS vectors. See the full code
  <a href="https://github.com/Kitware/VTK/blob/master/IO/Exodus/vtkCPExodusIIResultsArrayTemplate.h">
   here
  </a>
  and
  <a href="https://github.com/Kitware/VTK/blob/master/IO/Exodus/vtkCPExodusIIResultsArrayTemplate.txx">
   here
  </a>
  . This class is very similar to
  <span style="font-family: courier;">
   vtkConstantArray
  </span>
  , which is no surprise given that I copied from it for my implementation. The meat of this array is the following piece of code.
 </p>
 <!-- Crayon Syntax Highlighter v_2.7.2_beta -->
 <div class="crayon-syntax crayon-theme-coy crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c41e81d20d27545317128" style=" margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 25px !important;">
  <div class="crayon-plain-wrap">
   <textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 16px !important; line-height: 25px !important;" wrap="soft">
template &lt;class Scalar&gt; Scalar&amp; vtkCPExodusIIResultsArrayTemplate&lt;Scalar&gt;
::GetValueReference(vtkIdType idx)
{
  const vtkIdType tuple = idx / this-&gt;NumberOfComponents;
  const vtkIdType comp = idx % this-&gt;NumberOfComponents;
  return this-&gt;Arrays[comp][tuple];
}</textarea>
  </div>
  <div class="crayon-main">
   <table class="crayon-table">
    <tr class="crayon-row">
     <td class="crayon-nums " data-settings="show">
      <div class="crayon-nums-content" style="font-size: 16px !important; line-height: 25px !important;">
       <div class="crayon-num" data-line="crayon-5c41e81d20d27545317128-1">
        1
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d27545317128-2">
        2
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d27545317128-3">
        3
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d27545317128-4">
        4
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d27545317128-5">
        5
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d27545317128-6">
        6
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d27545317128-7">
        7
       </div>
      </div>
     </td>
     <td class="crayon-code">
      <div class="crayon-pre" style="font-size: 16px !important; line-height: 25px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <div class="crayon-line" id="crayon-5c41e81d20d27545317128-1">
        <span class="crayon-v">
         template
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-t">
         class
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         Scalar
        </span>
        <span class="crayon-o">
         &gt;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         Scalar
        </span>
        <span class="crayon-o">
         &amp;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtkCPExodusIIResultsArrayTemplate
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-v">
         Scalar
        </span>
        <span class="crayon-o">
         &gt;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d27545317128-2">
        <span class="crayon-o">
         ::
        </span>
        <span class="crayon-e">
         GetValueReference
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-e">
         vtkIdType
        </span>
        <span class="crayon-v">
         idx
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d27545317128-3">
        <span class="crayon-sy">
         {
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d27545317128-4">
        <span class="crayon-h">
        </span>
        <span class="crayon-m">
         const
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         vtkIdType
        </span>
        <span class="crayon-v">
         tuple
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         idx
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         /
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         this
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-v">
         NumberOfComponents
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d27545317128-5">
        <span class="crayon-h">
        </span>
        <span class="crayon-m">
         const
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         vtkIdType
        </span>
        <span class="crayon-v">
         comp
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         idx
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         %
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         this
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-v">
         NumberOfComponents
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d27545317128-6">
        <span class="crayon-h">
        </span>
        <span class="crayon-st">
         return
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         this
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-v">
         Arrays
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-v">
         comp
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-v">
         tuple
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d27545317128-7">
        <span class="crayon-sy">
         }
        </span>
       </div>
      </div>
     </td>
    </tr>
   </table>
  </div>
 </div>
 <!-- [Format Time: 0.0004 seconds] -->
 <p>
  Note how this method maps a value reference to the right array and index in an SOA data structure. The equivalent of this for VTK’s AOS data structure is the following.
 </p>
 <!-- Crayon Syntax Highlighter v_2.7.2_beta -->
 <div class="crayon-syntax crayon-theme-coy crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c41e81d20d2a542979775" style=" margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 25px !important;">
  <div class="crayon-plain-wrap">
   <textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 16px !important; line-height: 25px !important;" wrap="soft">
template &lt;class Scalar&gt; Scalar&amp; vtkCPExodusIIResultsArrayTemplate&lt;Scalar&gt;
::GetValueReference(vtkIdType idx)
{
  return this-&gt;Array[idx];
}</textarea>
  </div>
  <div class="crayon-main">
   <table class="crayon-table">
    <tr class="crayon-row">
     <td class="crayon-nums " data-settings="show">
      <div class="crayon-nums-content" style="font-size: 16px !important; line-height: 25px !important;">
       <div class="crayon-num" data-line="crayon-5c41e81d20d2a542979775-1">
        1
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d2a542979775-2">
        2
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d2a542979775-3">
        3
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d2a542979775-4">
        4
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d2a542979775-5">
        5
       </div>
      </div>
     </td>
     <td class="crayon-code">
      <div class="crayon-pre" style="font-size: 16px !important; line-height: 25px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <div class="crayon-line" id="crayon-5c41e81d20d2a542979775-1">
        <span class="crayon-v">
         template
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-t">
         class
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         Scalar
        </span>
        <span class="crayon-o">
         &gt;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         Scalar
        </span>
        <span class="crayon-o">
         &amp;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtkCPExodusIIResultsArrayTemplate
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-v">
         Scalar
        </span>
        <span class="crayon-o">
         &gt;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d2a542979775-2">
        <span class="crayon-o">
         ::
        </span>
        <span class="crayon-e">
         GetValueReference
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-e">
         vtkIdType
        </span>
        <span class="crayon-v">
         idx
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d2a542979775-3">
        <span class="crayon-sy">
         {
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d2a542979775-4">
        <span class="crayon-h">
        </span>
        <span class="crayon-st">
         return
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         this
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-t">
         Array
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-v">
         idx
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d2a542979775-5">
        <span class="crayon-sy">
         }
        </span>
       </div>
      </div>
     </td>
    </tr>
   </table>
  </div>
 </div>
 <!-- [Format Time: 0.0002 seconds] -->
 <p>
 </p>
 <h2 id="implicit-points-array">
  Implicit Points Array
 </h2>
 <p>
  This requires explanation. In VTK, there are two types of datasets. In one type, subclasses of
  <span style="font-family: courier;">
   vtkPointSet
  </span>
  , the point coordinates are stored explicitly as a
  <span style="font-family: courier;">
   vtkDataArray
  </span>
  (inside a
  <span style="font-family: courier;">
   vtkPoints
  </span>
  ). In the other type, the points coordinates are stored implicitly (
  <span style="font-family: courier;">
   vtkImageData
  </span>
  and
  <span style="font-family: courier;">
   vtkRectilinearGrid
  </span>
  ). There are occasions where we may want an implementation that is in between these two types. For example, when we threshold an image, the filter produces a
  <span style="font-family: courier;">
   vtkUnstructuredGrid
  </span>
  , which stores its points explicitly. This causes a significant increase in memory usage. Wouldn’t it be nice if the threshold filter could create an unstructured grid but still refer to the points implicitly? In a future blog, I will describe how we can implement a threshold filter that does this and more. Here, let’s look at a data array that can used to develop such a filter. See
  <a href="https://github.com/berkgeveci/berkgeveci.github.io/blob/jekyll/code/zero-copy/vtkImagePointsArray.h">
   here
  </a>
  and
  <a href="https://github.com/berkgeveci/berkgeveci.github.io/blob/jekyll/code/zero-copy/vtkImagePointsArray.txx">
   here
  </a>
  for the implementation. The meat of this class is as follows.
 </p>
 <!-- Crayon Syntax Highlighter v_2.7.2_beta -->
 <div class="crayon-syntax crayon-theme-coy crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c41e81d20d2d153742595" style=" margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 25px !important;">
  <div class="crayon-plain-wrap">
   <textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 16px !important; line-height: 25px !important;" wrap="soft">
template &lt;class Scalar&gt; Scalar&amp; vtkImagePointsArray&lt;Scalar&gt;
::GetValueReference(vtkIdType idx)
{
  assert(this-&gt;Points);

  const vtkIdType tuple = idx / 3;
  const vtkIdType comp = idx % 3;

  return this-&gt;Points-&gt;GetPoint(tuple)[comp];
}</textarea>
  </div>
  <div class="crayon-main">
   <table class="crayon-table">
    <tr class="crayon-row">
     <td class="crayon-nums " data-settings="show">
      <div class="crayon-nums-content" style="font-size: 16px !important; line-height: 25px !important;">
       <div class="crayon-num" data-line="crayon-5c41e81d20d2d153742595-1">
        1
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d2d153742595-2">
        2
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d2d153742595-3">
        3
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d2d153742595-4">
        4
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d2d153742595-5">
        5
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d2d153742595-6">
        6
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d2d153742595-7">
        7
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d2d153742595-8">
        8
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d2d153742595-9">
        9
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d2d153742595-10">
        10
       </div>
      </div>
     </td>
     <td class="crayon-code">
      <div class="crayon-pre" style="font-size: 16px !important; line-height: 25px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <div class="crayon-line" id="crayon-5c41e81d20d2d153742595-1">
        <span class="crayon-v">
         template
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-t">
         class
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         Scalar
        </span>
        <span class="crayon-o">
         &gt;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         Scalar
        </span>
        <span class="crayon-o">
         &amp;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtkImagePointsArray
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-v">
         Scalar
        </span>
        <span class="crayon-o">
         &gt;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d2d153742595-2">
        <span class="crayon-o">
         ::
        </span>
        <span class="crayon-e">
         GetValueReference
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-e">
         vtkIdType
        </span>
        <span class="crayon-v">
         idx
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d2d153742595-3">
        <span class="crayon-sy">
         {
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d2d153742595-4">
        <span class="crayon-h">
        </span>
        <span class="crayon-st">
         assert
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-r">
         this
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-v">
         Points
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d2d153742595-5">
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d2d153742595-6">
        <span class="crayon-h">
        </span>
        <span class="crayon-m">
         const
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         vtkIdType
        </span>
        <span class="crayon-v">
         tuple
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         idx
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         /
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         3
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d2d153742595-7">
        <span class="crayon-h">
        </span>
        <span class="crayon-m">
         const
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         vtkIdType
        </span>
        <span class="crayon-v">
         comp
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         idx
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         %
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         3
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d2d153742595-8">
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d2d153742595-9">
        <span class="crayon-h">
        </span>
        <span class="crayon-st">
         return
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         this
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-v">
         Points
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-e">
         GetPoint
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         tuple
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-v">
         comp
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d2d153742595-10">
        <span class="crayon-sy">
         }
        </span>
       </div>
      </div>
     </td>
    </tr>
   </table>
  </div>
 </div>
 <!-- [Format Time: 0.0026 seconds] -->
 <p>
  Note that
  <span style="font-family: courier;">
   Points
  </span>
  is actually a
  <span style="font-family: courier;">
   vtkImageData
  </span>
  , which calculates point coordinates implicitly with the following code.
 </p>
 <!-- Crayon Syntax Highlighter v_2.7.2_beta -->
 <div class="crayon-syntax crayon-theme-coy crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c41e81d20d2f454627547" style=" margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 25px !important;">
  <div class="crayon-plain-wrap">
   <textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 16px !important; line-height: 25px !important;" wrap="soft">
void vtkImageData::GetPoint(vtkIdType ptId, double x[3])
{
  int i, loc[3];
  const double *origin = this-&gt;Origin;
  const double *spacing = this-&gt;Spacing;
  const int* extent = this-&gt;Extent;

  vtkIdType dims[3];
  dims[0] = extent[1] - extent[0] + 1;
  dims[1] = extent[3] - extent[2] + 1;
  dims[2] = extent[5] - extent[4] + 1;

  loc[0] = ptId % dims[0];
  loc[1] = (ptId / dims[0]) % dims[1];
  loc[2] = ptId / (dims[0]*dims[1]);

  for (i=0; i&lt;3; i++)
    {
    x[i] = origin[i] + (loc[i]+extent[i*2]) * spacing[i];
    }
}</textarea>
  </div>
  <div class="crayon-main">
   <table class="crayon-table">
    <tr class="crayon-row">
     <td class="crayon-nums " data-settings="show">
      <div class="crayon-nums-content" style="font-size: 16px !important; line-height: 25px !important;">
       <div class="crayon-num" data-line="crayon-5c41e81d20d2f454627547-1">
        1
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d2f454627547-2">
        2
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d2f454627547-3">
        3
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d2f454627547-4">
        4
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d2f454627547-5">
        5
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d2f454627547-6">
        6
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d2f454627547-7">
        7
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d2f454627547-8">
        8
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d2f454627547-9">
        9
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d2f454627547-10">
        10
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d2f454627547-11">
        11
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d2f454627547-12">
        12
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d2f454627547-13">
        13
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d2f454627547-14">
        14
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d2f454627547-15">
        15
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d2f454627547-16">
        16
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d2f454627547-17">
        17
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d2f454627547-18">
        18
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d2f454627547-19">
        19
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d2f454627547-20">
        20
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d2f454627547-21">
        21
       </div>
      </div>
     </td>
     <td class="crayon-code">
      <div class="crayon-pre" style="font-size: 16px !important; line-height: 25px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <div class="crayon-line" id="crayon-5c41e81d20d2f454627547-1">
        <span class="crayon-t">
         void
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         vtkImageData
        </span>
        <span class="crayon-o">
         ::
        </span>
        <span class="crayon-e">
         GetPoint
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-e">
         vtkIdType
        </span>
        <span class="crayon-v">
         ptId
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-t">
         double
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         x
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-cn">
         3
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d2f454627547-2">
        <span class="crayon-sy">
         {
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d2f454627547-3">
        <span class="crayon-h">
        </span>
        <span class="crayon-t">
         int
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         i
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         loc
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-cn">
         3
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d2f454627547-4">
        <span class="crayon-h">
        </span>
        <span class="crayon-m">
         const
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-t">
         double
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         *
        </span>
        <span class="crayon-v">
         origin
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         this
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-v">
         Origin
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d2f454627547-5">
        <span class="crayon-h">
        </span>
        <span class="crayon-m">
         const
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-t">
         double
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         *
        </span>
        <span class="crayon-v">
         spacing
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         this
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-v">
         Spacing
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d2f454627547-6">
        <span class="crayon-h">
        </span>
        <span class="crayon-m">
         const
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-t">
         int
        </span>
        <span class="crayon-o">
         *
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         extent
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-r">
         this
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-v">
         Extent
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d2f454627547-7">
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d2f454627547-8">
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         vtkIdType
        </span>
        <span class="crayon-v">
         dims
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-cn">
         3
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d2f454627547-9">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         dims
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         extent
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-cn">
         1
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         -
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         extent
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         +
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         1
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d2f454627547-10">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         dims
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-cn">
         1
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         extent
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-cn">
         3
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         -
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         extent
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-cn">
         2
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         +
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         1
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d2f454627547-11">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         dims
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-cn">
         2
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         extent
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-cn">
         5
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         -
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         extent
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-cn">
         4
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         +
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         1
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d2f454627547-12">
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d2f454627547-13">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         loc
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         ptId
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         %
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         dims
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d2f454627547-14">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         loc
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-cn">
         1
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         ptId
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         /
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         dims
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         %
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         dims
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-cn">
         1
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d2f454627547-15">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         loc
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-cn">
         2
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         ptId
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         /
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         dims
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-o">
         *
        </span>
        <span class="crayon-v">
         dims
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-cn">
         1
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d2f454627547-16">
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d2f454627547-17">
        <span class="crayon-h">
        </span>
        <span class="crayon-st">
         for
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         i
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         i
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-cn">
         3
        </span>
        <span class="crayon-sy">
         ;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         i
        </span>
        <span class="crayon-o">
         ++
        </span>
        <span class="crayon-sy">
         )
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d2f454627547-18">
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         {
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d2f454627547-19">
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         x
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-v">
         i
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         origin
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-v">
         i
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         +
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         loc
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-v">
         i
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-o">
         +
        </span>
        <span class="crayon-v">
         extent
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-e ">
         i*
        </span>
        <span class="crayon-cn">
         2
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         *
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         spacing
        </span>
        <span class="crayon-sy">
         [
        </span>
        <span class="crayon-v">
         i
        </span>
        <span class="crayon-sy">
         ]
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d2f454627547-20">
        <span class="crayon-h">
        </span>
        <span class="crayon-sy">
         }
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d2f454627547-21">
        <span class="crayon-sy">
         }
        </span>
       </div>
      </div>
     </td>
    </tr>
   </table>
  </div>
 </div>
 <!-- [Format Time: 0.0011 seconds] -->
 <p>
  I left out some of the code for simplicity. We can exercise this class with the following.
 </p>
 <!-- Crayon Syntax Highlighter v_2.7.2_beta -->
 <div class="crayon-syntax crayon-theme-coy crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c41e81d20d31396492629" style=" margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 25px !important;">
  <div class="crayon-plain-wrap">
   <textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 16px !important; line-height: 25px !important;" wrap="soft">
vtkNew&lt;vtkRTAnalyticSource&gt; source;
source-&gt;SetWholeExtent(-50, 50, -50, 50, -50, 50);
source-&gt;Update();

vtkImageData* wavelet = source-&gt;GetOutput();

vtkNew&lt;vtkImageData&gt; img;
img-&gt;CopyStructure(wavelet);

vtkNew&lt;vtkImagePointsArray&lt;double&gt; &gt; testPts;
testPts-&gt;InitializeArray(img.GetPointer());
testPts-&gt;SetName("pts");

vtkNew&lt;vtkPoints&gt; points;
points-&gt;SetData(testPts.GetPointer());

// This creates an unstructured grid from the input
// image data.
vtkNew&lt;vtkCleanUnstructuredGrid&gt; toUGrid;
toUGrid-&gt;SetInputData(wavelet);
toUGrid-&gt;Update();

vtkUnstructuredGrid* ugrid = toUGrid-&gt;GetOutput();
// Here we substitute the implicit points.
ugrid-&gt;SetPoints(points.GetPointer());

vtkNew&lt;vtkContourFilter&gt; contour2;
contour2-&gt;SetInputData(ugrid);
contour2-&gt;SetValue(0, 200);
contour2-&gt;Update();</textarea>
  </div>
  <div class="crayon-main">
   <table class="crayon-table">
    <tr class="crayon-row">
     <td class="crayon-nums " data-settings="show">
      <div class="crayon-nums-content" style="font-size: 16px !important; line-height: 25px !important;">
       <div class="crayon-num" data-line="crayon-5c41e81d20d31396492629-1">
        1
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d31396492629-2">
        2
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d31396492629-3">
        3
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d31396492629-4">
        4
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d31396492629-5">
        5
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d31396492629-6">
        6
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d31396492629-7">
        7
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d31396492629-8">
        8
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d31396492629-9">
        9
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d31396492629-10">
        10
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d31396492629-11">
        11
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d31396492629-12">
        12
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d31396492629-13">
        13
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d31396492629-14">
        14
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d31396492629-15">
        15
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d31396492629-16">
        16
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d31396492629-17">
        17
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d31396492629-18">
        18
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d31396492629-19">
        19
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d31396492629-20">
        20
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d31396492629-21">
        21
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d31396492629-22">
        22
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d31396492629-23">
        23
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d31396492629-24">
        24
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d31396492629-25">
        25
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d31396492629-26">
        26
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d31396492629-27">
        27
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d31396492629-28">
        28
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d31396492629-29">
        29
       </div>
       <div class="crayon-num" data-line="crayon-5c41e81d20d31396492629-30">
        30
       </div>
      </div>
     </td>
     <td class="crayon-code">
      <div class="crayon-pre" style="font-size: 16px !important; line-height: 25px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <div class="crayon-line" id="crayon-5c41e81d20d31396492629-1">
        <span class="crayon-v">
         vtkNew
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-v">
         vtkRTAnalyticSource
        </span>
        <span class="crayon-o">
         &gt;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         source
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d31396492629-2">
        <span class="crayon-v">
         source
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-e">
         SetWholeExtent
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-o">
         -
        </span>
        <span class="crayon-cn">
         50
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         50
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         -
        </span>
        <span class="crayon-cn">
         50
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         50
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         -
        </span>
        <span class="crayon-cn">
         50
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         50
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d31396492629-3">
        <span class="crayon-v">
         source
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-e">
         Update
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d31396492629-4">
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d31396492629-5">
        <span class="crayon-e ">
         vtkImageData*
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         wavelet
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         source
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-e">
         GetOutput
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d31396492629-6">
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d31396492629-7">
        <span class="crayon-v">
         vtkNew
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-v">
         vtkImageData
        </span>
        <span class="crayon-o">
         &gt;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         img
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d31396492629-8">
        <span class="crayon-v">
         img
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-e">
         CopyStructure
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         wavelet
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d31396492629-9">
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d31396492629-10">
        <span class="crayon-v">
         vtkNew
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-v">
         vtkImagePointsArray
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-t">
         double
        </span>
        <span class="crayon-o">
         &gt;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         &gt;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         testPts
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d31396492629-11">
        <span class="crayon-v">
         testPts
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-e">
         InitializeArray
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         img
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetPointer
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d31396492629-12">
        <span class="crayon-v">
         testPts
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-e">
         SetName
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-s">
         "pts"
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d31396492629-13">
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d31396492629-14">
        <span class="crayon-v">
         vtkNew
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-v">
         vtkPoints
        </span>
        <span class="crayon-o">
         &gt;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         points
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d31396492629-15">
        <span class="crayon-v">
         points
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-e">
         SetData
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         testPts
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetPointer
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d31396492629-16">
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d31396492629-17">
        <span class="crayon-c">
         // This creates an unstructured grid from the input
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d31396492629-18">
        <span class="crayon-c">
         // image data.
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d31396492629-19">
        <span class="crayon-v">
         vtkNew
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-v">
         vtkCleanUnstructuredGrid
        </span>
        <span class="crayon-o">
         &gt;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         toUGrid
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d31396492629-20">
        <span class="crayon-v">
         toUGrid
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-e">
         SetInputData
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         wavelet
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d31396492629-21">
        <span class="crayon-v">
         toUGrid
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-e">
         Update
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d31396492629-22">
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d31396492629-23">
        <span class="crayon-e ">
         vtkUnstructuredGrid*
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         ugrid
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-o">
         =
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         toUGrid
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-e">
         GetOutput
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d31396492629-24">
        <span class="crayon-c">
         // Here we substitute the implicit points.
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d31396492629-25">
        <span class="crayon-v">
         ugrid
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-e">
         SetPoints
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         points
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-e">
         GetPointer
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d31396492629-26">
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d31396492629-27">
        <span class="crayon-v">
         vtkNew
        </span>
        <span class="crayon-o">
         &lt;
        </span>
        <span class="crayon-v">
         vtkContourFilter
        </span>
        <span class="crayon-o">
         &gt;
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-v">
         contour2
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d31396492629-28">
        <span class="crayon-v">
         contour2
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-e">
         SetInputData
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-v">
         ugrid
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d31396492629-29">
        <span class="crayon-v">
         contour2
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-e">
         SetValue
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-cn">
         0
        </span>
        <span class="crayon-sy">
         ,
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-cn">
         200
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e81d20d31396492629-30">
        <span class="crayon-v">
         contour2
        </span>
        <span class="crayon-o">
         -&gt;
        </span>
        <span class="crayon-e">
         Update
        </span>
        <span class="crayon-sy">
         (
        </span>
        <span class="crayon-sy">
         )
        </span>
        <span class="crayon-sy">
         ;
        </span>
       </div>
      </div>
     </td>
    </tr>
   </table>
  </div>
 </div>
 <!-- [Format Time: 0.0009 seconds] -->
 <p>
  The full code which can be found
  <a href="https://github.com/berkgeveci/berkgeveci.github.io/blob/jekyll/code/zero-copy/imageugrid.cxx">
   here
  </a>
  verifies that the output of the contour filter matches the output that is generated from an unstructured grid with explicit points.
 </p>
 <p>
  We covered a few examples of data array subclasses that use memory layouts different than VTK’s default. Most filters should work out-of-box when they encounter these arrays. However, some filters, especially those that directly access raw pointers, need to be changed. In my next blog, I will demonstrate how such filters can be easily updated. Until then, happy zero copying.
 </p>
</div>
