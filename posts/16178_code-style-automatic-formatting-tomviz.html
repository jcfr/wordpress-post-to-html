<meta charset="utf-8">
<div class="entry-content">
 <p>
  The importance of
  <a href="https://en.wikipedia.org/wiki/Indent_style" target="_blank">
   coding style
  </a>
  should not be underestimated, and we have seen a number of changes in our projects over the last few months. Until recently
  <a href="http://vtk.org/" target="_blank">
   VTK
  </a>
  and
  <a href="http://paraview.org/" target="_blank">
   ParaView
  </a>
  used a style for braces that I have only ever encountered in projects coming from our company, with minimal to no support in most editors. Having a consistent coding style is important, but it can also be a pain to describe and takes time to go over in code reviews. I had been tracking
  <a href="http://clang.llvm.org/docs/ClangFormat.html" target="_blank">
   clang-format
  </a>
  for quite some time now, along with several of its predecessors, but this project seemed different as it built upon the language parser in
  <a href="http://clang.llvm.org/" target="_blank">
   clang
  </a>
  .
 </p>
 <!-- Crayon Syntax Highlighter v_2.7.2_beta -->
 <div class="crayon-syntax crayon-theme-coy crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c41e853f2f45218579627" style=" margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 25px !important;">
  <div class="crayon-plain-wrap">
   <textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 16px !important; line-height: 25px !important;" wrap="soft">
---
# This configuration requires clang-format 3.8 or higher.
BasedOnStyle: Mozilla
AlwaysBreakAfterReturnType: None
AlwaysBreakAfterDefinitionReturnType: None
BreakConstructorInitializersBeforeComma: false
...</textarea>
  </div>
  <div class="crayon-main">
   <table class="crayon-table">
    <tr class="crayon-row">
     <td class="crayon-nums " data-settings="show">
      <div class="crayon-nums-content" style="font-size: 16px !important; line-height: 25px !important;">
       <div class="crayon-num" data-line="crayon-5c41e853f2f45218579627-1">
        1
       </div>
       <div class="crayon-num" data-line="crayon-5c41e853f2f45218579627-2">
        2
       </div>
       <div class="crayon-num" data-line="crayon-5c41e853f2f45218579627-3">
        3
       </div>
       <div class="crayon-num" data-line="crayon-5c41e853f2f45218579627-4">
        4
       </div>
       <div class="crayon-num" data-line="crayon-5c41e853f2f45218579627-5">
        5
       </div>
       <div class="crayon-num" data-line="crayon-5c41e853f2f45218579627-6">
        6
       </div>
       <div class="crayon-num" data-line="crayon-5c41e853f2f45218579627-7">
        7
       </div>
      </div>
     </td>
     <td class="crayon-code">
      <div class="crayon-pre" style="font-size: 16px !important; line-height: 25px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
       <div class="crayon-line" id="crayon-5c41e853f2f45218579627-1">
        <span class="crayon-o">
         --
        </span>
        <span class="crayon-o">
         -
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e853f2f45218579627-2">
        <span class="crayon-p">
         # This configuration requires clang-format 3.8 or higher.
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e853f2f45218579627-3">
        <span class="crayon-v">
         BasedOnStyle
        </span>
        <span class="crayon-o">
         :
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         Mozilla
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e853f2f45218579627-4">
        <span class="crayon-v">
         AlwaysBreakAfterReturnType
        </span>
        <span class="crayon-o">
         :
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         None
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e853f2f45218579627-5">
        <span class="crayon-v">
         AlwaysBreakAfterDefinitionReturnType
        </span>
        <span class="crayon-o">
         :
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-e">
         None
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e853f2f45218579627-6">
        <span class="crayon-v">
         BreakConstructorInitializersBeforeComma
        </span>
        <span class="crayon-o">
         :
        </span>
        <span class="crayon-h">
        </span>
        <span class="crayon-t">
         false
        </span>
       </div>
       <div class="crayon-line" id="crayon-5c41e853f2f45218579627-7">
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-sy">
         .
        </span>
        <span class="crayon-sy">
         .
        </span>
       </div>
      </div>
     </td>
    </tr>
   </table>
  </div>
 </div>
 <!-- [Format Time: 0.0002 seconds] -->
 <p>
  For
  <a href="http://tomviz.org/" target="_blank">
   Tomviz
  </a>
  I based our format file on what
  <a href="http://cmake.org/" target="_blank">
   CMake
  </a>
  used in its recent conversion, with some minor adjustments. I was then able to run it in August on all of our source files, and Chris Harris added an automated hook on our
  <a href="https://github.com/OpenChemistry/tomviz" target="_blank">
   GitHub repository
  </a>
  to validate that proposed changes comply with the style file. All pull requests are now run through the checks, with the necessary changes supplied if the test fails. This removes the need to review pull requests for coding style, and ensures our code base has a uniform style. Chris has since extended this to our Python code using flake8 too.
 </p>
 <p>
  Developers can easily apply the style to their changes, I usually run â€˜clang-format -i path/to/changed.*â€™, there are other ways to use the tool too. Now to weigh in on the great brace placement war â€“ we have chosen our side with CMake and keep them on the same line as the statement, preserving maximum vertical space. The ParaView project just merged their clang-format changes this morning, opting to place them on a new line, with VTK using a custom script that also places them on a new line.
 </p>
 <p>
  Upcoming posts in the series â€“ tabs vs spaces, emacs vs vim, and finally Android vs iPhone (I heard the desktop was dead already, but my typing speed is terrible on a phone and I canâ€™t get my development environment up and running on it). Throwing down the gauntlet, but in all seriousness automating these things frees up development time while still fostering style uniformity. The clang-format tool enables us to express our code style in a very succinct fashion that can be applied very easily before committing changes â€“ it also understands and can work with diffs/git very well.
 </p>
 <p>
  Oh, and spoiler alertâ€¦spaces, vim, Android ðŸ˜‰
 </p>
</div>
